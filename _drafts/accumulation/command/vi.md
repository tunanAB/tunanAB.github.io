### Linux—vi命令详解

>vi编辑器是所有Unix及Linux系统下标准的编辑器，它的强大不逊色于任何最新的文本编辑器，这里只是简单地介绍一下它的用法和一小部分指令。由于对Unix及Linux系统的任何版本，vi编辑器是完全相同的，因此您可以在其他任何介绍vi的地方进一步了解它。Vi也是Linux中最基本的文本编辑器，学会它后，您将在Linux的世界里畅行无阻。

#### 1、vi的基本概念

​	基本上vi可以分为三种状态，分别是命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode），各模式的功能区分如下：

##### 1.命令行模式command mode）

​	控制屏幕光标的移动，字符、字或行的删除，移动复制某区段及进入Insert mode下，或者到 last line mode。

##### 2.插入模式（Insert mode）

​	只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。

##### 3.底行模式（last line mode）

​	将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。

​	不过一般我们在使用时把vi简化成两个模式，就是将底行模式（last line mode）也算入命令行模式command mode）。

#### 2、vi的基本操作

##### 1.进入vi

​	在系统提示符号输入vi及文件名称后，进入vi之后，是处于「命令行模式（command mode）」，您要切换到「插入模式（Insert mode）」再输入文字。但是经过我个人的实践，在command mode模式下，可以输入英文字符（非命令）来插入，但是会把当前光标的的字符给删除掉

##### 2.切换至插入模式（Insert mode）编辑文件

​	在「命令行模式（command mode）」下按一下字母「i」就可以进入「插入模式（Insert mode）」，这时候你就可以开始输入文字了。

##### 3.切换至命令行模式

​	目前处于「插入模式（Insert mode）」，就只能一直输入文字，如果发现输错了字！想用光标键往回移动，将该字删除，就要先按一下「ESC」键转到「命令行模式（command mode）」再删除文字。

##### 4.退出vi及保存文件

​	在「命令行模式（command mode）」下，按一下「：」冒号键进入「Last line mode」，例如：

```shell
:w filename 
//输入 「w filename」将文章以指定的文件名filename保存

:wq
//输入「wq」，存盘并退出vi

:q! 
//输入q!， 不存盘强制退出vi
```

#### 3、命令行（command mode）功能键

##### 1）.插入模式

​	按「i」切换进入插入模式「insert mode」，是从光标当前位置开始输入文件；

​	按「a」进入插入模式后，是从目前光标所在位置的下一个位置开始输入文字；

​	按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。

##### 2）.从插入模式切换为命令行模式

​	按 [esc] 键

##### 3）.移动光标

​		vi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。

​		按「ctrl」+「b」：屏幕往"后"移动一页。

​		按「ctrl」+「f」：屏幕往"前"移动一页。

​		按「ctrl」+「u」：屏幕往"后"移动半页。

​		按「ctrl」+「d」：屏幕往"前"移动半页。

​		按「gg」：移动到文件开头

​		按「shift+g」：移动到文章的最后。

​		[H]：将光标移动到屏幕首行的行首，是当前屏幕的第一行，不是整个文件的第一行

​		[M]：中间的行首

​		[L]：最后一行的行首

​		跳转到文件开头：按两下 左中括号键：[[ 

​		跳转到文件结尾：按两下右中括号键：]]

​		跳转到指定的xx行数： xxgg，如跳转到52行，则执行52gg即可。

​		按「$」：移动到光标所在行的"行尾"。

​		按「^」：移动到光标所在行的"行首"

​		按「w」：光标跳到下个字的开头

​		按「e」：光标跳到下个字的字尾

​		按「b」：光标回到上个字的开头

##### 4）.查找

​		[n] 或 [?] ：查找，在 / 后输入要查找的内容

​		[n] ：与 [/] 或 [?] 连用，在查找之后，按 [n] 可以查找下一个关键字

##### 5）.删除命令

```shell
x
//每按一次，删除光标所在位置的“后面”一个字符。

nx
//删除光标位置后面的n个字符

X
//每按一次，删除光标所在位置的“前面”一个字符。

nX
//删除光标位置前面的n个字符

dd
//删除光标所在行

ndd
//从光标开始所在行删除n行

d$
//从光标所在位置开始删除到行尾

u
//撤回

```

