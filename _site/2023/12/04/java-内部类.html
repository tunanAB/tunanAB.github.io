<p>Java 一个类中可以嵌套另外一个类，语法格式如下</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">OuterClass</span> <span class="o">{</span>   <span class="c1">// 外部类</span>
    <span class="c1">// ...</span>
    <span class="kd">class</span> <span class="nc">NestedClass</span> <span class="o">{</span> <span class="c1">// 嵌套类，或称为内部类</span>
        <span class="c1">// ...</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>要访问内部类，可以通过创建外部类的对象，然后创建内部类的对象来实现。</p>

<p>嵌套类有两种类型：</p>

<ul>
  <li>非静态内部类</li>
  <li>静态内部类</li>
</ul>

<h3 id="非静态内部类">非静态内部类</h3>

<p>非静态内部类是一个类中嵌套着另外一个类。 它有访问外部类成员的权限， 通常被称为内部类。</p>

<p>由于内部类嵌套在外部类中，因此必须首先实例化外部类，然后创建内部类的对象来实现。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">OuterClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>

<span class="err"> </span> <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMainClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span> <span class="n">myOuter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OuterClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span><span class="o">.</span><span class="na">InnerClass</span> <span class="n">myInner</span> <span class="o">=</span> <span class="n">myOuter</span><span class="o">.</span><span class="na">new</span> <span class="nf">InnerClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myInner</span><span class="o">.</span><span class="na">y</span> <span class="o">+</span> <span class="n">myOuter</span><span class="o">.</span><span class="na">x</span><span class="o">);</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="私有的内部类">私有的内部类</h3>

<p>内部类可以使用 private 或 protected 来修饰，如果你不希望内部类被外部类访问可以使用 private 修饰符：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">OuterClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>

<span class="err"> </span> <span class="kd">private</span> <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMainClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span> <span class="n">myOuter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OuterClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span><span class="o">.</span><span class="na">InnerClass</span> <span class="n">myInner</span> <span class="o">=</span> <span class="n">myOuter</span><span class="o">.</span><span class="na">new</span> <span class="nf">InnerClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myInner</span><span class="o">.</span><span class="na">y</span> <span class="o">+</span> <span class="n">myOuter</span><span class="o">.</span><span class="na">x</span><span class="o">);</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>以上实例 InnerClass 设置为私有内部类，执行会报错：</p>

<h3 id="静态内部类">静态内部类</h3>

<p>静态内部类可以使用 static 关键字定义，静态内部类我们不需要创建外部类来访问，可以直接访问它：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">OuterClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>

<span class="err"> </span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMainClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span><span class="o">.</span><span class="na">InnerClass</span> <span class="n">myInner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OuterClass</span><span class="o">.</span><span class="na">InnerClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myInner</span><span class="o">.</span><span class="na">y</span><span class="o">);</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>注意：</strong>静态内部类无法访问外部类的成员。</p>

<h3 id="从内部类访问外部类成员">从内部类访问外部类成员</h3>

<p>内部类一个高级的用法就是可以访问外部类的属性和方法：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">OuterClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>

<span class="err"> </span> <span class="kd">class</span> <span class="nc">InnerClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="kd">public</span> <span class="kt">int</span> <span class="nf">myInnerMethod</span><span class="o">()</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
<span class="err"> </span> <span class="err"> </span> <span class="o">}</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyMainClass</span> <span class="o">{</span>
<span class="err"> </span> <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span> <span class="n">myOuter</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OuterClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">OuterClass</span><span class="o">.</span><span class="na">InnerClass</span> <span class="n">myInner</span> <span class="o">=</span> <span class="n">myOuter</span><span class="o">.</span><span class="na">new</span> <span class="nf">InnerClass</span><span class="o">();</span>
<span class="err"> </span> <span class="err"> </span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">myInner</span><span class="o">.</span><span class="na">myInnerMethod</span><span class="o">());</span>
<span class="err"> </span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

