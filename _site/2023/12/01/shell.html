<p>在Linux中编写shell脚本时，在文本首行需要输入#!/bin/sh或者#!/bin/bash，这两个比较常见，还有其他的比如#!/bin/dash等，含义和区别如下：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
</code></pre></div></div>

<p>一、含义：定义使用哪种shell解释器来解释该shell脚本</p>

<p>#!/bin/sh表示该脚本使用/bin/sh来解释执行，#!/bin/bash表示该脚本使用/bin/bash来解释执行。每个脚本开头都使用<strong>”#!”</strong>，#!实际上是一个2字节魔法数字，指定一个文件类型的特殊标记，在这种情况下，指的就是一个可执行的脚本。在#!之后，接一个路径名，这个路径名指定一个解释脚本命令的程序，这个程序可以是shell，或者任意一个通用程序。</p>

<p>在命令行中输入 ls /bin/*sh -l 指令查看系统实际的解释器，显示如下：</p>

<p><img src="../images/20201210174340330.png" alt="img" /></p>

<p>sh是bash的一种特殊的模式，也就是/bin/sh相当于/bin/bash –posix。说白了sh就是开启了POSIX标准的bash 。在一般的Linux系统当中（如Ubuntu），使用sh调用执行脚本相当于打开了bash的POSIX标准模式。sh一般设成bash的软链接，如上图所示。</p>

<p>在命令行中输入 cat /etc/shells 指令查看自己系统可以使用的shell种类：</p>

<p><img src="../images/20201210174627107.png" alt="img" /></p>

<p>在命令行中输入 cat /etc/passwd指令查看当前系统默认使用的shell如下：</p>

<p><img src="../images/20201210180322395.png" alt="img" /></p>

<p>三种执行方式 （./xxx.sh bash xxx.sh . xxx.sh）
三种执行方式的不同点（./xxx.sh bash xxx.sh . xxx.sh）</p>

<p>./xxx.sh :先按照 文件中#!指定的解析器解析
如果#！指定指定的解析器不存在 才会使用系统默认的解析器</p>

<p>bash xxx.sh:指明先用bash解析器解析
如果bash不存在 才会使用默认解析器</p>

<p>. xxx.sh 直接使用默认解析器解析（不会执行第一行的#！指定的解析器）但是第一行还是要写的</p>

<h5 id="变量">变量</h5>

<p>定义变量
变量名=变量值
如：num=10
引用变量
$变量名
unset ：清除变量值</p>

<p><img src="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>

<p><img src="../images/watermark,type_ZmFuZ3poZZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>

<p>从键盘获取值read</p>

<p><img src="../images/watermark,type_ZmFuZ3poZW5naGVpXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" />
<img src="../images/20200420204743982.png" alt="在这里插入图片描述" /></p>

<p><img src="../images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmN0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>

<p><img src="../images/watermaVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" /></p>

<p>读取多个值</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">num</span><span class="o">=</span>10
<span class="nb">echo</span> <span class="s2">"num=</span><span class="nv">$num</span><span class="s2">"</span>
<span class="nb">read</span> <span class="nt">-p</span> <span class="s2">"请输入Num的值："</span> num
<span class="nb">echo</span> <span class="s2">"num=</span><span class="nv">$num</span><span class="s2">"</span>
<span class="nb">read </span>data1 data2
<span class="nb">echo</span> <span class="s2">"data1=</span><span class="nv">$data1</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"data2=</span><span class="nv">$data2</span><span class="s2">"</span>
</code></pre></div></div>

<p>只读变量</p>

<p><img src="../images/251" alt="在这里插入图片描述" /></p>

<p><img src="../images/461" alt="在这里插入图片描述" /></p>

<p>注意事项：
1、变量名只能包含英文字母下划线，不能以数字开头
1_num=10 错误
num_1=20 正确
2、等号两边不能直接接空格符，若变量中本身就包含了空格，则整个字符串都要用双引号、或单引号括起来
3、双引号 单引号的区别
双引号：可以解析变量的值
单引号：不能解析变量的值</p>

<p><img src="../images/image-20230602215356416.png" alt="image-20230602215356416" /></p>

<p><img src="../images/image-20230602220606610.png" alt="image-20230602220606610" /></p>

<h4 id="62-字符串的操作">6.2 字符串的操作</h4>

<p><img src="../images/撒地方" alt="在这里插入图片描述" /></p>

<p><code class="language-plaintext highlighter-rouge">这里的$好像意思是引用{#str}这一表达式的结果，要不然后边的表达式就不会转义，有点像\</code></p>

<h3 id="7条件测试">7、条件测试</h3>

<h5 id="71-文件测试">7.1 文件测试</h5>

<p>test命令：用于测试字符串、文件状态和数字
test命令有两种格式:
test condition 或[ condition ]
使用方括号时，要注意在条件两边加上空格。</p>

<p><img src="../images/453" alt="在这里插入图片描述" /></p>

<p><img src="../images/3234" alt="在这里插入图片描述" /></p>

<p>:question:这里的$有点像c中的引用，fileName就好像一个地址</p>

<h5 id="72-字符串测试">7.2 字符串测试</h5>

<p><img src="../images/23" alt="在这里插入图片描述" /></p>

<p><img src="../images/543" alt="在这里插入图片描述" /></p>

<p><img src="../images/765756" alt="在这里插入图片描述" /></p>

<h5 id="73-数值测试">7.3 数值测试</h5>

<p><img src="../images/3242" alt="在这里插入图片描述" /></p>

<p><img src="../images/2524524" alt="在这里插入图片描述" /></p>

<p><img src="../images/64457" alt="在这里插入图片描述" /></p>

<h5 id="74-复合语句测试">7.4 复合语句测试</h5>

<p><img src="../images/34234" alt="在这里插入图片描述" /></p>

<p><img src="../images/63736" alt="在这里插入图片描述" /></p>

<h3 id="一shell介绍">一、shell介绍</h3>

<h4 id="-的用法">$ 的用法</h4>

<h5 id="1-引用变量">1. 引用变量</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@localhost ~]# <span class="nv">x</span><span class="o">=</span>1024
<span class="o">[</span>root@localhost ~]# <span class="nb">echo</span> <span class="nv">$x</span>
1024

<span class="o">[</span>root@localhost ~]# <span class="nv">x</span><span class="o">=</span>1024
<span class="o">[</span>root@localhost ~]# <span class="nb">echo</span> <span class="s2">"x = </span><span class="nv">$x</span><span class="s2">"</span>
x <span class="o">=</span> 1024
<span class="c"># 利用双引号括起来的内容支持变量插值</span>

<span class="o">[</span>root@localhost ~]# <span class="nv">x</span><span class="o">=</span>1024
<span class="o">[</span>root@localhost ~]# <span class="nb">echo</span> <span class="s2">"x = </span><span class="k">${</span><span class="nv">x</span><span class="k">}</span><span class="s2">xy"</span>
x <span class="o">=</span> 1024xy

<span class="o">[</span>root@localhost etc]# <span class="nv">s</span><span class="o">=</span>helloworld
<span class="o">[</span>root@localhost etc]# <span class="nb">echo</span> <span class="s2">"s.length = </span><span class="k">${#</span><span class="nv">s</span><span class="k">}</span><span class="s2">"</span>
s.length <span class="o">=</span> 10
</code></pre></div></div>

<h5 id="2引用脚本或函数参数">2.引用脚本或函数参数</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>

</code></pre></div></div>

<h5 id="3-执行命令并输出">3. 执行命令并输出</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@localhost ~]# <span class="nb">echo</span> <span class="sb">`</span><span class="nb">date</span><span class="sb">`</span>
2016年 06月 05日 星期日 12:39:08 CST
<span class="o">[</span>root@localhost ~]# <span class="nb">echo</span> <span class="si">$(</span><span class="nb">date</span><span class="si">)</span>
2016年 06月 05日 星期日 12:39:34 CST

</code></pre></div></div>

<h5 id="4-四种模式匹配替换结构">4. 四种模式匹配替换结构</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">${</span><span class="nv">var</span><span class="p">#pattern</span><span class="k">}</span>：从变量 var 的开头删除最短匹配 pattern 的字符串。
<span class="k">${</span><span class="nv">var</span><span class="p">##pattern</span><span class="k">}</span>：从变量 var 的开头删除最长匹配 pattern 的字符串。
<span class="k">${</span><span class="nv">var</span><span class="p">%pattern</span><span class="k">}</span>：从变量 var 的结尾删除最短匹配 pattern 的字符串。
<span class="k">${</span><span class="nv">var</span><span class="p">%%pattern</span><span class="k">}</span>：从变量 var 的结尾删除最长匹配 pattern 的字符串。
<span class="k">${</span><span class="nv">var</span><span class="p">/pattern/replacement</span><span class="k">}</span>：将变量 var 中第一个匹配 pattern 的字符串替换为 replacement。
<span class="k">${</span><span class="nv">var</span><span class="p">//pattern/replacement</span><span class="k">}</span>：将变量 var 中所有匹配 pattern 的字符串替换为 replacement。

    <span class="c"># var=testcase  </span>
    <span class="c"># echo $var  </span>
    testcase  
    <span class="c"># echo ${var%s*e} </span>
    testca  
    <span class="c"># echo $var  </span>
    testcase 
    <span class="c"># echo ${var%%s*e} </span>
    te
    <span class="c"># echo ${var#?e}  </span>
    stcase
    <span class="c"># echo ${var##?e}  </span>
    stcase
    <span class="c"># echo ${var##*e}  </span>
 
    <span class="c"># echo ${var##*s}  </span>
    e  
    <span class="c"># echo ${var##test}  </span>
    <span class="k">case</span>  
</code></pre></div></div>

<h4 id="shell-中字符串拼接方法">shell 中字符串拼接方法</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nv">name</span><span class="o">=</span><span class="s2">"Shell"</span>
<span class="nv">url</span><span class="o">=</span><span class="s2">"http://c.biancheng.net/shell/"</span>

<span class="nv">str1</span><span class="o">=</span><span class="nv">$name$url</span>  <span class="c">#中间不能有空格</span>
<span class="nv">str2</span><span class="o">=</span><span class="s2">"</span><span class="nv">$name</span><span class="s2"> </span><span class="nv">$url</span><span class="s2">"</span>  <span class="c">#如果被双引号包围，那么中间可以有空格</span>
<span class="nv">str3</span><span class="o">=</span><span class="nv">$name</span><span class="s2">": "</span><span class="nv">$url</span>  <span class="c">#中间可以出现别的字符串</span>
<span class="nv">str4</span><span class="o">=</span><span class="s2">"</span><span class="nv">$name</span><span class="s2">: </span><span class="nv">$url</span><span class="s2">"</span>  <span class="c">#这样写也可以</span>
<span class="nv">str5</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">name</span><span class="k">}</span><span class="s2">Script: </span><span class="k">${</span><span class="nv">url</span><span class="k">}</span><span class="s2">index.html"</span>  <span class="c">#这个时候需要给变量名加上大括号</span>

<span class="nb">echo</span> <span class="nv">$str1</span>
<span class="nb">echo</span> <span class="nv">$str2</span>
<span class="nb">echo</span> <span class="nv">$str3</span>
<span class="nb">echo</span> <span class="nv">$str4</span>
<span class="nb">echo</span> <span class="nv">$str5</span>


Shellhttp://c.biancheng.net/shell/
Shell http://c.biancheng.net/shell/
Shell: http://c.biancheng.net/shell/
Shell: http://c.biancheng.net/shell/
ShellScript: http://c.biancheng.net/shell/index.html

</code></pre></div></div>

<h3 id="二shell环境变量">二、shell环境变量</h3>

<h4 id="21-shell变量">2.1 shell变量</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 常见的3种变量</span>
Shell编程中变量分为三种，分别是系统变量、环境变量和用户变量，Shell变量名在定义时，首个字符必须为字母（a-z，A-Z），不能以数字开头，中间不能有空格，可以使用下划线（_），不能使用（-），也不能使用标点符号等。

<span class="c"># 在Shell中，变量的值是没有类型的，也就是说，变量保存的值在使用时可以被视为任何类型。在Shell中，比较大小的操作符（如 -eq，-ne，-gt，-lt等）只适用于整数类型。但是，在比较大小时，如果变量的值可以被转换为整数类型，Shell会自动将其转换为整数类型然后进行比较。因此，即使read命令读取的值保存在变量中的是字符串类型，在使用时也可以被视为整数类型进行比较。例如：</span>

<span class="nb">read </span>num1
<span class="nb">read </span>num2
<span class="k">if</span> <span class="o">[</span> <span class="nv">$num1</span> <span class="nt">-gt</span> <span class="nv">$num2</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$num1</span><span class="s2"> is greater than </span><span class="nv">$num2</span><span class="s2">"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$num1</span><span class="s2"> is smaller than or equal to </span><span class="nv">$num2</span><span class="s2">"</span>
<span class="k">fi

</span>在这个例子中，我们使用read命令分别读取<span class="nv">$num1</span>和<span class="nv">$num2</span>的值，并使用比较大小的操作符 <span class="nt">-gt</span> 进行比较。即使<span class="nv">$num1</span>和<span class="nv">$num2</span>的值是字符串类型，在比较时也会被自动转换为整数类型。

</code></pre></div></div>

<h4 id="22-shell系统变量">2.2 shell系统变量</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell常见的变量之一系统变量，主要是用于对参数判断和命令返回值判断时使用，系统变量详解如下：</span>

<span class="nv">$0</span> 		当前脚本的名称；
<span class="nv">$n</span> 		当前脚本的第n个参数,n<span class="o">=</span>1,2,…9；
<span class="nv">$*</span> 		当前脚本的所有参数<span class="o">(</span>不包括程序本身<span class="o">)</span>；
<span class="nv">$# </span>		当前脚本的参数个数<span class="o">(</span>不包括程序本身<span class="o">)</span>；
<span class="nv">$?</span> 		令或程序执行完后的状态，返回0表示执行成功；
<span class="nv">$$</span> 		程序本身的PID号。
</code></pre></div></div>

<h4 id="23-shell环境变量">2.3 shell环境变量</h4>

<h5 id="231-常见的系统环境变量">2.3.1 常见的系统环境变量</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Shell常见的变量之二环境变量，主要是在程序运行时需要设置，环境变量详解如下：</span>

PATH  		命令所示路径，以冒号为分割；
HOME  		打印用户家目录；
SHELL 		显示当前Shell类型；
USER  		打印当前用户名；
ID    		打印当前用户id信息；
PWD   		显示当前所在路径；
TERM  		打印当前终端类型；
HOSTNAME    显示当前主机名；
PS1         定义主机命令提示符的；
HISTSIZE    历史命令大小，可通过 HISTTIMEFORMAT 变量设置命令执行时间<span class="p">;</span>
RANDOM      随机生成一个 0 至 32767 的整数<span class="p">;</span>
HOSTNAME    主机名
</code></pre></div></div>

<h4 id="24-shell用户环境变量">2.4 shell用户环境变量</h4>

<h5 id="241-自定义shell环境变量">2.4.1 自定义shell环境变量</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 常见的变量之三用户变量，用户变量又称为局部变量，主要用在Shell脚本内部或者临时局部使用，系统变量详解如下：</span>
<span class="nv">a</span><span class="o">=</span>rivers 				       自定义变量A；
<span class="nv">Httpd_sort</span><span class="o">=</span>httpd-2.4.6-97.tar  自定义变量N_SOFT；
<span class="nv">BACK_DIR</span><span class="o">=</span>/data/backup/         自定义变量BACK_DIR；
<span class="nv">IPaddress</span><span class="o">=</span>10.0.0.1			   自定义变量IP1；

</code></pre></div></div>

<h5 id="243-shell-中彩色输出helloworld">2.4.3 shell 中彩色输出helloworld</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># This is echo color shell</span>
<span class="c"># by author rivers 2021.09-23</span>
<span class="c"># 字体颜色</span>
<span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>31..37<span class="o">}</span><span class="p">;</span> <span class="k">do
</span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33[</span><span class="nv">$i</span><span class="s2">;40mHello world!</span><span class="se">\0</span><span class="s2">33[0m"</span>
<span class="k">done</span>
<span class="c"># 背景颜色</span>
<span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>41..47<span class="o">}</span><span class="p">;</span> <span class="k">do
</span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33[47;</span><span class="k">${</span><span class="nv">i</span><span class="k">}</span><span class="s2">mHello world!</span><span class="se">\0</span><span class="s2">33[0m"</span>
<span class="k">done</span>
<span class="c"># 显示方式</span>
<span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>1..8<span class="o">}</span><span class="p">;</span> <span class="k">do
</span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\0</span><span class="s2">33[</span><span class="nv">$i</span><span class="s2">;31;40mHello world!</span><span class="se">\0</span><span class="s2">33[0m"</span>
<span class="k">done</span>
</code></pre></div></div>

<h3 id="三shell编程流程控制语句">三、shell编程流程控制语句</h3>

<h4 id="31-if-条件语句">3.1 if 条件语句</h4>

<h5 id="test-命令的用法">test 命令的用法</h5>

<blockquote>
  <p>（1）test 是 Shell 内置命令，用来检测某个条件是否成立。</p>

  <p>（2）test 命令的格式如下，也可以简写为[ ]，如下所示。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">test </span>expression
<span class="c">#或者</span>
<span class="o">[</span> expression <span class="o">]</span>
</code></pre></div>  </div>

  <ul>
    <li>当 expression 成立时，test命令的退出状态为 0，否则为非 0 值。</li>
    <li>注意<code class="language-plaintext highlighter-rouge">[]</code>和<code class="language-plaintext highlighter-rouge">expression</code>之间必须有空格。</li>
  </ul>

  <p>（3）test命令通常和 if 语句一起使用，并且大部分 if 语句都依赖 test。下面代码中，<code class="language-plaintext highlighter-rouge">-le</code>选项表示小于等于，<code class="language-plaintext highlighter-rouge">-ge</code>选项表示大于等于，<code class="language-plaintext highlighter-rouge">&amp;&amp;</code>是逻辑与运算符。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
 
<span class="nb">read </span>age
 
<span class="k">if </span><span class="nb">test</span> <span class="nv">$age</span> <span class="nt">-le</span> 2<span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"婴儿"</span>
<span class="k">elif </span><span class="nb">test</span> <span class="nv">$age</span> <span class="nt">-ge</span> 3 <span class="o">&amp;&amp;</span> <span class="nb">test</span> <span class="nv">$age</span> <span class="nt">-le</span> 8<span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"幼儿"</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$age</span> <span class="nt">-ge</span> 9 <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="nv">$age</span> <span class="nt">-le</span> 17 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"少年"</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$age</span> <span class="nt">-ge</span> 18 <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="nv">$age</span> <span class="nt">-le</span> 25 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"成年"</span>
<span class="k">elif </span><span class="nb">test</span> <span class="nv">$age</span> <span class="nt">-ge</span> 26 <span class="o">&amp;&amp;</span> <span class="nb">test</span> <span class="nv">$age</span> <span class="nt">-le</span> 40<span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"青年"</span>
<span class="k">elif </span><span class="nb">test</span> <span class="nv">$age</span> <span class="nt">-ge</span> 41 <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="nv">$age</span> <span class="nt">-le</span> 60 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"中年"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"老年"</span>
<span class="k">fi</span>
</code></pre></div>  </div>

  <p>（4）test 命令有很多选项，可以进行数值、字符串和文件三个方面的检测。学习 test 命令，重点是学习它的各种选项，下面我们就逐一讲解。</p>
</blockquote>

<h5 id="与文件检测相关的test">与文件检测相关的test</h5>

<h5 id="与数值比较相关的test选项">与数值比较相关的test选项</h5>

<blockquote>
  <p>（1）与数值比较相关的test选项如下表所示。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>num1 <span class="nt">-eq</span> num2	判断 num1 是否和 num2 相等。
num1 <span class="nt">-ne</span> num2	判断 num1 是否和 num2 不相等。
num1 <span class="nt">-gt</span> num2	判断 num1 是否大于 num2 。
num1 <span class="nt">-lt</span> num2	判断 num1 是否小于 num2。
num1 <span class="nt">-ge</span> num2	判断 num1 是否大于等于 num2。
num1 <span class="nt">-le</span> num2	判断 num1 是否小于等于 num2。
</code></pre></div>  </div>

  <p>（2）实例演示。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
 
<span class="nb">read </span>a b
 
<span class="k">if </span><span class="nb">test</span> <span class="nv">$a</span> <span class="nt">-eq</span> <span class="nv">$b</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"两个数相等"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"两个数不相等"</span>
<span class="k">fi</span>
</code></pre></div>  </div>

  <p>（3）注意，test 只能用来比较整数，小数相关的比较需要用bc命令。</p>
</blockquote>

<h5 id="与字符串判断相关的-test-选项">与字符串判断相关的 test 选项</h5>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-z</span> str	判断字符串 str 是否为空。
<span class="nt">-n</span> str	判断宇符串 str 是否为非空。
str1 <span class="o">=</span> str2
str1 <span class="o">==</span> str2	<span class="o">=</span>和<span class="o">==</span>是等价的，都用来判断 str1 是否和 str2 相等。
str1 <span class="o">!=</span> str2	判断 str1 是否和 str2 不相等。
str1 <span class="se">\&gt;</span> str2	判断 str1 是否大于 str2。<span class="se">\&gt;</span>是&gt;的转义字符，这样写是为了防止&gt;被误认为成重定向运算符。
str1 <span class="se">\&lt;</span> str2	判断 str1 是否小于 str2。同样，<span class="se">\&lt;</span>也是转义字符。
</code></pre></div>  </div>

  <p>（2）test命令比较奇葩，用==、&gt;、&lt;这些选项来比较两个字符串，用-eq、-lt这些选项来比较两个数值的大小，注意不能混用，即==、&gt;、&lt;这些选项不能用于比较两个数字，而-eq、-lt这些选项也不能用于比较两个字符串。另外，test不支持 &gt;= 和 &lt;= 。</p>

  <p>（3）实例演示。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">read </span>str1
<span class="nb">read </span>str2

<span class="c">#检测字符串是否为空</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$str1</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$str2</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"字符串不能为空"</span>
   <span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c">#比较字符串</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$str1</span> <span class="o">=</span> <span class="nv">$str2</span> <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"两个字符串相等"</span>
<span class="k">else
   </span><span class="nb">echo</span> <span class="s2">"两个字符串不相等"</span>
<span class="k">fi</span>
</code></pre></div>  </div>

  <p><img src="../images/asfdsafddf" alt="image-20230603160703570" /></p>

</blockquote>

<h5 id="311-常用的单双分支">3.1.1 常用的单/双分支</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># If条件判断语句，通常以if开头，fi结尾。也可加入else或者elif进行多条件的判断</span>

<span class="c"># 单分支语句 ---比较大小</span>
	<span class="k">if</span> <span class="o">[</span>条件表达式]<span class="p">;</span><span class="k">then
		</span>语句1
	<span class="k">fi</span>

<span class="c"># 双分支if 语句</span>
	<span class="k">if</span> <span class="o">[</span>表达式]
		语句1
	<span class="k">else
		</span>语句2
	<span class="k">fi</span>

<span class="c"># 多支条件语句 ---判断成绩</span>
	<span class="k">if</span> <span class="o">[</span>表达式]
		语句1
	<span class="k">elif
		</span>语句2
	<span class="k">elif
		</span>语句2
	<span class="k">fi</span>  
</code></pre></div></div>

<h5 id="312-if-常见判断逻辑运算符详解">3.1.2 if 常见判断逻辑运算符详解</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-f</span>	 	判断文件是否存在 eg: <span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> filename <span class="o">]</span>；
<span class="nt">-d</span>	 	判断目录是否存在 eg: <span class="k">if</span> <span class="o">[</span> <span class="nt">-d</span> <span class="nb">dir</span>     <span class="o">]</span>；
<span class="nt">-eq</span>		等于，应用于整型比较 equal；
<span class="nt">-ne</span>		不等于，应用于整型比较 not equal；
<span class="nt">-lt</span>		小于，应用于整型比较 letter；
<span class="nt">-gt</span>		大于，应用于整型比较 greater；
<span class="nt">-le</span>		小于或等于，应用于整型比较；
<span class="nt">-ge</span> 	大于或等于，应用于整型比较；
<span class="nt">-a</span>		双方都成立（and） 逻辑表达式 –a 逻辑表达式；
<span class="nt">-o</span>		单方成立（or） 逻辑表达式 –o 逻辑表达式；
<span class="nt">-z</span>		空字符串；
<span class="nt">-x</span>      是否具有可执行权限
<span class="o">||</span>      单方成立；
<span class="o">&amp;&amp;</span>      双方都成立表达式。
</code></pre></div></div>

<h5 id="313-使用单分支语句判断crond进程是否在运行">3.1.3 使用单分支语句判断crond进程是否在运行</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># this is check crond</span>
<span class="c"># by author rivers on 2021-9.23</span>

<span class="c"># 定义一个变量名</span>
<span class="nv">name</span><span class="o">=</span>crond
<span class="nv">num</span><span class="o">=</span><span class="si">$(</span>ps <span class="nt">-ef</span>|grep <span class="nv">$name</span>|grep <span class="nt">-vc</span> <span class="nb">grep</span><span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$num</span> <span class="nt">-eq</span> 1 <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$num</span><span class="s2"> running!"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$num</span><span class="s2"> is not running!"</span>
<span class="k">fi</span>
</code></pre></div></div>

<h5 id="315-多个条件判断学生分数等级">3.1.5 多个条件判断学生分数等级</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># if 语句可以直接对命令状态进行判断，就省去了获取$?这一步！</span>
  <span class="c"># 如果第一个条件符合就不再向下匹配</span>
<span class="c">#!/bin/bash</span>
  <span class="c"># this check grade shell</span>
  <span class="c"># by author rivers on 2021-09-27</span>
  
  <span class="nv">grade</span><span class="o">=</span><span class="nv">$1</span>
  <span class="c"># 获取传递给脚本的第一个参数</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$grade</span> <span class="nt">-gt</span> 90 <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Is's very good!"</span>
  <span class="k">elif</span> <span class="o">[</span> <span class="nv">$grade</span> <span class="nt">-gt</span> 70 <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Is's is good!"</span>
  
  <span class="k">elif</span> <span class="o">[</span> <span class="nv">$grade</span> <span class="nt">-ge</span> 60 <span class="o">]</span><span class="p">;</span><span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"pass"</span>
  
  <span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"no pass"</span>
  <span class="k">fi</span>
</code></pre></div></div>

<p><img src="../images/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5a6d5bGx55qE5Y2a5a6i,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img" /></p>

<h4 id="32-for-循环语句介绍">3.2 for 循环语句介绍</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#格式：for name [ [ in [ word ... ] ] ; ] do list ; done</span>
  <span class="k">for </span>变量名 <span class="k">in </span>取值列表<span class="p">;</span> <span class="k">do
    </span>语句 1
  <span class="k">done

</span>形式一
<span class="k">for</span> <span class="o">((</span> 初始值<span class="p">;</span> 限制值<span class="p">;</span> 执行步阶<span class="o">))</span>
	<span class="k">do
		</span>list
	<span class="k">done

</span>形式二
<span class="k">for </span>var <span class="k">in </span>con1 con2 con3 ...
	<span class="k">do
		</span>list
	<span class="k">done</span>
</code></pre></div></div>

<h5 id="321-扫描当前文件">3.2.1 扫描当前文件</h5>

<p><img src="../images/3767" alt="在这里插入图片描述" /></p>

<h4 id="33-while-循环语句介绍">3.3 while 循环语句介绍</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># While循环语句与for循环功能类似，主要用于对某个数据域进行循环读取、对文件进行遍历，通常用于需要循环某个文件或者列表，满足循环条件会一直循环，不满足则退出循环，其语法格式以while…do开头，done结尾，与while 关联的还有一个 until 语句，它与 while 不同之处在于，是当条件表达式为 false 时才循环，实际使用中比较少，这里不再讲解。</span>

<span class="k">while</span> <span class="o">[</span>表达式]
<span class="k">do
  </span>语句1
<span class="k">done</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># break 和 continue 语句</span>
  <span class="nb">break </span>是终止循环。
  <span class="k">continue </span>是跳出当前循环。
<span class="c">#示例 1：在死循环中，满足条件终止循环</span>
<span class="k">while </span><span class="nb">true</span><span class="p">;</span> <span class="k">do
  </span><span class="nb">let </span>N++
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$N</span> <span class="nt">-eq</span> 5 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">break
</span><span class="k">fi
  </span><span class="nb">echo</span> <span class="nv">$N</span>
<span class="k">done
</span>输出： 1 2 3 4

<span class="c">#示例 2：举例子说明 continue 用法</span>
<span class="nv">N</span><span class="o">=</span>0
<span class="k">while</span> <span class="o">[</span> <span class="nv">$N</span> <span class="nt">-lt</span> 5 <span class="o">]</span><span class="p">;</span> <span class="k">do
  </span><span class="nb">let </span>N++
<span class="k">if</span> <span class="o">[</span> <span class="nv">$N</span> <span class="nt">-eq</span> 3 <span class="o">]</span><span class="p">;</span> <span class="k">then
  continue
fi
  </span><span class="nb">echo</span> <span class="nv">$N</span>
<span class="k">done

</span>输出： 1 2 4

<span class="c"># 打印 1-100 数字</span>
<span class="nv">i</span><span class="o">=</span>0
<span class="k">while</span> <span class="o">((</span>i&lt;<span class="o">=</span>100<span class="o">))</span>
<span class="k">do
        </span><span class="nb">echo</span>  <span class="nv">$i</span>
        <span class="nv">i</span><span class="o">=</span><span class="sb">`</span><span class="nb">expr</span> <span class="nv">$i</span> + 1<span class="sb">`</span>
<span class="k">done</span>
</code></pre></div></div>

<h3 id="四gccmakefile批编译">四、gcc，makefile批编译</h3>

<h4 id="gcc编译程序的过程">gcc编译程序的过程</h4>

<ul>
  <li>预处理（Pre-Processing）</li>
  <li>编译（Compiling）</li>
  <li>汇编（Assembling）</li>
  <li>链接（Linking）</li>
</ul>

<p><img src="../images/f019f4b4c9d441d5991a4acabd1a916d.png" alt="请添加图片描述" /></p>

<h5 id="常用选项">常用选项</h5>

<p><img src="../images/498497" alt="请添加图片描述" /></p>

<h5 id="应用实例">应用实例</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc <span class="nt">-E</span> hello.c <span class="nt">-o</span> hello.i <span class="c">#预处理</span>
gcc <span class="nt">-S</span> hello.i <span class="nt">-o</span> hello.s <span class="c">#编译</span>
gcc <span class="nt">-c</span> hello.s <span class="nt">-o</span> hello.o <span class="c">#汇编</span>
gcc hello.o <span class="nt">-o</span> hello <span class="c">#链接</span>
gcc hello.c <span class="nt">-o</span> hello <span class="c">#直接编译链接成可执行目标文件</span>
gcc <span class="nt">-c</span> hello.c 或 gcc <span class="nt">-c</span> hello.c <span class="nt">-o</span> hello.o <span class="c">#编译生成可重定位目标文件</span>
</code></pre></div></div>

<h3 id="shell脚本实例">shell脚本实例</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>读取文件每一行
<span class="k">while </span><span class="nb">read </span>myline
<span class="k">do
 </span><span class="nb">echo</span> <span class="s2">"LINE:"</span><span class="nv">$myline</span>
<span class="k">done</span> &lt; datafile.txt

<span class="nb">cat </span>datafile.txt | <span class="k">while </span><span class="nb">read </span>myline
<span class="k">do 
 </span><span class="nb">echo</span> <span class="s2">"LINE:"</span><span class="nv">$myline</span>
<span class="k">done</span>

//不太理解zh
</code></pre></div></div>

