<h1 id="一-课程概述">一. 课程概述</h1>

<p>通常情况下，java语言一般是用来开发后台程序的，所谓的后台程序就是部署在服务器端的程序，默默的工作，用户是看不到任何界面的，所以很多情况下，学习java会感觉很枯燥。</p>

<p><img src="./images/服务器.jpg" alt="" /></p>

<p>事实上，我们使用java语言同样可以完成图形化界面程序的开发，而学习图形化界面编程相对来说就会有趣很多，因为所见即所得，也就是说，我们写的大部分代码的执行效果，是可以通过图形化界面实实在在能够看得到的。</p>

<p><img src="./images/图形化界面.gif" alt="" /></p>

<p>java使用AWT和Swing相关的类可以完成图形化界面编程，其中AWT的全称是抽象窗口工具集(Abstract Window Toolkit),它是sun公司最早提供的GUI库，这个GUI库提供了一些基本功能，但这个GUI库的功能比较有限，所以后来sun公司又提供了Swing库。通过使用AWT和Swing提供的图形化界面组件库，java的图形化界面编程非常简单，程序只需要依次创建所需的图形组件，并以合适的方式将这些组件组织在一起，就可以开发出非常美观的用户界面。</p>

<p>本次讲解的java开发平台是jdk9，希望大家课后练习时也使用jdk9，因为不同版本的jdk提供的GUI库的效果略有不同。</p>

<h1 id="二-awt-编程">二. AWT 编程</h1>

<h2 id="21-awt简介">2.1 AWT简介</h2>

<p>​     当 JDK 1.0发布时， Sun 提供了 一套基本的GUI类库，这个GUI类库希望可以在所有平台下都能运行 ， 这套基本类库被称为”抽象窗口工具集 CAbstract Window Toolkit )”，它为Java应用程序提供了基本的图形组件 。 AWT是窗口框架，它从不同平台的窗口系统中抽取出共同组件 ， 当程序运行时，将这些组件的创建和动作委托给程序所在的运行平台 。 简而言之 ，当使用 AWT 编写图形界面应用 时， 程序仅指定了界面组件的位置和行为，并未提供真正的实现，JVM调用操作系统本地的图形界面来创建和平台 一致的对等体 。</p>

<p>​	使用AWT创建的图形界面应用和所在的运行平台有相同的界面风格 ， 比如在 Windows 操作系统上，它就表现出 Windows 风格 ; 在 UNIX 操作系统上，它就表现出UNIX 风格 。 Sun 希望采用这种方式来实现 “ Write Once, Run Anywhere “ 的目标 。</p>

<h2 id="22-awt继承体系">2.2 AWT继承体系</h2>

<p>所有和 AWT 编程相关的类都放在 java.awt 包以及它的子包中， AWT 编程中有两个基类 :Component和 MenuComponent。</p>

<ul>
  <li>Component：代表一个能以图形化方式显示出来，并可与用户交互的对象，例如 Button 代表一个按钮，TextField 代表 一个文本框等；</li>
  <li>MenuComponent：则代表图形界面的菜单组件，包括 MenuBar (菜单条)、 Menultem (菜单项)等子类。</li>
</ul>

<p><img src="./images/AWT组件继承体系.png" alt="" /></p>

<p>其中 Container 是一种特殊的 Component，它代表一种容器，可以盛装普通的 Component。</p>

<p>AWT中还有一个非常重要的接口叫LayoutManager ，如果一个容器中有多个组件，那么容器就需要使用LayoutManager来管理这些组件的布局方式。</p>

<p><img src="./images/LayoutManager.png" alt="" /></p>

<h2 id="23-container容器">2.3 Container容器</h2>

<h3 id="231-container继承体系">2.3.1 Container继承体系</h3>

<p><img src="./images/Container继承体系.png" alt="" /></p>

<ul>
  <li>​	Winow是可以独立存在的顶级窗口,默认使用BorderLayout管理其内部组件布局;</li>
  <li>​        Panel可以容纳其他组件，但不能独立存在，它必须内嵌其他容器中使用，默认使用FlowLayout管理其内部组件布局；</li>
  <li>​        ScrollPane 是 一个带滚动条的容器，它也不能独立存在，默认使用 BorderLayout 管理其内部组件布局；</li>
</ul>

<h3 id="232-常见api">2.3.2 常见API</h3>

<p>Component作为基类，提供了如下常用的方法来设置组件的大小、位置、可见性等。</p>

<table>
  <thead>
    <tr>
      <th>方法签名</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>setLocation(int x, int y)</td>
      <td>设置组件的位置。</td>
    </tr>
    <tr>
      <td>setSize(int width, int height)</td>
      <td>设置组件的大小。</td>
    </tr>
    <tr>
      <td>setBounds(int x, int y, int width, int height)</td>
      <td>同时设置组件的位置、大小。</td>
    </tr>
    <tr>
      <td>setVisible(Boolean b):</td>
      <td>设置该组件的可见性。</td>
    </tr>
  </tbody>
</table>

<p>Container作为容器根类，提供了如下方法来访问容器中的组件</p>

<table>
  <thead>
    <tr>
      <th>方法签名</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Component add(Component comp)</td>
      <td>向容器中添加其他组件 (该组件既可以是普通组件，也可以 是容器) ， 并返回被添加的组件 。</td>
    </tr>
    <tr>
      <td>Component getComponentAt(int x, int y):</td>
      <td>返回指定点的组件 。</td>
    </tr>
    <tr>
      <td>int getComponentCount():</td>
      <td>返回该容器内组件的数量 。</td>
    </tr>
    <tr>
      <td>Component[] getComponents():</td>
      <td>返回该容器内的所有组件 。</td>
    </tr>
  </tbody>
</table>

<h3 id="233-容器演示">2.3.3 容器演示</h3>

<h4 id="2331-window">2.3.3.1 Window</h4>

<p>​	<img src="./images/FrameDemo.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrameDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建窗口对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这是第一个窗口容器"</span><span class="o">);</span>

        <span class="c1">//设置窗口的位置和大小</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="o">,</span><span class="mi">500</span><span class="o">,</span><span class="mi">300</span><span class="o">);</span>

        <span class="c1">//设置窗口可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="2332-panel">2.3.3.2 Panel</h4>

<p>​	<img src="./images/PanelDemo.jpg" alt="" />)</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PanelDemo</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame容器对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里在测试Panel"</span><span class="o">);</span>
        <span class="c1">//2.创建Panel容器对象</span>
        <span class="nc">Panel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>

        <span class="c1">//3.往Panel容器中添加组件</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="s">"这是一个测试文本"</span><span class="o">));</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"这是一个测试按钮"</span><span class="o">));</span>

        <span class="c1">//4.把Panel添加到Frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">panel</span><span class="o">);</span>

        <span class="c1">//5.设置Frame的位置和大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span><span class="mi">30</span><span class="o">,</span><span class="mi">500</span><span class="o">,</span><span class="mi">300</span><span class="o">);</span>

        <span class="c1">//6.设置Frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>由于IDEA默认使用utf-8进行编码，但是当前我们执行代码是是在windows系统上，而windows操作系统的默认编码是gbk，所以会乱码，如果出现了乱码，那么只需要在运行当前代码前，设置一个jvm参数  -Dfile.encoding=gbk即可。</p>

<h4 id="2333-scrollpane">2.3.3.3 ScrollPane</h4>

<p>​	<img src="./images/ScrollPaneDemo.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ScrollPaneDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame窗口对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试ScrollPane"</span><span class="o">);</span>

        <span class="c1">//2.创建ScrollPane对象，并且指定默认有滚动条</span>
        <span class="nc">ScrollPane</span> <span class="n">scrollPane</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ScrollPane</span><span class="o">(</span><span class="nc">ScrollPane</span><span class="o">.</span><span class="na">SCROLLBARS_ALWAYS</span><span class="o">);</span>

        <span class="c1">//3.往ScrollPane中添加组件</span>
        <span class="n">scrollPane</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="s">"这是测试文本"</span><span class="o">));</span>
        <span class="n">scrollPane</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"这是测试按钮"</span><span class="o">));</span>

        <span class="c1">//4.把ScrollPane添加到Frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">scrollPane</span><span class="o">);</span>

        <span class="c1">//5.设置Frame的位置及大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span><span class="mi">30</span><span class="o">,</span><span class="mi">500</span><span class="o">,</span><span class="mi">300</span><span class="o">);</span>

        <span class="c1">//6.设置Frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>程序明明向 ScrollPane 容器中添加了 一个文本框和一个按钮，但只能看到 一个按钮，却看不到文本框 ，这是为什么 呢?这是因为ScrollPane 使用 BorderLayout 布局管理器的缘故，而 BorderLayout 导致了该容器中只有一个组件被显示出来 。 下一节将向详细介绍布局管理器的知识 。</p>

<h2 id="24-layoutmanager布局管理器">2.4 LayoutManager布局管理器</h2>

<p>之前，我们介绍了Component中有一个方法 setBounds() 可以设置当前容器的位置和大小，但是我们需要明确一件事，如果我们手动的为组件设置位置和大小的话，就会造成程序的不通用性，例如：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Label</span> <span class="n">label</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Label</span><span class="o">(</span><span class="s">"你好，世界"</span><span class="o">);</span>
</code></pre></div></div>

<p>创建了一个lable组件，很多情况下，我们需要让lable组件的宽高和“你好，世界”这个字符串自身的宽高一致，这种大小称为<strong>最佳大小</strong>。由于操作系统存在差异，例如在windows上，我们要达到这样的效果，需要把该Lable组件的宽和高分别设置为100px,20px,但是在Linux操作系统上，可能需要把Lable组件的宽和高分别设置为120px，24px，才能达到同样的效果。</p>

<p>如果要让我么的程序在不同的操作系统下，都有相同的使用体验，那么手动设置组件的位置和大小，无疑是一种灾难，因为有太多的组件，需要分别设置不同操作系统下的大小和位置。为了解决这个问题，Java提供了LayoutManager布局管理器，可以根据运行平台来自动调整组件大小，程序员不用再手动设置组件的大小和位置了，只需要为容器选择合适的布局管理器即可。</p>

<p><img src="./images/常用布局管理器.png" alt="" /></p>

<h3 id="241-flowlayout">2.4.1 FlowLayout</h3>

<p>​        在 FlowLayout 布局管理器 中，组件像水流一样向某方向流动 (排列) ，遇到障碍(边界)就折回，重头开始排列 。在默认情况下， FlowLayout 布局管理器从左向右排列所有组件，遇到边界就会折回下一行重新开始。</p>

<table>
  <thead>
    <tr>
      <th>构造方法</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>FlowLayout()</td>
      <td>使用默认 的对齐方式及默认的垂直间距、水平间距创建 FlowLayout 布局管理器。</td>
    </tr>
    <tr>
      <td>FlowLayout(int align)</td>
      <td>使用指定的对齐方式及默认的垂直间距、水平间距创建 FlowLayout 布局管理器。</td>
    </tr>
    <tr>
      <td>FlowLayout(int align,int hgap,int vgap)</td>
      <td>使用指定的对齐方式及指定的垂直问距、水平间距创建FlowLayout 布局管理器。</td>
    </tr>
  </tbody>
</table>

<p>FlowLayout 中组件的排列方向(从左向右、从右向左、从中间向两边等) ， 该参数应该使用FlowLayout类的静态常量 : FlowLayout. LEFT 、 FlowLayout. CENTER 、 FlowLayout. RIGHT ，默认是左对齐。</p>

<p>FlowLayout 中组件中间距通过整数设置，单位是像素，默认是5个像素。</p>

<p><strong>代码演示：</strong></p>

<p>​	<img src="./images/FlowLayout.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FlowLayoutDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试FlowLayout"</span><span class="o">);</span>
        <span class="c1">//2.修改Frame容器的布局管理器为FlowLayout</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">FlowLayout</span><span class="o">(</span><span class="nc">FlowLayout</span><span class="o">.</span><span class="na">LEFT</span><span class="o">,</span><span class="mi">20</span><span class="o">,</span><span class="mi">20</span><span class="o">));</span>

        <span class="c1">//3.往Frame中添加100个button</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"按钮"</span><span class="o">+</span><span class="n">i</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="c1">//4.设置Frame为最佳大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="c1">//5.设置Frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="242-borderlayout">2.4.2 BorderLayout</h3>

<p>BorderLayout 将容器分为 EAST 、 SOUTH 、 WEST 、 NORTH 、 CENTER五个区域，普通组件可以被放置在这 5 个区域的任意一个中 。 BorderLayout布局 管理器的布局示意图如图所示 。</p>

<p><img src="./images/BorderLayout.png" alt="" /></p>

<p>当改变使用 BorderLayout 的容器大小时， NORTH 、 SOUTH 和 CENTER区域水平调整，而 EAST 、 WEST 和 CENTER 区域垂直调整。使用BorderLayout 有如下两个注意点:</p>

<ol>
  <li>当向使用 BorderLayout 布局管理器的容器中添加组件时 ， 需要指定要添加到哪个区域中 。 如果没有指定添加到哪个区域中，则默认添加到中间区域中；</li>
  <li>如果向同一个区域中添加多个组件时 ， 后放入的组件会覆盖先放入的组件；</li>
</ol>

<table>
  <thead>
    <tr>
      <th>构造方法</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BorderLayout()</td>
      <td>使用默认的水平间距、垂直 间距创建 BorderLayout 布局管理器 。</td>
    </tr>
    <tr>
      <td>BorderLayout(int hgap,int vgap):</td>
      <td>使用指定的水平间距、垂直间距创建 BorderLayout 布局管理器。</td>
    </tr>
  </tbody>
</table>

<p><strong>代码演示1:</strong></p>

<p>​	<img src="./images/BorderLayout.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BorderLayoutDemo1</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试BorderLayout"</span><span class="o">);</span>
        <span class="c1">//2.指定Frame对象的布局管理器为BorderLayout</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">BorderLayout</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
        <span class="c1">//3.往Frame指定东南西北中各添加一个按钮组件</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"东侧按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">EAST</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"西侧按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">WEST</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"南侧按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"北侧按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"中间按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">CENTER</span><span class="o">);</span>
        <span class="c1">//4.设置Frame为最佳大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="c1">//5.设置Frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>如果不往某个区域中放入组件，那么该区域不会空白出来，而是会被其他区域占用</p>

<p><strong>代码演示2:</strong></p>

<p>​	<img src="./images/BorderLayoutDemo2.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BorderLayoutDemo2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试BorderLayout"</span><span class="o">);</span>
        <span class="c1">//2.指定Frame对象的布局管理器为BorderLayout</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">BorderLayout</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span><span class="mi">5</span><span class="o">));</span>
        <span class="c1">//3.往Frame指定南，北，放入一个按钮，往中间区域放入一个Panel</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"南侧按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"北侧按钮"</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>

        <span class="nc">Panel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="s">"测试文本"</span><span class="o">));</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"中间按钮"</span><span class="o">));</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">panel</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">CENTER</span><span class="o">);</span>
	
        <span class="c1">//4.设置Frame为最佳大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="c1">//5.设置Frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="243-gridlayout">2.4.3 GridLayout</h3>

<p>​        GridLayout 布局管理器将容器分割成纵横线分隔的网格 ， 每个网格所占的区域大小相同。当向使用 GridLayout 布局管理器的容器中添加组件时， 默认从左向右、 从上向下依次添加到每个网格中 。 与 FlowLayout不同的是，放置在 GridLayout 布局管理器中的各组件的大小由组件所处的区域决定(每 个组件将自动占满整个区域) 。</p>

<table>
  <thead>
    <tr>
      <th>构造方法</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GridLayout(int rows,in t cols)</td>
      <td>采用指定的行数、列数，以及默认的横向间距、纵向间距将容器 分割成多个网格</td>
    </tr>
    <tr>
      <td>GridLayout(int rows,int cols,int hgap,int vgap)</td>
      <td>采用指定 的行数、列 数 ，以及指定的横向间距 、 纵向间距将容器分割成多个网格。</td>
    </tr>
  </tbody>
</table>

<p><strong>案例：</strong></p>

<p>​	使用Frame+Panel，配合FlowLayout和GridLayout完成一个计算器效果。</p>

<p>​	<img src="./images/计算器.jpg" alt="" /></p>

<p><strong>代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GridLayoutDemo</span><span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//1.创建Frame对象，并且标题设置为计算器</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"计算器"</span><span class="o">);</span>

        <span class="c1">//2.创建一个Panel对象，并且往Panel中放置一个TextField组件</span>
        <span class="nc">Panel</span> <span class="n">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">p1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="mi">30</span><span class="o">));</span>

        <span class="c1">//3.把上述的Panel放入到Frame的北侧区域</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p1</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>

        <span class="c1">//4.创建一个Panel对象，并且设置其布局管理器为GridLayout</span>
        <span class="nc">Panel</span> <span class="n">p2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">GridLayout</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">4</span><span class="o">));</span>

        <span class="c1">//5.往上述Panel中，放置15个按钮，内容依次是：0,1,2,3,4,5,6，7,8,9，+，-，*，/,.</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="n">i</span><span class="o">+</span><span class="s">""</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"+"</span><span class="o">));</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"-"</span><span class="o">));</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"*"</span><span class="o">));</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"/"</span><span class="o">));</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"."</span><span class="o">));</span>

        <span class="c1">//6.把上述Panel添加到Frame的中间区域中国</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p2</span><span class="o">);</span>
        <span class="c1">//7.设置Frame为最佳大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>

        <span class="c1">//8.设置Frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="244-gridbaglayout">2.4.4 GridBagLayout</h3>

<p>GridBagLayout 布局管理器的功能最强大 ， 但也最复杂，与 GridLayout 布局管理器不同的是， 在GridBagLayout 布局管理器中，一个组件可以跨越一个或多个网格 ， 并可以设置各网格的大小互不相同，从而增加了布局的灵活性 。 当窗口的大小发生变化时 ， GridBagLayout 布局管理器也可以准确地控制窗口各部分的拉伸 。</p>

<p><img src="./images/GridBagLayout.png" alt="" /></p>

<p>由于在GridBagLayout 布局中，每个组件可以占用多个网格，此时，我们往容器中添加组件的时候，就需要具体的控制每个组件占用多少个网格，java提供的GridBagConstaints类，与特定的组件绑定，可以完成具体大小和跨越性的设置。</p>

<p><strong>GridBagConstraints API:</strong></p>

<table>
  <thead>
    <tr>
      <th>成员变量</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>gridx</td>
      <td>设置受该对象控制的GUI组件左上角所在网格的横向索引</td>
    </tr>
    <tr>
      <td>gridy</td>
      <td>设置受该对象控制的GUI组件左上角所在网格的纵向索引</td>
    </tr>
    <tr>
      <td>gridwidth</td>
      <td>设置受该对象控制的 GUI 组件横向跨越多少个网格,如果属性值为 GridBagContraints.REMAIND,则表明当前组件是横向最后一个组件，如果属性值为GridBagConstraints.RELATIVE,表明当前组件是横向倒数第二个组件。</td>
    </tr>
    <tr>
      <td>gridheight</td>
      <td>设置受该对象控制的 GUI 组件纵向跨越多少个网格，如果属性值为 GridBagContraints.REMAIND,则表明当前组件是纵向最后一个组件，如果属性值为GridBagConstraints.RELATIVE,表明当前组件是纵向倒数第二个组件。</td>
    </tr>
    <tr>
      <td>fill</td>
      <td>当”显示区域”大于”组件”的时候,如何调整组件 ：<br /> GridBagConstraints.NONE : GUI 组件不扩大<br /> GridBagConstraints.HORIZONTAL: GUI 组件水平扩大 以 占据空白区域<br /> GridBagConstraints.VERTICAL: GUI 组件垂直扩大以占据空白区域<br /> GridBagConstraints.BOTH: GUI 组件水平 、 垂直同时扩大以占据空白区域.</td>
    </tr>
    <tr>
      <td>ipadx</td>
      <td>设置受该对象控制的 GUI 组件横向内部填充的大小，即 在该组件最小尺寸的基础上还需要增大多少.</td>
    </tr>
    <tr>
      <td>ipady</td>
      <td>设置受该对象控制的 GUI 组件纵向内部填充的大小，即 在该组件最小尺寸的基础上还需要增大多少.</td>
    </tr>
    <tr>
      <td>insets</td>
      <td>设置受该对象控制 的 GUI 组件的 外部填充的大小 ， 即该组件边界和显示区 域边界之间的 距离 .</td>
    </tr>
    <tr>
      <td>weightx</td>
      <td>设置受该对象控制 的 GUI 组件占据多余空间的水平比例， 假设某个容器 的水平线上包括三个 GUI 组件， 它们的水平增加比例分别是 1 、 2 、 3 ， 但容器宽度增加 60 像素 时，则第一个组件宽度增加 10 像素 ， 第二个组件宽度增加 20 像素，第三个组件宽度增加 30 像 素。 如 果其增 加比例为 0 ， 则 表示不会增加 。</td>
    </tr>
    <tr>
      <td>weighty</td>
      <td>设置受该对象控制 的 GUI 组件占据多余空间的垂直比例</td>
    </tr>
    <tr>
      <td>anchor</td>
      <td>设置受该对象控制 的 GUI 组件在其显示区域中的定位方式:<br />GridBagConstraints .CENTER (中 间 )<br />GridBagConstraints.NORTH (上中 ) <br />GridBagConstraints.NORTHWEST (左上角)<br />GridBagConstraints.NORTHEAST (右上角)<br />GridBagConstraints.SOUTH (下中) <br />GridBagConstraints.SOUTHEAST (右下角)<br />GridBagConstraints.SOUTHWEST (左下角)<br />GridBagConstraints.EAST (右中) <br />GridBagConstraints.WEST (左中)</td>
    </tr>
  </tbody>
</table>

<p><strong>GridBagLayout使用步骤：</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.创建GridBagLaout布局管理器对象，并给容器设置该布局管理器对象；

2.创建GridBagConstraints对象，并设置该对象的控制属性：

	gridx: 用于指定组件在网格中所处的横向索引；

	gridy: 用于执行组件在网格中所处的纵向索引；

	gridwidth: 用于指定组件横向跨越多少个网格；

	gridheight: 用于指定组件纵向跨越多少个网格；

3.调用GridBagLayout对象的setConstraints(Component c,GridBagConstraints gbc )方法，把即将要添加到容器中的组件c和GridBagConstraints对象关联起来；

4. 把组件添加到容器中；
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用Frame容器，设置GridBagLayout布局管理器，实现下图中的效果：</p>

<p>​	<img src="./images/GridBagLayout.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GridBagLayoutDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里是GridBagLayout测试"</span><span class="o">);</span>

        <span class="c1">//2.创建GridBagLayout对象</span>
        <span class="nc">GridBagLayout</span> <span class="n">gbl</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GridBagLayout</span><span class="o">();</span>

        <span class="c1">//3.把Frame对象的布局管理器设置为GridBagLayout</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="n">gbl</span><span class="o">);</span>

        <span class="c1">//4.创建GridBagConstraints对象</span>
        <span class="nc">GridBagConstraints</span> <span class="n">gbc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GridBagConstraints</span><span class="o">();</span>

        <span class="c1">//5.创建容量为10的Button数组</span>
        <span class="nc">Button</span><span class="o">[]</span> <span class="n">bs</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">[</span><span class="mi">10</span><span class="o">];</span>

        <span class="c1">//6.遍历数组，初始化每一个Button</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">bs</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">bs</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"按钮"</span><span class="o">+(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="c1">//7.设置所有的GridBagConstraints对象的fill属性为GridBagConstraints.BOTH,当有空白区域时，组件自动扩大占满空白区域</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">fill</span><span class="o">=</span><span class="nc">GridBagConstraints</span><span class="o">.</span><span class="na">BOTH</span><span class="o">;</span>

        <span class="c1">//8.设置GridBagConstraints对象的weightx设置为1,表示横向扩展比例为1</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">weightx</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>

        <span class="c1">//9.往frame中添加数组中的前3个Button</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>

        <span class="c1">//10.把GridBagConstraints的gridwidth设置为GridBagConstraints.REMAINDER,则表明当前组件是横向最后一个组件</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridwidth</span><span class="o">=</span><span class="nc">GridBagConstraints</span><span class="o">.</span><span class="na">REMAINDER</span><span class="o">;</span>

        <span class="c1">//11.把button数组中第四个按钮添加到frame中</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">3</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>


        <span class="c1">//12.把GridBagConstraints的weighty设置为1，表示纵向扩展比例为1</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">weighty</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>

        <span class="c1">//13.把button数组中第5个按钮添加到frame中</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">4</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>

        <span class="c1">//14.把GridBagConstaints的gridheight和gridwidth设置为2，表示纵向和横向会占用两个网格</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridheight</span><span class="o">=</span><span class="mi">2</span><span class="o">;</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridwidth</span><span class="o">=</span><span class="mi">2</span><span class="o">;</span>

        <span class="c1">//15.把button数组中第6个按钮添加到frame中</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">5</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>

        <span class="c1">//16.把GridBagConstaints的gridheight和gridwidth设置为1，表示纵向会占用1个网格</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridwidth</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridheight</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
        <span class="c1">//17.把button数组中第7个按钮添加到frame中</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">6</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>

        <span class="c1">//18.把GridBagConstraints的gridwidth设置为GridBagConstraints.REMAINDER,则表明当前组件是横向最后一个组件</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridwidth</span><span class="o">=</span><span class="nc">GridBagConstraints</span><span class="o">.</span><span class="na">REMAINDER</span><span class="o">;</span>

        <span class="c1">//19.把button数组中第8个按钮添加到frame中</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">7</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>

        <span class="c1">//20.把GridBagConstaints的gridwidth设置为1，表示纵向会占用1个网格</span>
        <span class="n">gbc</span><span class="o">.</span><span class="na">gridwidth</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>

        <span class="c1">//21.把button数组中第9、10个按钮添加到frame中</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">8</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>
        <span class="n">addComponent</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="n">bs</span><span class="o">[</span><span class="mi">9</span><span class="o">],</span><span class="n">gbl</span><span class="o">,</span><span class="n">gbc</span><span class="o">);</span>

        <span class="c1">//22.设置frame为最佳大小</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>

        <span class="c1">//23.设置frame可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addComponent</span><span class="o">(</span><span class="nc">Container</span> <span class="n">container</span><span class="o">,</span><span class="nc">Component</span> <span class="n">c</span><span class="o">,</span><span class="nc">GridBagLayout</span> <span class="n">gridBagLayout</span><span class="o">,</span><span class="nc">GridBagConstraints</span> <span class="n">gridBagConstraints</span><span class="o">){</span>
        <span class="n">gridBagLayout</span><span class="o">.</span><span class="na">setConstraints</span><span class="o">(</span><span class="n">c</span><span class="o">,</span><span class="n">gridBagConstraints</span><span class="o">);</span>
        <span class="n">container</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="245-cardlayout">2.4.5 CardLayout</h3>

<p>CardLayout 布局管理器以时间而非空间来管理它里面的组件，它将加入容器的所有组件看成一叠卡片（每个卡片其实就是一个组件），每次只有最上面的那个 Component 才可见。就好像一副扑克牌，它们叠在一起，每次只有最上面的一张扑克牌才可见.</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>CardLayout()</td>
      <td>创建默认的 CardLayout 布局管理器。</td>
    </tr>
    <tr>
      <td>CardLayout(int hgap,int vgap)</td>
      <td>通过指定卡片与容器左右边界的间距 C hgap) 、上下边界 Cvgap) 的间距来创建 CardLayout 布局管理器.</td>
    </tr>
    <tr>
      <td>first(Container target)</td>
      <td>显示target 容器中的第一张卡片.</td>
    </tr>
    <tr>
      <td>last(Container target)</td>
      <td>显示target 容器中的最后一张卡片.</td>
    </tr>
    <tr>
      <td>previous(Container target)</td>
      <td>显示target 容器中的前一张卡片.</td>
    </tr>
    <tr>
      <td>next(Container target)</td>
      <td>显示target 容器中的后一张卡片.</td>
    </tr>
    <tr>
      <td>show(Container taget,String name)</td>
      <td>显 示 target 容器中指定名字的卡片.</td>
    </tr>
  </tbody>
</table>

<p><strong>案例：</strong></p>

<p>​	使用Frame和Panel以及CardLayout完成下图中的效果，点击底部的按钮，切换卡片</p>

<p>​	<img src="./images/CardLayout.jpg" alt="" /></p>

<p>​</p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CardLayoutDemo</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试CardLayout"</span><span class="o">);</span>

        <span class="c1">//2.创建一个String数组，存储不同卡片的名字</span>
        <span class="nc">String</span><span class="o">[]</span> <span class="n">names</span> <span class="o">=</span> <span class="o">{</span><span class="s">"第一张"</span><span class="o">,</span><span class="s">"第二张"</span><span class="o">,</span><span class="s">"第三张"</span><span class="o">,</span><span class="s">"第四张"</span><span class="o">,</span><span class="s">"第五张"</span><span class="o">};</span>

        <span class="c1">//3.创建一个Panel容器p1，并设置其布局管理器为CardLayout,用来存放多张卡片</span>
        <span class="nc">CardLayout</span> <span class="n">cardLayout</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CardLayout</span><span class="o">();</span>
        <span class="nc">Panel</span> <span class="n">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">p1</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="n">cardLayout</span><span class="o">);</span>

        <span class="c1">//4.往p1中存储5个Button按钮，名字从String数组中取</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">p1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">names</span><span class="o">[</span><span class="n">i</span><span class="o">],</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="n">names</span><span class="o">[</span><span class="n">i</span><span class="o">]));</span>
        <span class="o">}</span>

        <span class="c1">//5.创建一个Panel容器p2,用来存储5个按钮，完成卡片的切换</span>
        <span class="nc">Panel</span> <span class="n">p2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>

        <span class="c1">//6.创建5个按钮，并给按钮设置监听器</span>
        <span class="nc">ActionListener</span> <span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">command</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getActionCommand</span><span class="o">();</span>
                <span class="k">switch</span> <span class="o">(</span><span class="n">command</span><span class="o">){</span>
                    <span class="k">case</span> <span class="s">"上一张"</span><span class="o">:</span>
                        <span class="n">cardLayout</span><span class="o">.</span><span class="na">previous</span><span class="o">(</span><span class="n">p1</span><span class="o">);</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="k">case</span> <span class="s">"下一张"</span><span class="o">:</span>
                        <span class="n">cardLayout</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="n">p1</span><span class="o">);</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="k">case</span> <span class="s">"第一张"</span><span class="o">:</span>
                        <span class="n">cardLayout</span><span class="o">.</span><span class="na">first</span><span class="o">(</span><span class="n">p1</span><span class="o">);</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="k">case</span> <span class="s">"最后一张"</span><span class="o">:</span>
                        <span class="n">cardLayout</span><span class="o">.</span><span class="na">last</span><span class="o">(</span><span class="n">p1</span><span class="o">);</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="k">case</span> <span class="s">"第三张"</span><span class="o">:</span>
                        <span class="n">cardLayout</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">p1</span><span class="o">,</span><span class="s">"第三张"</span><span class="o">);</span>
                        <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="nc">Button</span> <span class="n">b1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"上一张"</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">b2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"下一张"</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">b3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"第一张"</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">b4</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"最后一张"</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">b5</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"第三张"</span><span class="o">);</span>
        <span class="n">b1</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
        <span class="n">b2</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
        <span class="n">b3</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
        <span class="n">b4</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
        <span class="n">b5</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>

        <span class="c1">//7.把5个按钮添加到p2中</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b1</span><span class="o">);</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b2</span><span class="o">);</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b3</span><span class="o">);</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b4</span><span class="o">);</span>
        <span class="n">p2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b5</span><span class="o">);</span>


        <span class="c1">//8.把p1添加到frame的中间区域</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p1</span><span class="o">);</span>


        <span class="c1">//9.把p2添加到frame的底部区域</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p2</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//10设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="246-boxlayout">2.4.6 BoxLayout</h3>

<p>为了简化开发，Swing 引入了 一个新的布局管理器 : BoxLayout 。 BoxLayout 可以在垂直和 水平两个方向上摆放 GUI 组件， BoxLayout 提供了如下一个简单的构造器:</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BoxLayout(Container target, int axis)</td>
      <td>指定创建基于 target 容器的 BoxLayout 布局管理器，该布局管理器里的组件按 axis 方向排列。其中 axis 有 BoxLayout.X_AXIS( 横向)和 BoxLayout.Y _AXIS (纵向〉两个方向。</td>
    </tr>
  </tbody>
</table>

<p><strong>案例1：</strong></p>

<p>​	使用Frame和BoxLayout完成下图效果：</p>

<p><img src="./images/BoxLayout1.jpg" alt="" /></p>

<p><strong>演示代码1：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BoxLayoutDemo1</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试BoxLayout"</span><span class="o">);</span>
        <span class="c1">//2.创建BoxLayout布局管理器，并指定容器为上面的frame对象，指定组件排列方向为纵向</span>
        <span class="nc">BoxLayout</span> <span class="n">boxLayout</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BoxLayout</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span> <span class="nc">BoxLayout</span><span class="o">.</span><span class="na">Y_AXIS</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="n">boxLayout</span><span class="o">);</span>

        <span class="c1">//3.往frame对象中添加两个按钮</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"按钮1"</span><span class="o">));</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"按钮2"</span><span class="o">));</span>


        <span class="c1">//4.设置frame最佳大小，并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>在java.swing包中，提供了一个新的容器Box，该容器的默认布局管理器就是BoxLayout,大多数情况下，使用Box容器去容纳多个GUI组件，然后再把Box容器作为一个组件，添加到其他的容器中，从而形成整体窗口布局。</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>static Box createHorizontalBox()</td>
      <td>创建一个水平排列组件的 Box 容器 。</td>
    </tr>
    <tr>
      <td>static Box createVerticalBox()</td>
      <td>创建一个垂直排列组件的 Box 容器 。</td>
    </tr>
  </tbody>
</table>

<p><strong>案例2：</strong></p>

<p>​	使用Frame和Box，完成下图效果：</p>

<p>​	<img src="./images/boxlayoutdemo2.jpg" alt="" /></p>

<p><strong>演示代码2：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BoxLayoutDemo2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试BoxLayout"</span><span class="o">);</span>

        <span class="c1">//2.创建一个横向的Box,并添加两个按钮</span>
        <span class="nc">Box</span> <span class="n">hBox</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"水平按钮一"</span><span class="o">));</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"水平按钮二"</span><span class="o">));</span>

        <span class="c1">//3.创建一个纵向的Box，并添加两个按钮</span>
        <span class="nc">Box</span> <span class="n">vBox</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalBox</span><span class="o">();</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"垂直按钮一"</span><span class="o">));</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"垂直按钮二"</span><span class="o">));</span>

        <span class="c1">//4.把box容器添加到frame容器中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">hBox</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">vBox</span><span class="o">);</span>


        <span class="c1">//5.设置frame最佳大小并可见</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>通过之前的两个BoxLayout演示，我们会发现，被它管理的容器中的组件之间是没有间隔的，不是特别的美观，但之前学习的几种布局，组件之间都会有一些间距，那使用BoxLayout如何给组件设置间距呢？</p>

<p>其实很简单，我们只需要在原有的组件需要间隔的地方，添加间隔即可，而每个间隔可以是一个组件，只不过该组件没有内容，仅仅起到一种分隔的作用。</p>

<p><img src="./images/BoxLayout3.png" alt="" /></p>

<p>Box类中，提供了5个方便的静态方法来生成这些间隔组件：</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>static Component createHorizontalGlue()</td>
      <td>创建一条水平 Glue (可在两个方向上同时拉伸的间距)</td>
    </tr>
    <tr>
      <td>static Component createVerticalGlue()</td>
      <td>创建一条垂直 Glue (可在两个方向上同时拉伸的间距）</td>
    </tr>
    <tr>
      <td>static Component createHorizontalStrut(int width)</td>
      <td>创建一条指定宽度(宽度固定了，不能拉伸)的水平Strut (可在垂直方向上拉伸的间距)</td>
    </tr>
    <tr>
      <td>static Component createVerticalStrut(int height)</td>
      <td>创建一条指定高度(高度固定了，不能拉伸)的垂直Strut (可在水平方向上拉伸的间距)</td>
    </tr>
  </tbody>
</table>

<p><strong>案例3：</strong></p>

<p>使用Frame和Box，完成下图效果：</p>

<p><img src="./images/BoxLayout4.jpg" alt="" /></p>

<p><strong>演示代码3：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BoxLayoutDemo3</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//1.创建Frame对象</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试BoxLayout"</span><span class="o">);</span>

        <span class="c1">//2.创建一个横向的Box,并添加两个按钮</span>
        <span class="nc">Box</span> <span class="n">hBox</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"水平按钮一"</span><span class="o">));</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalGlue</span><span class="o">());</span><span class="c1">//两个方向都可以拉伸的间隔</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"水平按钮二"</span><span class="o">));</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalStrut</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span><span class="c1">//水平间隔固定，垂直间方向可以拉伸</span>
        <span class="n">hBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"水平按钮3"</span><span class="o">));</span>



        <span class="c1">//3.创建一个纵向的Box，并添加两个按钮</span>
        <span class="nc">Box</span> <span class="n">vBox</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalBox</span><span class="o">();</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"垂直按钮一"</span><span class="o">));</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalGlue</span><span class="o">());</span><span class="c1">//两个方向都可以拉伸的间隔</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"垂直按钮二"</span><span class="o">));</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalStrut</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span><span class="c1">//垂直间隔固定，水平方向可以拉伸</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"垂直按钮三"</span><span class="o">));</span>


        <span class="c1">//4.把box容器添加到frame容器中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">hBox</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">vBox</span><span class="o">);</span>


        <span class="c1">//5.设置frame最佳大小并可见</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="25-awt中常用组件">2.5 AWT中常用组件</h2>

<h3 id="251-基本组件">2.5.1 基本组件</h3>

<table>
  <thead>
    <tr>
      <th>组件名</th>
      <th>功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Button</td>
      <td>Button</td>
    </tr>
    <tr>
      <td>Canvas</td>
      <td>用于绘图的画布</td>
    </tr>
    <tr>
      <td>Checkbox</td>
      <td>复选框组件（也可当做单选框组件使用）</td>
    </tr>
    <tr>
      <td>CheckboxGroup</td>
      <td>用于将多个Checkbox 组件组合成一组， 一组 Checkbox 组件将只有一个可以 被选中 ， 即全部变成单选框组件</td>
    </tr>
    <tr>
      <td>Choice</td>
      <td>下拉选择框</td>
    </tr>
    <tr>
      <td>Frame</td>
      <td>窗口 ， 在 GUI 程序里通过该类创建窗口</td>
    </tr>
    <tr>
      <td>Label</td>
      <td>标签类，用于放置提示性文本</td>
    </tr>
    <tr>
      <td>List</td>
      <td>JU表框组件，可以添加多项条目</td>
    </tr>
    <tr>
      <td>Panel</td>
      <td>不能单独存在基本容器类，必须放到其他容器中</td>
    </tr>
    <tr>
      <td>Scrollbar</td>
      <td>滑动条组件。如果需要用户输入位于某个范围的值 ， 就可以使用滑动条组件 ，比如调 色板中设置 RGB 的三个值所用的滑动条。当创建一个滑动条时，必须指定它的方向、初始值、 滑块的大小、最小值和最大值。</td>
    </tr>
    <tr>
      <td>ScrollPane</td>
      <td>带水平及垂直滚动条的容器组件</td>
    </tr>
    <tr>
      <td>TextArea</td>
      <td>多行文本域</td>
    </tr>
    <tr>
      <td>TextField</td>
      <td>单行文本框</td>
    </tr>
  </tbody>
</table>

<p>这些 AWT 组件的用法比较简单，可以查阅 API 文档来获取它们各自的构方法、成员方法等详细信息。</p>

<p><strong>案例：</strong></p>

<p>​	实现下图效果：</p>

<p>​	<img src="./images/BasicComponent.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BasicComponentDemo</span> <span class="o">{</span>
    <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试基本组件"</span><span class="o">);</span>

    <span class="c1">//定义一个按钮</span>
    <span class="nc">Button</span> <span class="n">ok</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"确认"</span><span class="o">);</span>

    <span class="c1">//定义一个复选框组</span>
    <span class="nc">CheckboxGroup</span> <span class="n">cbg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CheckboxGroup</span><span class="o">();</span>
    <span class="c1">//定义一个单选框，初始处于被选中状态,并添加到cbg组中</span>
    <span class="nc">Checkbox</span> <span class="n">male</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Checkbox</span><span class="o">(</span><span class="s">"男"</span><span class="o">,</span> <span class="n">cbg</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

    <span class="c1">//定义一个单选框，初始处于未被选中状态,并添加到cbg组中</span>
    <span class="nc">Checkbox</span> <span class="n">female</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Checkbox</span><span class="o">(</span><span class="s">"女"</span><span class="o">,</span> <span class="n">cbg</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

    <span class="c1">//定义一个复选框，初始处于未被选中状态</span>
    <span class="nc">Checkbox</span> <span class="n">married</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Checkbox</span><span class="o">(</span><span class="s">"是否已婚？"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

    <span class="c1">//定义一个下拉选择框</span>
    <span class="nc">Choice</span> <span class="n">colorChooser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Choice</span><span class="o">();</span>

    <span class="c1">//定义一个列表选择框</span>
    <span class="nc">List</span> <span class="n">colorList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">List</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

    <span class="c1">//定义一个5行，20列的多行文本域</span>
    <span class="nc">TextArea</span> <span class="n">ta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextArea</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>

    <span class="c1">//定义一个50列的单行文本域</span>
    <span class="nc">TextField</span> <span class="n">tf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//往下拉选择框中添加内容</span>
        <span class="n">colorChooser</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"红色"</span><span class="o">);</span>
        <span class="n">colorChooser</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"绿色"</span><span class="o">);</span>
        <span class="n">colorChooser</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"蓝色"</span><span class="o">);</span>

        <span class="c1">//往列表选择框中添加内容</span>
        <span class="n">colorList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"红色"</span><span class="o">);</span>
        <span class="n">colorList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"绿色"</span><span class="o">);</span>
        <span class="n">colorList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"蓝色"</span><span class="o">);</span>

        <span class="c1">//创建一个装载按钮和文本框的Panel容器</span>
        <span class="nc">Panel</span> <span class="n">bottom</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">bottom</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tf</span><span class="o">);</span>
        <span class="n">bottom</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ok</span><span class="o">);</span>

        <span class="c1">//把bottom添加到Frame的底部</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bottom</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//创建一个Panel容器，装载下拉选择框，单选框和复选框</span>
        <span class="nc">Panel</span> <span class="n">checkPanel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">colorChooser</span><span class="o">);</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">male</span><span class="o">);</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">female</span><span class="o">);</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">married</span><span class="o">);</span>

        <span class="c1">//创建一个垂直排列的Box容器，装载 多行文本域和checkPanel</span>
        <span class="nc">Box</span> <span class="n">topLeft</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalBox</span><span class="o">();</span>
        <span class="n">topLeft</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ta</span><span class="o">);</span>
        <span class="n">topLeft</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">checkPanel</span><span class="o">);</span>

        <span class="c1">//创建一个水平排列的Box容器，装载topLeft和列表选择框</span>
        <span class="nc">Box</span> <span class="n">top</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">top</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">topLeft</span><span class="o">);</span>
        <span class="n">top</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">colorList</span><span class="o">);</span>

        <span class="c1">//将top添加到frame的中间区域</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">top</span><span class="o">);</span>


        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="k">new</span> <span class="nf">BasicComponentDemo</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>

    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="252-对话框dialog">2.5.2 对话框Dialog</h3>

<h4 id="2521-dialog">2.5.2.1 Dialog</h4>

<p>Dialog 是 Window 类的子类，是 一个容器类，属于特殊组件 。 对话框是可以独立存在的顶级窗口， 因此用法与普通窗口的用法几乎完全一样，但是使用对话框需要注意下面两点：</p>

<ul>
  <li>对话框通常依赖于其他窗口，就是通常需要有一个父窗口；</li>
  <li>对话框有非模式(non-modal)和模式(modal)两种，当某个模式对话框被打开后，该模式对话框总是位于它的父窗口之上，在模式对话框被关闭之前，父窗口无法获得焦点。</li>
</ul>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Dialog(Frame owner, String title, boolean modal)</td>
      <td>创建一个对话框对象：<br />owner:当前对话框的父窗口<br />title:当前对话框的标题<br />modal：当前对话框是否是模式对话框，true/false</td>
    </tr>
  </tbody>
</table>

<p><strong>案例1：</strong></p>

<p>​	通过Frame、Button、Dialog实现下图效果:</p>

<p>​	<img src="./images/DialogDemo1.jpg" alt="" /></p>

<p><strong>演示代码1：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DialogDemo1</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试Dialog"</span><span class="o">);</span>

        <span class="nc">Dialog</span> <span class="n">d1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Dialog</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span> <span class="s">"模式对话框"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="nc">Dialog</span> <span class="n">d2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Dialog</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span> <span class="s">"非模式对话框"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

        <span class="nc">Button</span> <span class="n">b1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"打开模式对话框"</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">b2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"打开非模式对话框"</span><span class="o">);</span>

        <span class="c1">//设置对话框的大小和位置</span>
        <span class="n">d1</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span><span class="mi">30</span><span class="o">,</span><span class="mi">300</span><span class="o">,</span><span class="mi">400</span><span class="o">);</span>
        <span class="n">d2</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span><span class="mi">30</span><span class="o">,</span><span class="mi">300</span><span class="o">,</span><span class="mi">400</span><span class="o">);</span>

        <span class="c1">//给b1和b2绑定监听事件</span>
        <span class="n">b1</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">d1</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">b2</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">d2</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//把按钮添加到frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b1</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b2</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>在Dialog对话框中，可以根据需求，自定义内容</p>

<p><strong>案例：</strong></p>

<p>​	点击按钮，弹出一个模式对话框，其内容如下:</p>

<p>​	<img src="./images/DialogDemo2.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DialogDemo2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试Dialog"</span><span class="o">);</span>

        <span class="nc">Dialog</span> <span class="n">d1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Dialog</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span> <span class="s">"模式对话框"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

        <span class="c1">//往对话框中添加内容</span>
        <span class="nc">Box</span> <span class="n">vBox</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalBox</span><span class="o">();</span>

        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="mi">15</span><span class="o">));</span>
        <span class="n">vBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"确认"</span><span class="o">));</span>
        <span class="n">d1</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">vBox</span><span class="o">);</span>

        <span class="nc">Button</span> <span class="n">b1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"打开模式对话框"</span><span class="o">);</span>

        <span class="c1">//设置对话框的大小和位置</span>
        <span class="n">d1</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span><span class="mi">30</span><span class="o">,</span><span class="mi">200</span><span class="o">,</span><span class="mi">100</span><span class="o">);</span>


        <span class="c1">//给b1绑定监听事件</span>
        <span class="n">b1</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">d1</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="c1">//把按钮添加到frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b1</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="2521-filedialog">2.5.2.1 FileDialog</h4>

<p>Dialog 类还有 一个子类 : FileDialog ，它代表一个文件对话框，用于打开或者保存 文件,需要注意的是FileDialog无法指定模态或者非模态，这是因为 FileDialog 依赖于运行平台的实现，如果运行平台的文件对话框是模态的，那么 FileDialog 也是模态的;否则就是非模态的 。</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>FileDialog(Frame parent, String title, int mode)</td>
      <td>创建一个文件对话框：<br />parent:指定父窗口<br />title:对话框标题<br />mode:文件对话框类型，如果指定为FileDialog.load，用于打开文件，如果指定为FileDialog.SAVE,用于保存文件</td>
    </tr>
    <tr>
      <td>String getDirectory()</td>
      <td>获取被打开或保存文件的绝对路径</td>
    </tr>
    <tr>
      <td>String getFile()</td>
      <td>获取被打开或保存文件的文件名</td>
    </tr>
  </tbody>
</table>

<p><strong>案例2：</strong></p>

<p>​	使用 Frame、Button和FileDialog完成下图效果：</p>

<p>​	<img src="./images/FileDialog.jpg" alt="" /></p>

<p><strong>演示代码2：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FileDialogTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试FileDialog"</span><span class="o">);</span>

        <span class="nc">FileDialog</span> <span class="n">d1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileDialog</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span> <span class="s">"选择需要加载的文件"</span><span class="o">,</span> <span class="nc">FileDialog</span><span class="o">.</span><span class="na">LOAD</span><span class="o">);</span>
        <span class="nc">FileDialog</span> <span class="n">d2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileDialog</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span> <span class="s">"选择需要保存的文件"</span><span class="o">,</span> <span class="nc">FileDialog</span><span class="o">.</span><span class="na">SAVE</span><span class="o">);</span>

        <span class="nc">Button</span> <span class="n">b1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"打开文件"</span><span class="o">);</span>
        <span class="nc">Button</span> <span class="n">b2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"保存文件"</span><span class="o">);</span>

        <span class="c1">//给按钮添加事件</span>
        <span class="n">b1</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">d1</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                <span class="c1">//打印用户选择的文件路径和名称</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"用户选择的文件路径:"</span><span class="o">+</span><span class="n">d1</span><span class="o">.</span><span class="na">getDirectory</span><span class="o">());</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"用户选择的文件名称:"</span><span class="o">+</span><span class="n">d1</span><span class="o">.</span><span class="na">getFile</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"-------------------------------"</span><span class="o">);</span>
        <span class="n">b2</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">d2</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
                <span class="c1">//打印用户选择的文件路径和名称</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"用户选择的文件路径:"</span><span class="o">+</span><span class="n">d2</span><span class="o">.</span><span class="na">getDirectory</span><span class="o">());</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"用户选择的文件名称:"</span><span class="o">+</span><span class="n">d2</span><span class="o">.</span><span class="na">getFile</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//添加按钮到frame中</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b1</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b2</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="26-事件处理">2.6 事件处理</h2>

<p>前面介绍了如何放置各种组件，从而得到了丰富多彩的图形界面，但这些界面还不能响应用户的任何操作。比如单击前面所有窗口右上角的“X”按钮，但窗口依然不会关闭。因为在 AWT 编程中 ，所有用户的操作，都必须都需要经过一套事件处理机制来完成，而 Frame 和组件本身并没有事件处理能力 。</p>

<h3 id="261-gui事件处理机制">2.6.1 GUI事件处理机制</h3>

<p><strong>定义：</strong></p>

<p>​	当在某个组件上发生某些操作的时候，会自动的触发一段代码的执行。</p>

<p>在GUI事件处理机制中涉及到4个重要的概念需要理解：</p>

<p><strong>事件源(Event Source)</strong>：操作发生的场所，通常指某个组件，例如按钮、窗口等；
<strong>事件（Event）</strong>：在事件源上发生的操作可以叫做事件，GUI会把事件都封装到一个Event对象中，如果需要知道该事件的详细信息，就可以通过Event对象来获取。
<strong>事件监听器(Event Listener)</strong>:当在某个事件源上发生了某个事件，事件监听器就可以对这个事件进行处理。</p>

<p><strong>注册监听</strong>：把某个事件监听器(A)通过某个事件(B)绑定到某个事件源(C)上，当在事件源C上发生了事件B之后，那么事件监听器A的代码就会自动执行。</p>

<p><img src="./images/事件处理机制.png" alt="" /></p>

<p><strong>使用步骤：</strong></p>

<p>1.创建事件源组件对象；</p>

<p>2.自定义类，实现XxxListener接口，重写方法；</p>

<p>3.创建事件监听器对象(自定义类对象)</p>

<p>4.调用事件源组件对象的addXxxListener方法完成注册监听</p>

<p><strong>案例：</strong></p>

<p>​	完成下图效果，点击确定按钮，在单行文本域内显示 hello world:</p>

<p>​	<img src="./images/EventDemo1.jpg" alt="" /></p>

<p>​</p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EventDemo1</span> <span class="o">{</span>
    <span class="nc">Frame</span>  <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试事件处理"</span><span class="o">);</span>

    <span class="c1">//事件源</span>
    <span class="nc">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"确定"</span><span class="o">);</span>

    <span class="nc">TextField</span> <span class="n">tf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//注册监听</span>
        <span class="n">button</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MyActionListener</span><span class="o">());</span>

        <span class="c1">//添加组件到frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tf</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">//自定义事件监听器类</span>
    <span class="kd">private</span>  <span class="kd">class</span> <span class="nc">MyActionListener</span> <span class="kd">implements</span> <span class="nc">ActionListener</span><span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"用户点击了确定按钮"</span><span class="o">);</span>
            <span class="n">tf</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"hello world"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">EventDemo1</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="262-gui中常见事件和事件监听器">2.6.2 GUI中常见事件和事件监听器</h3>

<p>事件监听器必须实现事件监听器接口， AWT 提供了大量的事件监听器接口用于实现不同类型的事件监听器，用于监听不同类型的事件 。 AWT 中提供了丰富的事件类，用于封装不同组件上所发生的特定操作， AWT 的事件类都是 AWTEvent 类的子类 ， AWTEvent是 EventObject 的子类。</p>

<h4 id="2621-事件">2.6.2.1 事件</h4>

<p>AWT把事件分为了两大类：</p>

<p>​	1.低级事件：这类事件是基于某个特定动作的事件。比如进入、点击、拖放等动作的鼠标事件，再比如得到焦点和失去焦点等焦点事件。</p>

<table>
  <thead>
    <tr>
      <th>事件</th>
      <th>触发时机</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ComponentEvent</td>
      <td>组件事件 ， 当 组件尺寸发生变化、位置发生移动、显示/隐藏状态发生改变时触发该事件。</td>
    </tr>
    <tr>
      <td>ContainerEvent</td>
      <td>容器事件 ， 当容器里发生添加组件、删除组件时触发该事件 。</td>
    </tr>
    <tr>
      <td>WindowEvent</td>
      <td>窗口事件， 当窗 口状态发生改变 ( 如打开、关闭、最大化、最 小化)时触发该事件 。</td>
    </tr>
    <tr>
      <td>FocusEvent</td>
      <td>焦点事件 ， 当组件得到焦点或失去焦点 时触发该事件 。</td>
    </tr>
    <tr>
      <td>KeyEvent</td>
      <td>键盘事件 ， 当按键被按下、松开、单击时触发该事件。</td>
    </tr>
    <tr>
      <td>MouseEvent</td>
      <td>鼠标事件，当进行单击、按下、松开、移动鼠标等动作 时触发该事件。</td>
    </tr>
    <tr>
      <td>PaintEvent</td>
      <td>组件绘制事件 ， 该事件是一个特殊的事件类型 ， 当 GUI 组件调 用 update/paint 方法 来呈现自身时触发该事件，该事件并非专用于事件处理模型 。</td>
    </tr>
  </tbody>
</table>

<p>​	2.高级事件：这类事件并不会基于某个特定动作，而是根据功能含义定义的事件。</p>

<table>
  <thead>
    <tr>
      <th>事件</th>
      <th>触发时机</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ActionEvent</td>
      <td>动作事件 ，当按钮、菜单项被单击，在 TextField 中按 Enter 键时触发</td>
    </tr>
    <tr>
      <td>AjustmentEvent</td>
      <td>调节事件，在滑动条上移动滑块以调节数值时触发该事件。</td>
    </tr>
    <tr>
      <td>ltemEvent</td>
      <td>选项事件，当用户选中某项， 或取消选中某项时触发该事件 。</td>
    </tr>
    <tr>
      <td>TextEvent</td>
      <td>文本事件， 当文本框、文本域里的文本发生改变时触发该事件。</td>
    </tr>
  </tbody>
</table>

<h4 id="262-事件监听器">2.6.2 事件监听器</h4>

<p>不同的事件需要使用不同的监听器监听，不同的监听器需要实现不同的监听器接口， 当指定事件发生后 ， 事件监听器就会调用所包含的事件处理器(实例方法)来处理事件 。</p>

<table>
  <thead>
    <tr>
      <th>事件类别</th>
      <th>描述信息</th>
      <th>监听器接口名</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ActionEvent</td>
      <td>激活组件</td>
      <td>ActionListener</td>
    </tr>
    <tr>
      <td>ItemEvent</td>
      <td>选择了某些项目</td>
      <td>ItemListener</td>
    </tr>
    <tr>
      <td>MouseEvent</td>
      <td>鼠标移动</td>
      <td>MouseMotionListener</td>
    </tr>
    <tr>
      <td>MouseEvent</td>
      <td>鼠标点击等</td>
      <td>MouseListener</td>
    </tr>
    <tr>
      <td>KeyEvent</td>
      <td>键盘输入</td>
      <td>KeyListener</td>
    </tr>
    <tr>
      <td>FocusEvent</td>
      <td>组件收到或失去焦点</td>
      <td>FocusListener</td>
    </tr>
    <tr>
      <td>AdjustmentEvent</td>
      <td>移动了滚动条等组件</td>
      <td>AdjustmentListener</td>
    </tr>
    <tr>
      <td>ComponentEvent</td>
      <td>对象移动缩放显示隐藏等</td>
      <td>ComponentListener</td>
    </tr>
    <tr>
      <td>WindowEvent</td>
      <td>窗口收到窗口级事件</td>
      <td>WindowListener</td>
    </tr>
    <tr>
      <td>ContainerEvent</td>
      <td>容器中增加删除了组件</td>
      <td>ContainerListener</td>
    </tr>
    <tr>
      <td>TextEvent</td>
      <td>文本字段或文本区发生改变</td>
      <td>TextListener</td>
    </tr>
  </tbody>
</table>

<h3 id="263-案例">2.6.3 案例</h3>

<p><strong>案例一：</strong></p>

<p>​	通过ContainerListener监听Frame容器添加组件；</p>

<p>​	通过TextListener监听TextFiled内容变化；</p>

<p>​	通过ItemListener监听Choice条目选中状态变化；</p>

<p>​	<img src="./images/ListenerDemo1.jpg" alt="" /></p>

<p><strong>演示代码一:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ContainerAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ContainerEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.TextEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.TextListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListenerDemo1</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试监听器"</span><span class="o">);</span>

        <span class="c1">//创建一个单行文本域</span>
        <span class="nc">TextField</span> <span class="n">tf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextField</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>

        <span class="c1">//给文本域添加TextListener，监听内容的变化</span>
        <span class="n">tf</span><span class="o">.</span><span class="na">addTextListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">textValueChanged</span><span class="o">(</span><span class="nc">TextEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"当前内容："</span><span class="o">+</span><span class="n">tf</span><span class="o">.</span><span class="na">getText</span><span class="o">());;</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="c1">//给frame注册ContainerListener监听器，监听容器中组件的添加</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">addContainerListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ContainerAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">componentAdded</span><span class="o">(</span><span class="nc">ContainerEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Component</span> <span class="n">child</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getChild</span><span class="o">();</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"容器中添加了新组件："</span><span class="o">+</span><span class="n">child</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="c1">//添加tf到frame</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tf</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>案例2：</strong></p>

<p>​	给Frame设置WindowListner，监听用户点击 X 的动作，如果用户点击X，则关闭当前窗口</p>

<p><strong>演示代码2：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.WindowAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.WindowEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListenerDemo2</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试WindowListener"</span><span class="o">);</span>



        <span class="n">frame</span><span class="o">.</span><span class="na">addWindowListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">WindowAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">windowClosing</span><span class="o">(</span><span class="nc">WindowEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span><span class="mi">200</span><span class="o">,</span><span class="mi">500</span><span class="o">,</span><span class="mi">300</span><span class="o">);</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="27-菜单组件">2.7 菜单组件</h2>

<p>​	前面讲解了如果构建GUI界面，其实就是把一些GUI的组件，按照一定的布局放入到容器中展示就可以了。在实际开发中，除了主界面，还有一类比较重要的内容就是菜单相关组件，可以通过菜单相关组件很方便的使用特定的功能，在AWT中，菜单相关组件的使用和之前学习的组件是一模一样的，只需要把菜单条、菜单、菜单项组合到一起，按照一定的布局，放入到容器中即可。</p>

<p><img src="./images/菜单1.png" alt="" /></p>

<p><strong>下表中给出常见的菜单相关组件：</strong></p>

<table>
  <thead>
    <tr>
      <th>菜单组件名称</th>
      <th>功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MenuBar</td>
      <td>菜单条 ， 菜单的容器 。</td>
    </tr>
    <tr>
      <td>Menu</td>
      <td>菜单组件 ， 菜单项的容器 。 它也是Menultem的子类 ，所以可作为菜单项使用</td>
    </tr>
    <tr>
      <td>PopupMenu</td>
      <td>上下文菜单组件(右键菜单组件)</td>
    </tr>
    <tr>
      <td>Menultem</td>
      <td>菜单项组件 。</td>
    </tr>
    <tr>
      <td>CheckboxMenuItem</td>
      <td>复选框菜单项组件</td>
    </tr>
  </tbody>
</table>

<p><strong>下图是常见菜单相关组件集成体系图：</strong></p>

<p>​	<img src="./images/菜单项组件继承体系.png" alt="" /></p>

<p><strong>菜单相关组件使用：</strong></p>

<p>1.准备菜单项组件，这些组件可以是MenuItem及其子类对象</p>

<p>2.准备菜单组件Menu或者PopupMenu(右击弹出子菜单)，把第一步中准备好的菜单项组件添加进来；</p>

<p>3.准备菜单条组件MenuBar，把第二步中准备好的菜单组件Menu添加进来；</p>

<p>4.把第三步中准备好的菜单条组件添加到窗口对象中显示。</p>

<p><strong>小技巧：</strong></p>

<p>1.如果要在某个菜单的菜单项之间添加分割线，那么只需要调用Menu的add（new MenuItem(-)）即可。</p>

<p>2.如果要给某个菜单项关联快捷键功能，那么只需要在创建菜单项对象时设置即可，例如给菜单项关联 ctrl+shif+/ 快捷键，只需要：new MenuItem(“菜单项名字”,new MenuShortcut(KeyEvent.VK_Q,true);</p>

<p><strong>案例1：</strong></p>

<p>​	使用awt中常用菜单组件，完成下图效果</p>

<p>​	<img src="./images/菜单1.png" alt="" /></p>

<p><strong>演示代码1：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleMenu</span> <span class="o">{</span>
    <span class="c1">//创建窗口</span>
    <span class="kd">private</span> <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试菜单相关组件"</span><span class="o">);</span>
    <span class="c1">//创建菜单条组件</span>
    <span class="kd">private</span> <span class="nc">MenuBar</span> <span class="n">menuBar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuBar</span><span class="o">();</span>
    <span class="c1">//创建文件菜单组件</span>
    <span class="kd">private</span> <span class="nc">Menu</span> <span class="n">fileMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Menu</span><span class="o">(</span><span class="s">"文件"</span><span class="o">);</span>
    <span class="c1">//创建编辑菜单组件</span>
    <span class="kd">private</span> <span class="nc">Menu</span> <span class="n">editMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Menu</span><span class="o">(</span><span class="s">"编辑"</span><span class="o">);</span>
    <span class="c1">//创建新建菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">newItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"新建"</span><span class="o">);</span>
    <span class="c1">//创建保存菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">saveItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"保存"</span><span class="o">);</span>
    <span class="c1">//创建退出菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">exitItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"退出"</span><span class="o">);</span>

    <span class="c1">//创建自动换行选择框菜单项</span>
    <span class="kd">private</span> <span class="nc">CheckboxMenuItem</span> <span class="n">autoWrap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CheckboxMenuItem</span><span class="o">(</span><span class="s">"自动换行"</span><span class="o">);</span>

    <span class="c1">//创建复制菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">copyItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"复制"</span><span class="o">);</span>

    <span class="c1">//创建粘贴菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">pasteItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"粘贴"</span><span class="o">);</span>

    <span class="c1">//创建格式菜单</span>
    <span class="kd">private</span> <span class="nc">Menu</span> <span class="n">formatMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Menu</span><span class="o">(</span><span class="s">"格式"</span><span class="o">);</span>

    <span class="c1">//创建注释菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">commentItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"注释"</span><span class="o">);</span>
    <span class="c1">//创建取消注释菜单项</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">cancelItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"取消注释"</span><span class="o">);</span>

    <span class="c1">//创建一个文本域</span>
    <span class="kd">private</span> <span class="nc">TextArea</span> <span class="n">ta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextArea</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">40</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>


        <span class="c1">//定义菜单事件监听器</span>
        <span class="nc">ActionListener</span> <span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">command</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getActionCommand</span><span class="o">();</span>
                <span class="n">ta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"单击“"</span><span class="o">+</span><span class="n">command</span><span class="o">+</span><span class="s">"”菜单\n"</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">command</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"退出"</span><span class="o">)){</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">//为注释菜单项和退出菜单项注册监听器</span>
        <span class="n">commentItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
        <span class="n">exitItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>

        <span class="c1">//为文件菜单fileMenu添加菜单项</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">newItem</span><span class="o">);</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">saveItem</span><span class="o">);</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">exitItem</span><span class="o">);</span>

        <span class="c1">//为编辑菜单editMenu添加菜单项</span>
        <span class="n">editMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">autoWrap</span><span class="o">);</span>
        <span class="n">editMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">copyItem</span><span class="o">);</span>
        <span class="n">editMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">pasteItem</span><span class="o">);</span>

        <span class="c1">//为格式化菜单formatMenu添加菜单项</span>
        <span class="n">formatMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">commentItem</span><span class="o">);</span>
        <span class="n">formatMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cancelItem</span><span class="o">);</span>

        <span class="c1">//将格式化菜单添加到编辑菜单中，作为二级菜单</span>
        <span class="n">editMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"-"</span><span class="o">));</span>
        <span class="n">editMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">formatMenu</span><span class="o">);</span>


        <span class="c1">//将文件菜单和编辑菜单添加到菜单条中</span>
        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fileMenu</span><span class="o">);</span>
        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">editMenu</span><span class="o">);</span>


        <span class="c1">//把菜单条设置到frame窗口上</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setMenuBar</span><span class="o">(</span><span class="n">menuBar</span><span class="o">);</span>

        <span class="c1">//把文本域添加到frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ta</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SimpleMenu</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><strong>案例2：</strong></p>

<p>​	通过PopupMenu实现下图效果：</p>

<p>​	<img src="./images/菜单2.png" alt="" /></p>

<p><strong>实现思路：</strong></p>

<p>1.创建PopubMenu菜单组件；</p>

<p>2.创建多个MenuItem菜单项，并添加到PopupMenu中；</p>

<p>3.将PopupMenu添加到目标组件中；</p>

<p>4.为需要右击出现PopubMenu菜单的组件，注册鼠标监听事件，当监听到用户释放右键时，弹出菜单。</p>

<p><strong>演示代码2：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PopupMenuTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试PopupMenu"</span><span class="o">);</span>

    <span class="c1">//创建PopubMenu菜单</span>
    <span class="kd">private</span> <span class="nc">PopupMenu</span> <span class="n">popupMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PopupMenu</span><span class="o">();</span>

    <span class="c1">//创建菜单条</span>

    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">commentItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"注释"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">cancelItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"取消注释"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">copyItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"复制"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">pasteItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"保存"</span><span class="o">);</span>


    <span class="c1">//创建一个文本域</span>
    <span class="kd">private</span> <span class="nc">TextArea</span> <span class="n">ta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TextArea</span><span class="o">(</span><span class="s">"我爱中华！！！"</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">40</span><span class="o">);</span>

    <span class="c1">//创建一个Panel</span>
    <span class="kd">private</span>  <span class="nc">Panel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//把菜单项添加到PopupMenu中</span>
        <span class="n">popupMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">commentItem</span><span class="o">);</span>
        <span class="n">popupMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cancelItem</span><span class="o">);</span>
        <span class="n">popupMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">copyItem</span><span class="o">);</span>
        <span class="n">popupMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">pasteItem</span><span class="o">);</span>

        <span class="c1">//设置panel大小</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span><span class="mi">100</span><span class="o">));</span>

        <span class="c1">//把PopupMenu添加到panel中</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">popupMenu</span><span class="o">);</span>

        <span class="c1">//为panel注册鼠标事件</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">addMouseListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MouseAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseReleased</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">isPopupTrigger</span><span class="o">();</span>
                <span class="c1">//判断当前鼠标操作是不是触发PopupMenu的操作</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">flag</span><span class="o">){</span>
                    <span class="c1">//让PopupMenu显示在panel上，并且跟随鼠标事件发生的地方显示</span>
                    <span class="n">popupMenu</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">panel</span><span class="o">,</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span><span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">());</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//把ta添加到frame中间区域中</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ta</span><span class="o">);</span>

        <span class="c1">//把panel添加到frame底部</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">panel</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小，并可视；</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">PopupMenuTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="28-绘图">2.8 绘图</h2>

<p>​	很多程序如各种小游戏都需要在窗口中绘制各种图形，除此之外，即使在开发JavaEE项目时， 有 时候也必须”动态”地向客户 端生成各种图形、图表，比如 图形验证码、统计图等，这都需要利用AWT的绘图功能。</p>

<h3 id="281-组件绘图原理">2.8.1 组件绘图原理</h3>

<p>​	之前我们已经学习过很多组件，例如Button、Frame、Checkbox等等，不同的组件，展示出来的图形都不一样，其实这些组件展示出来的图形，其本质就是用AWT的绘图来完成的。</p>

<p>​	在AWT中，真正提供绘图功能的是Graphics对象，那么Component组件和Graphics对象存在什么关系，才能让Component绘制自身图形呢？在Component类中，提供了下列三个方法来完成组件图形的绘制与刷新：</p>

<p>​	paint(Graphics g):绘制组件的外观；</p>

<p>​	update(Graphics g):内部调用paint方法，刷新组件外观；</p>

<p>​	repaint():调用update方法，刷新组件外观；</p>

<p>​	<img src="./images/组件绘制图形流程.png" alt="" /></p>

<p>​	一般情况下，update和paint方法是由AWT系统负责调用，如果程序要希望系统重新绘制组件，可以调用repaint方法完成。</p>

<h3 id="282-graphics类的使用">2.8.2 Graphics类的使用</h3>

<p>​	实际生活中如果需要画图，首先我们得准备一张纸，然后在拿一支画笔，配和一些颜色，就可以在纸上画出来各种各样的图形，例如圆圈、矩形等等。</p>

<p>​	<img src="./images/画图示意.jpg" alt="" /></p>

<p>程序中绘图也一样，也需要画布，画笔，颜料等等。AWT中提供了Canvas类充当画布，提供了Graphics类来充当画笔，通过调用Graphics对象的setColor()方法可以给画笔设置颜色。</p>

<p><strong>画图的步骤：</strong></p>

<p>1.自定义类，继承Canvas类，重写paint(Graphics g)方法完成画图；</p>

<p>2.在paint方法内部，真正开始画图之前调用Graphics对象的setColor()、setFont()等方法设置画笔的颜色、字体等属性；</p>

<p>3.调用Graphics画笔的drawXxx()方法开始画图。</p>

<p>其实画图的核心就在于使用Graphics画笔在Canvas画布上画出什么颜色、什么样式的图形，所以核心在画笔上，下表中列出了Graphics类中常用的一些方法：</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>setColor(Color c)</td>
      <td>设置颜色</td>
    </tr>
    <tr>
      <td>setFont(Font font)</td>
      <td>设置字体</td>
    </tr>
    <tr>
      <td>drawLine()</td>
      <td>绘制直线</td>
    </tr>
    <tr>
      <td>drawRect()</td>
      <td>绘制矩形</td>
    </tr>
    <tr>
      <td>drawRoundRect()</td>
      <td>绘制圆角矩形</td>
    </tr>
    <tr>
      <td>drawOval()</td>
      <td>绘制椭圆形</td>
    </tr>
    <tr>
      <td>drawPolygon()</td>
      <td>绘制多边形</td>
    </tr>
    <tr>
      <td>drawArc()</td>
      <td>绘制圆弧</td>
    </tr>
    <tr>
      <td>drawPolyline()</td>
      <td>绘制折线</td>
    </tr>
    <tr>
      <td>fillRect()</td>
      <td>填充矩形区域</td>
    </tr>
    <tr>
      <td>fillRoundRect()</td>
      <td>填充圆角矩形区域</td>
    </tr>
    <tr>
      <td>fillOval()</td>
      <td>填充椭圆区域</td>
    </tr>
    <tr>
      <td>fillPolygon()</td>
      <td>填充多边形区域</td>
    </tr>
    <tr>
      <td>fillArc()</td>
      <td>填充圆弧对应的扇形区域</td>
    </tr>
    <tr>
      <td>drawImage()</td>
      <td>绘制位图</td>
    </tr>
  </tbody>
</table>

<p><strong>案例：</strong></p>

<p>​	使用AWT绘图API，完成下图效果</p>

<p>​	<img src="./images/画图演示1.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Random</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleDraw</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">RECT_SHAPE</span><span class="o">=</span><span class="s">"rect"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">OVAL_SHAPE</span><span class="o">=</span><span class="s">"oval"</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"这里测试绘图"</span><span class="o">);</span>

    <span class="kd">private</span> <span class="nc">Button</span> <span class="n">drawRectBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"绘制矩形"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Button</span> <span class="n">drawOvalBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"绘制椭圆"</span><span class="o">);</span>

    <span class="c1">//用来保存当前用户需要绘制什么样的图形</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">shape</span><span class="o">=</span><span class="s">""</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">MyCanvas</span> <span class="n">drawArea</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyCanvas</span><span class="o">();</span>




    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//为按钮添加点击事件</span>
        <span class="n">drawRectBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">shape</span> <span class="o">=</span> <span class="no">RECT_SHAPE</span><span class="o">;</span>
                <span class="n">drawArea</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">drawOvalBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">shape</span> <span class="o">=</span> <span class="no">OVAL_SHAPE</span><span class="o">;</span>
                <span class="n">drawArea</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//定义一个Panel，装载两个按钮</span>
        <span class="nc">Panel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">drawRectBtn</span><span class="o">);</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">drawOvalBtn</span><span class="o">);</span>

        <span class="c1">//把panel添加到frame底部</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
        
        <span class="c1">//设置画布的大小</span>
        <span class="n">drawArea</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span><span class="mi">200</span><span class="o">));</span>
        <span class="c1">//把画布添加到frame中</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">drawArea</span><span class="o">);</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SimpleDraw</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="c1">//1.自定义类，继承Canvas类，重写paint方法</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">MyCanvas</span> <span class="kd">extends</span> <span class="nc">Canvas</span><span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Random</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">();</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">shape</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">RECT_SHAPE</span><span class="o">)){</span>
                <span class="c1">//绘制矩形</span>
                <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">);</span>
                <span class="n">g</span><span class="o">.</span><span class="na">drawRect</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">200</span><span class="o">),</span><span class="n">r</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">),</span><span class="mi">40</span><span class="o">,</span><span class="mi">60</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="k">if</span><span class="o">(</span><span class="n">shape</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">OVAL_SHAPE</span><span class="o">)){</span>
                <span class="c1">//绘制椭圆</span>
                <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">);</span>
                <span class="n">g</span><span class="o">.</span><span class="na">drawOval</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">200</span><span class="o">),</span><span class="n">r</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">),</span><span class="mi">60</span><span class="o">,</span><span class="mi">40</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>​</p>

<p>​	Java也可用于开发一些动画。所谓动画，就是间隔一定的时间(通常小于0 . 1秒 )重新绘制新的图像，两次绘制的图像之间差异较小，肉眼看起来就成了所谓的动画 。</p>

<p>​	为了实现间隔一定的时间就重新调用组件的 repaint()方法，可以借助于 Swing 提供的Timer类，Timer类是一个定时器， 它有如下一个构造器 ：
Timer(int delay, ActionListener listener): 每间隔 delay 毫秒，系统自动触发 ActionListener 监听器里的事件处理器方法，在方法内部我们就可以调用组件的repaint方法，完成组件重绘。</p>

<p><strong>案例2：</strong></p>

<p>​	使用AWT画图技术及Timer定时器，完成下图中弹球小游戏。</p>

<p>​	<img src="./images/小球运行.png" alt="" /> <img src="./images/小球结束.png" alt="" /></p>

<p><strong>演示代码2：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PinBall</span> <span class="o">{</span>

    <span class="c1">//桌面宽度</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">TABLE_WIDTH</span> <span class="o">=</span> <span class="mi">300</span><span class="o">;</span>
    <span class="c1">//桌面高度</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">TABLE_HEIGHT</span> <span class="o">=</span> <span class="mi">400</span><span class="o">;</span>


    <span class="c1">//球拍的高度和宽度</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">RACKET_WIDTH</span> <span class="o">=</span> <span class="mi">60</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">RACKET_HEIGHT</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>

    <span class="c1">//小球的大小</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">BALL_SIZE</span> <span class="o">=</span> <span class="mi">16</span><span class="o">;</span>

    <span class="c1">//定义小球纵向运行速度</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">ySpeed</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
    <span class="c1">//小球横向运行速度</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">xSpeed</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>

    <span class="c1">//定义小球的初始坐标</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">ballX</span> <span class="o">=</span> <span class="mi">120</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">ballY</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>

    <span class="c1">//定义球拍的初始坐标，x坐标会发生变化，y坐标不会发生变化</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">rackeX</span> <span class="o">=</span> <span class="mi">120</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">RACKET_Y</span> <span class="o">=</span> <span class="mi">340</span><span class="o">;</span>

    <span class="c1">//声明定时器</span>
    <span class="kd">private</span> <span class="nc">Timer</span> <span class="n">timer</span><span class="o">;</span>

    <span class="c1">//定义游戏结束的标记</span>
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">isLose</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="c1">//声明一个桌面</span>
    <span class="kd">private</span> <span class="nc">MyCanvas</span> <span class="n">tableArea</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyCanvas</span><span class="o">();</span>

    <span class="c1">//创建窗口对象</span>
    <span class="kd">private</span> <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"弹球游戏"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//设置桌面区域的最佳大小</span>
        <span class="n">tableArea</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="no">TABLE_WIDTH</span><span class="o">,</span><span class="no">TABLE_HEIGHT</span><span class="o">));</span>
        <span class="c1">//把桌面添加到frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tableArea</span><span class="o">);</span>

        <span class="c1">//定义键盘监听器</span>
        <span class="nc">KeyListener</span> <span class="n">keyListener</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">KeyAdapter</span><span class="o">(){</span>

            <span class="c1">//监听键盘 ←  → 按下操作，当指定的键按下时，球拍的水平坐标分别会增加或者减少</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">keyPressed</span><span class="o">(</span><span class="nc">KeyEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">keyCode</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getKeyCode</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">keyCode</span><span class="o">==</span><span class="nc">KeyEvent</span><span class="o">.</span><span class="na">VK_LEFT</span><span class="o">){</span><span class="c1">//←</span>
                    <span class="c1">//没有到左边界，可以继续向左移动</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">rackeX</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">){</span>
                        <span class="n">rackeX</span><span class="o">-=</span><span class="mi">10</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">keyCode</span><span class="o">==</span><span class="nc">KeyEvent</span><span class="o">.</span><span class="na">VK_RIGHT</span><span class="o">){</span><span class="c1">//→</span>
                    <span class="c1">//没有到右边界，可以继续向右移动</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">rackeX</span><span class="o">&lt;</span><span class="no">TABLE_WIDTH</span><span class="o">-</span><span class="no">RACKET_WIDTH</span><span class="o">){</span>
                        <span class="n">rackeX</span><span class="o">+=</span><span class="mi">10</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">//为窗口和tableArea分别添加键盘事件</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">addKeyListener</span><span class="o">(</span><span class="n">keyListener</span><span class="o">);</span>
        <span class="n">tableArea</span><span class="o">.</span><span class="na">addKeyListener</span><span class="o">(</span><span class="n">keyListener</span><span class="o">);</span>

        <span class="c1">//定义ActionListener，用来监听小球的变化情况</span>
        <span class="nc">ActionListener</span> <span class="n">timerTask</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//小球碰到左右边框</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">ballX</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="o">||</span> <span class="n">ballX</span><span class="o">&gt;=</span><span class="no">TABLE_WIDTH</span><span class="o">-</span><span class="no">BALL_SIZE</span><span class="o">){</span>
                    <span class="n">xSpeed</span><span class="o">=-</span><span class="n">xSpeed</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="c1">//小球的高度超出了球拍的位置，且横向不在球拍范围内，则游戏结束</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">ballY</span> <span class="o">&gt;</span> <span class="no">RACKET_Y</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">ballX</span><span class="o">&lt;</span><span class="n">rackeX</span> <span class="o">||</span> <span class="n">ballX</span><span class="o">&gt;</span><span class="n">rackeX</span><span class="o">+</span><span class="no">RACKET_WIDTH</span><span class="o">)){</span>
                    <span class="c1">//结束定时器</span>
                    <span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
                    <span class="c1">//把游戏结束的标记设置为true</span>
                    <span class="n">isLose</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="c1">//重绘界面</span>
                    <span class="n">tableArea</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>

                <span class="o">}</span>
                <span class="c1">//如果小球横向在球拍范围内，且到达球拍位置或者到达顶端位置，则小球反弹</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">ballY</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="o">||</span> <span class="o">(</span><span class="n">ballY</span><span class="o">&gt;=</span><span class="no">RACKET_Y</span><span class="o">-</span><span class="no">BALL_SIZE</span> <span class="o">&amp;&amp;</span> <span class="n">ballX</span><span class="o">&gt;=</span><span class="n">rackeX</span> <span class="o">&amp;&amp;</span> <span class="n">ballX</span><span class="o">&lt;=</span><span class="n">rackeX</span><span class="o">+</span><span class="no">RACKET_WIDTH</span><span class="o">)){</span>
                    <span class="n">ySpeed</span><span class="o">=-</span><span class="n">ySpeed</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="c1">//更新小球的坐标</span>
                <span class="n">ballX</span><span class="o">+=</span><span class="n">xSpeed</span><span class="o">;</span>
                <span class="n">ballY</span><span class="o">+=</span><span class="n">ySpeed</span><span class="o">;</span>

                <span class="c1">//重绘桌面</span>
                <span class="n">tableArea</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">//设置定时器，定时任务就是timerTask</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Timer</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="n">timerTask</span><span class="o">);</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

        <span class="c1">//设置frame最佳大小，并可视</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">PinBall</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">MyCanvas</span> <span class="kd">extends</span> <span class="nc">Canvas</span><span class="o">{</span>

        <span class="c1">//重写paint方法，实现绘图</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//判断游戏是否结束</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">isLose</span><span class="o">){</span><span class="c1">//结束</span>
                <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">BLUE</span><span class="o">);</span>
                <span class="n">g</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="k">new</span> <span class="nc">Font</span><span class="o">(</span><span class="s">"Times"</span><span class="o">,</span><span class="nc">Font</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span><span class="mi">30</span><span class="o">));</span>
                <span class="n">g</span><span class="o">.</span><span class="na">drawString</span><span class="o">(</span><span class="s">"游戏结束！"</span><span class="o">,</span><span class="mi">50</span><span class="o">,</span><span class="mi">200</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span><span class="c1">//没有结束</span>

                <span class="c1">//设置颜色并绘制小球</span>
                <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">);</span>
                <span class="n">g</span><span class="o">.</span><span class="na">fillOval</span><span class="o">(</span><span class="n">ballX</span><span class="o">,</span><span class="n">ballY</span><span class="o">,</span><span class="no">BALL_SIZE</span><span class="o">,</span><span class="no">BALL_SIZE</span><span class="o">);</span>

                <span class="c1">//设置颜色并绘制球拍</span>
                <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">PINK</span><span class="o">);</span>
                <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="n">rackeX</span><span class="o">,</span><span class="no">RACKET_Y</span><span class="o">,</span><span class="no">RACKET_WIDTH</span><span class="o">,</span><span class="no">RACKET_HEIGHT</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="283-处理位图">2.8.3 处理位图</h3>

<p>​	如果仅仅绘制一些简单的几何图形，程序的图形效果依然比较单调 。 AWT 也允许在组件上绘制位图， Graphics 提供了 drawlmage() 方法用于绘制位图，该方法需要一个Image参数一一代表位图，通过该方法就可 以绘制出指定的位图 。</p>

<p><strong>位图使用步骤：</strong></p>

<p>1.创建Image的子类对象BufferedImage(int width,int height,int ImageType),创建时需要指定位图的宽高及类型属性；此时相当于在内存中生成了一张图片；</p>

<p>2.调用BufferedImage对象的getGraphics()方法获取画笔，此时就可以往内存中的这张图片上绘图了，绘图的方法和之前学习的一模一样；</p>

<p>3.调用组件的drawImage()方法，一次性的内存中的图片BufferedImage绘制到特定的组件上。</p>

<p><strong>使用位图绘制组件的好处：</strong></p>

<p>使用位图来绘制组件，相当于实现了图的缓冲区，此时绘图时没有直接把图形绘制到组件上，而是先绘制到内存中的BufferedImage上，等全部绘制完毕，再一次性的图像显示到组件上即可，这样用户的体验会好一些。</p>

<p><strong>案例：</strong></p>

<p>​	通过BufferedImage实现一个简单的手绘程序：通过鼠标可以在窗口中画图。</p>

<p>​	<img src="./images/手绘程序2.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HandDraw</span> <span class="o">{</span>

    <span class="c1">//定义画图区的宽高</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">AREA_WIDTH</span> <span class="o">=</span> <span class="mi">500</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">AREA_HEIGHT</span> <span class="o">=</span> <span class="mi">400</span><span class="o">;</span>

    <span class="c1">//定义变量，保存上一次鼠标拖动时，鼠标的坐标</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">preX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">preY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>

    <span class="c1">//定义一个右键菜单，用于设置画笔的颜色</span>
    <span class="kd">private</span> <span class="nc">PopupMenu</span> <span class="n">colorMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PopupMenu</span><span class="o">();</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">redItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"红色"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">greenItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"绿色"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">MenuItem</span> <span class="n">blueItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"蓝色"</span><span class="o">);</span>

    <span class="c1">//定义一个BufferedImage对象</span>
    <span class="kd">private</span> <span class="nc">BufferedImage</span> <span class="n">image</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedImage</span><span class="o">(</span><span class="no">AREA_WIDTH</span><span class="o">,</span><span class="no">AREA_HEIGHT</span><span class="o">,</span><span class="nc">BufferedImage</span><span class="o">.</span><span class="na">TYPE_INT_RGB</span><span class="o">);</span>
    <span class="c1">//获取BufferedImage对象关联的画笔</span>
    <span class="kd">private</span> <span class="nc">Graphics</span> <span class="n">g</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="na">getGraphics</span><span class="o">();</span>

    <span class="c1">//定义窗口对象</span>
    <span class="kd">private</span> <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"简单手绘程序"</span><span class="o">);</span>

    <span class="c1">//定义画布对象</span>
    <span class="kd">private</span> <span class="nc">Canvas</span> <span class="n">drawArea</span> <span class="o">=</span>  <span class="k">new</span> <span class="nc">Canvas</span><span class="o">(){</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//把位图image绘制到0,0坐标点</span>
            <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">image</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="c1">//定义一个Color对象，用来保存用户设置的画笔颜色,默认为黑色</span>
    <span class="kd">private</span> <span class="nc">Color</span> <span class="n">forceColor</span> <span class="o">=</span> <span class="nc">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//定义颜色菜单项单击监听器</span>
        <span class="nc">ActionListener</span> <span class="n">menuListener</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">command</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getActionCommand</span><span class="o">();</span>
                <span class="k">switch</span> <span class="o">(</span><span class="n">command</span><span class="o">){</span>
                    <span class="k">case</span> <span class="s">"红色"</span><span class="o">:</span>
                        <span class="n">forceColor</span><span class="o">=</span><span class="nc">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="k">case</span> <span class="s">"绿色"</span><span class="o">:</span>
                        <span class="n">forceColor</span> <span class="o">=</span> <span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                    <span class="k">case</span> <span class="s">"蓝色"</span><span class="o">:</span>
                        <span class="n">forceColor</span> <span class="o">=</span> <span class="nc">Color</span><span class="o">.</span><span class="na">BLUE</span><span class="o">;</span>
                        <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">//为三个菜单项添加点击事件</span>
        <span class="n">redItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">menuListener</span><span class="o">);</span>
        <span class="n">greenItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">menuListener</span><span class="o">);</span>
        <span class="n">blueItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">menuListener</span><span class="o">);</span>

        <span class="c1">//把菜单项添加到右键菜单中</span>
        <span class="n">colorMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">redItem</span><span class="o">);</span>
        <span class="n">colorMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">greenItem</span><span class="o">);</span>
        <span class="n">colorMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">blueItem</span><span class="o">);</span>

        <span class="c1">//把右键菜单添加到绘图区域drawArea</span>
        <span class="n">drawArea</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">colorMenu</span><span class="o">);</span>

        <span class="c1">//将iamge图片背景设置为白色</span>
        <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="no">AREA_WIDTH</span><span class="o">,</span><span class="no">AREA_HEIGHT</span><span class="o">);</span>

        <span class="c1">//设置绘图区域drawArea的大小</span>
        <span class="n">drawArea</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="no">AREA_WIDTH</span><span class="o">,</span><span class="no">AREA_HEIGHT</span><span class="o">));</span>

        <span class="c1">//绘图区域drawArea设置鼠标移动监听器</span>
        <span class="n">drawArea</span><span class="o">.</span><span class="na">addMouseMotionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MouseMotionAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//用于绘制图像</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseDragged</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span><span class="c1">//按下鼠标键并拖动会触发</span>
                <span class="c1">//如果上次鼠标的坐标在绘图区域，才开始绘图</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">preX</span><span class="o">&gt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">preY</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">){</span>
                    <span class="c1">//设置当前选中的画笔颜色</span>
                    <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">forceColor</span><span class="o">);</span>
                    <span class="c1">//绘制线条，需要有两组坐标，一组是上一次鼠标拖动鼠标时的坐标，一组是现在鼠标的坐标</span>
                    <span class="n">g</span><span class="o">.</span><span class="na">drawLine</span><span class="o">(</span><span class="n">preX</span><span class="o">,</span><span class="n">preY</span><span class="o">,</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span><span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">());</span>
                <span class="o">}</span>

                <span class="c1">//更新preX和preY</span>
                <span class="n">preX</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span>
                <span class="n">preY</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">();</span>

                <span class="c1">//重新绘制drawArea组件</span>
                <span class="n">drawArea</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>

            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">drawArea</span><span class="o">.</span><span class="na">addMouseListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MouseAdapter</span><span class="o">()</span> <span class="o">{</span>

            <span class="c1">//用于弹出右键菜单</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseReleased</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span><span class="c1">//松开鼠标键会触发</span>
                <span class="kt">boolean</span> <span class="n">popupTrigger</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">isPopupTrigger</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">popupTrigger</span><span class="o">){</span>
                    <span class="c1">//把colorMenu显示到drawArea画图区域，并跟随鼠标显示</span>
                    <span class="n">colorMenu</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="n">drawArea</span><span class="o">,</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span><span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">());</span>
                <span class="o">}</span>

                <span class="c1">//当鼠标松开时，把preX和preY重置为-1</span>
                <span class="n">preX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
                <span class="n">preY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>

            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//把drawArea添加到frame中</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">drawArea</span><span class="o">);</span>

        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">HandDraw</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="284--imageio的使用">2.8.4  ImageIO的使用</h3>

<p>在实际生活中，很多软件都支持打开本地磁盘已经存在的图片，然后进行编辑，编辑完毕后，再重新保存到本地磁盘。如果使用AWT要完成这样的功能，那么需要使用到ImageIO这个类，可以操作本地磁盘的图片文件。</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>static BufferedImage read(File input)</td>
      <td>读取本地磁盘图片文件</td>
    </tr>
    <tr>
      <td>static BufferedImage read(InputStream input)</td>
      <td>读取本地磁盘图片文件</td>
    </tr>
    <tr>
      <td>static boolean write(RenderedImage im, String formatName, File output)</td>
      <td>往本地磁盘中输出图片文件</td>
    </tr>
  </tbody>
</table>

<p><strong>案例：</strong></p>

<p>​	编写图片查看程序,支持另存操作</p>

<p>​	<img src="./images/ImageIODemo.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.imageio.ImageIO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReadAndSaveImage</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">Frame</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Frame</span><span class="o">(</span><span class="s">"图片查看器"</span><span class="o">);</span>

    <span class="kd">private</span> <span class="nc">BufferedImage</span> <span class="n">image</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">MyCanvas</span>  <span class="kd">extends</span> <span class="nc">Canvas</span><span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">image</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">image</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">image</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span><span class="n">image</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span><span class="kc">null</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">MyCanvas</span> <span class="n">imageComponent</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyCanvas</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>

        <span class="c1">//设置菜单项</span>
        <span class="nc">MenuBar</span> <span class="n">mb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuBar</span><span class="o">();</span>
        <span class="nc">Menu</span> <span class="n">menu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Menu</span><span class="o">(</span><span class="s">"文件"</span><span class="o">);</span>
        <span class="nc">MenuItem</span> <span class="n">openItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"打开"</span><span class="o">);</span>
        <span class="nc">MenuItem</span> <span class="n">saveItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MenuItem</span><span class="o">(</span><span class="s">"另存为"</span><span class="o">);</span>

        <span class="n">openItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//弹出对话框，选择本地图片</span>
            <span class="nc">FileDialog</span> <span class="n">oDialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileDialog</span><span class="o">(</span><span class="n">frame</span><span class="o">);</span>
            <span class="n">oDialog</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="c1">//读取用户选择的图片</span>
            <span class="nc">String</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">oDialog</span><span class="o">.</span><span class="na">getDirectory</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">file</span> <span class="o">=</span> <span class="n">oDialog</span><span class="o">.</span><span class="na">getFile</span><span class="o">();</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">image</span> <span class="o">=</span> <span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">dir</span><span class="o">,</span><span class="n">file</span><span class="o">));</span>

                <span class="n">imageComponent</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>

            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>

        <span class="o">});</span>


        <span class="n">saveItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//弹出对话框，另存为</span>
            <span class="nc">FileDialog</span> <span class="n">sDialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileDialog</span><span class="o">(</span><span class="n">frame</span><span class="o">,</span><span class="s">"保存图片"</span><span class="o">,</span><span class="nc">FileDialog</span><span class="o">.</span><span class="na">SAVE</span><span class="o">);</span>
            <span class="n">sDialog</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">sDialog</span><span class="o">.</span><span class="na">getDirectory</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">file</span> <span class="o">=</span> <span class="n">sDialog</span><span class="o">.</span><span class="na">getFile</span><span class="o">();</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span><span class="s">"JPEG"</span><span class="o">,</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">dir</span><span class="o">,</span><span class="n">file</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">mb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
        <span class="n">menu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">openItem</span><span class="o">);</span>
        <span class="n">menu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">saveItem</span><span class="o">);</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">setMenuBar</span><span class="o">(</span><span class="n">mb</span><span class="o">);</span>
        <span class="n">frame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">imageComponent</span><span class="o">);</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">200</span><span class="o">,</span><span class="mi">200</span><span class="o">,</span><span class="mi">800</span><span class="o">,</span><span class="mi">600</span><span class="o">);</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="n">frame</span><span class="o">.</span><span class="na">addWindowListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">WindowAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">windowClosing</span><span class="o">(</span><span class="nc">WindowEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>



    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ReadAndSaveImage</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="285-五子棋">2.8.5 五子棋</h3>

<p>接下来，我们使用之前学习的绘图技术，做一个五子棋的游戏。</p>

<p>​	<img src="./images/五子棋.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.imageio.ImageIO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Gobang</span> <span class="o">{</span>

    <span class="c1">//定义三个BufferedImage，分别代表棋盘图、黑子图、白子图</span>
    <span class="kd">private</span> <span class="nc">BufferedImage</span> <span class="n">table</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">BufferedImage</span> <span class="n">black</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">BufferedImage</span> <span class="n">white</span><span class="o">;</span>

    <span class="c1">//定义一个BufferedImage，代表当鼠标移动时将要下子的选择框</span>
    <span class="kd">private</span> <span class="nc">BufferedImage</span> <span class="n">selected</span><span class="o">;</span>

    <span class="c1">//定义棋盘的宽高，这里的定义尺寸和给定的board.jpg图片的尺寸一致因为棋盘背景是通过图片加载的</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">TABLE_WIDTH</span> <span class="o">=</span> <span class="mi">535</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">TABLE_HEIGHT</span> <span class="o">=</span> <span class="mi">536</span><span class="o">;</span>

    <span class="c1">//定义棋盘中，每行和每列可下子的数目，这个数目跟给定的board.jpg中的数目是一致的，都为15</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span>  <span class="no">BOARD_SIZE</span> <span class="o">=</span> <span class="mi">15</span><span class="o">;</span>

    <span class="c1">//定义每个棋子所占棋盘总宽度的大小比率；每个棋子所占宽度 535/15=35</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">RATE</span> <span class="o">=</span> <span class="no">TABLE_WIDTH</span><span class="o">/</span><span class="no">BOARD_SIZE</span><span class="o">;</span>

    <span class="c1">//定义棋盘有效区域与背景图坐标之间的偏移值，x坐标右移5个像素，y坐标下移6个像素</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">X_OFFSET</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">Y_OFFSET</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span>


    <span class="cm">/*

        定义一个二维数组充当棋盘上每个位置处的棋子；
        该数组的索引与该棋子在棋盘上的坐标需要有一个对应关系：
            例如： 索引[2][3]处的棋子，对一个的真实绘制坐标应该是：

                xpos = 2*RATE+X_OFFSET=75;
                ypos = 3*RATE+Y_OFFSET=111;

     */</span>
    <span class="kd">private</span> <span class="kt">int</span><span class="o">[][]</span> <span class="n">board</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="no">BOARD_SIZE</span><span class="o">][</span><span class="no">BOARD_SIZE</span><span class="o">];</span><span class="c1">//如果存储0，代表没有棋子，如果存储1，代表黑棋，如果存储2，代表白棋</span>

    <span class="c1">//定义五子棋游戏窗口</span>
    <span class="kd">private</span> <span class="nc">JFrame</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"五子棋游戏"</span><span class="o">);</span>

    <span class="c1">//定义五子棋游戏棋盘对应的Canvas组件</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">ChessBoard</span> <span class="kd">extends</span> <span class="nc">JPanel</span><span class="o">{</span>
        <span class="c1">//重写paint方法，实现绘画</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//绘制五子棋棋盘</span>
            <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">table</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
            <span class="c1">//绘制选中点的红框</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">selectX</span><span class="o">&gt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">selectY</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">){</span>
                <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">selected</span><span class="o">,</span><span class="n">selectX</span><span class="o">*</span><span class="no">RATE</span><span class="o">+</span><span class="no">X_OFFSET</span><span class="o">,</span><span class="n">selectY</span><span class="o">*</span><span class="no">RATE</span><span class="o">+</span><span class="no">Y_OFFSET</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">//遍历数组，绘制棋子</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">BOARD_SIZE</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="no">BOARD_SIZE</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="c1">//绘制黑棋</span>

                    <span class="k">if</span> <span class="o">(</span><span class="n">board</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]==</span><span class="mi">1</span><span class="o">){</span>
                        <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">black</span><span class="o">,</span><span class="n">i</span><span class="o">*</span><span class="no">RATE</span><span class="o">+</span><span class="no">X_OFFSET</span><span class="o">,</span><span class="n">j</span><span class="o">*</span><span class="no">RATE</span><span class="o">+</span><span class="no">Y_OFFSET</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
                    <span class="o">}</span>

                    <span class="c1">//绘制白棋</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">board</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]==</span><span class="mi">2</span><span class="o">){</span>
                        <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">white</span><span class="o">,</span><span class="n">i</span><span class="o">*</span><span class="no">RATE</span><span class="o">+</span><span class="no">X_OFFSET</span><span class="o">,</span><span class="n">j</span><span class="o">*</span><span class="no">RATE</span><span class="o">+</span><span class="no">Y_OFFSET</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">ChessBoard</span> <span class="n">chessBoard</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ChessBoard</span><span class="o">();</span>

    <span class="c1">//定义变量，记录当前选中的坐标点对应的boad数组中对应的棋子索引；</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">selectX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">selectY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>

    <span class="c1">//定义一个变量，记录当前用户选择下的是白棋还是黑棋还是清除，清除：0，黑棋：1，白棋：2；</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">chessCategory</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

    <span class="c1">//定义Panel,放置点击按钮</span>
    <span class="nc">Panel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Panel</span><span class="o">();</span>
    <span class="kd">private</span> <span class="nc">Button</span> <span class="n">whiteBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"白棋"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Button</span> <span class="n">blackBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"黑棋"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="nc">Button</span> <span class="n">clearBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="s">"删除"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">updateBtnColor</span><span class="o">(</span><span class="nc">Color</span> <span class="n">whiteBtnColor</span><span class="o">,</span><span class="nc">Color</span> <span class="n">blackBtnColor</span><span class="o">,</span><span class="nc">Color</span> <span class="n">clearBtnColor</span><span class="o">){</span>
        <span class="n">whiteBtn</span><span class="o">.</span><span class="na">setBackground</span><span class="o">(</span><span class="n">whiteBtnColor</span><span class="o">);</span>
        <span class="n">blackBtn</span><span class="o">.</span><span class="na">setBackground</span><span class="o">(</span><span class="n">blackBtnColor</span><span class="o">);</span>
        <span class="n">clearBtn</span><span class="o">.</span><span class="na">setBackground</span><span class="o">(</span><span class="n">clearBtnColor</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>

        <span class="c1">//初始化按钮的颜色</span>
        <span class="n">updateBtnColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">);</span>
        <span class="n">whiteBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">chessCategory</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
                <span class="n">updateBtnColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">blackBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">chessCategory</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
                <span class="n">updateBtnColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">clearBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">chessCategory</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
                <span class="n">updateBtnColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">LIGHT_GRAY</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">whiteBtn</span><span class="o">);</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">blackBtn</span><span class="o">);</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">clearBtn</span><span class="o">);</span>
        <span class="c1">//把Panel放入到frame底部</span>
        <span class="n">f</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>



        <span class="c1">//初始化黑棋，白棋，棋盘,选中框</span>
        <span class="n">table</span> <span class="o">=</span> <span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"awt_demo\\board.jpg"</span><span class="o">));</span>
        <span class="n">black</span> <span class="o">=</span> <span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"awt_demo\\black.gif"</span><span class="o">));</span>
        <span class="n">white</span> <span class="o">=</span> <span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"awt_demo\\white.gif"</span><span class="o">));</span>
        <span class="n">selected</span> <span class="o">=</span> <span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"awt_demo\\selected.gif"</span><span class="o">));</span>
        <span class="c1">//初始化board数组，默认情况下，所有位置处都没有棋子</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">BOARD_SIZE</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="no">BOARD_SIZE</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">board</span><span class="o">[</span><span class="n">i</span><span class="o">][</span><span class="n">j</span><span class="o">]=</span><span class="mi">0</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">//设置chessBoard的最佳大小</span>
        <span class="n">chessBoard</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="no">TABLE_WIDTH</span><span class="o">,</span><span class="no">TABLE_HEIGHT</span><span class="o">));</span>

        <span class="c1">//给chessBoard注册鼠标监听器</span>
        <span class="n">chessBoard</span><span class="o">.</span><span class="na">addMouseListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MouseAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//鼠标单击会触发</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseClicked</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//将用户鼠标的坐标，转换成棋子的坐标</span>
                <span class="kt">int</span> <span class="n">xPos</span> <span class="o">=</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">()-</span><span class="no">X_OFFSET</span><span class="o">)/</span><span class="no">RATE</span><span class="o">;</span>
                <span class="kt">int</span> <span class="n">yPos</span> <span class="o">=</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">()-</span><span class="no">Y_OFFSET</span><span class="o">)/</span><span class="no">RATE</span><span class="o">;</span>

                <span class="n">board</span><span class="o">[</span><span class="n">xPos</span><span class="o">][</span><span class="n">yPos</span><span class="o">]</span> <span class="o">=</span> <span class="n">chessCategory</span><span class="o">;</span>

                <span class="c1">//重绘chessBoard</span>
                <span class="n">chessBoard</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span>

            <span class="c1">//当鼠标退出棋盘区域后，复位选中坐标,重绘chessBoard，要保证红色选中框显示正确</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseExited</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">selectX</span><span class="o">=-</span><span class="mi">1</span><span class="o">;</span>
                <span class="n">selectY</span><span class="o">=-</span><span class="mi">1</span><span class="o">;</span>
                <span class="n">chessBoard</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//给chessBoard注册鼠标移动监听器</span>
        <span class="n">chessBoard</span><span class="o">.</span><span class="na">addMouseMotionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MouseMotionAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//当鼠标移动时，修正selectX和selectY，重绘chessBoard，要保证红色选中框显示正确</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseMoved</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//将鼠标的坐标，转换成棋子的索引</span>
                <span class="n">selectX</span> <span class="o">=</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">()-</span><span class="no">X_OFFSET</span><span class="o">)/</span><span class="no">RATE</span><span class="o">;</span>
                <span class="n">selectY</span> <span class="o">=</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">()-</span><span class="no">Y_OFFSET</span><span class="o">)/</span><span class="no">RATE</span><span class="o">;</span>
                <span class="n">chessBoard</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//把chessBoard添加到Frame中</span>
        <span class="n">f</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">chessBoard</span><span class="o">);</span>



        <span class="c1">//设置frame最佳大小并可见</span>
        <span class="n">f</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">f</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
        <span class="k">new</span> <span class="nf">Gobang</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h1 id="三-swing-编程">三. Swing 编程</h1>

<h2 id="31-swing概述">3.1 Swing概述</h2>

<p>​	前一章己经介绍过AWT和Swing 的关系 ， 因此不难知道 : 实际使用 Java 开发图形界面程序时 ，很少使用 AWT 组件，绝大部分时候都是用 Swing 组件开发的 。 Swing是由100%纯 Java实现的，不再依赖于本地平台的 GUI， 因此可以在所有平台上都保持相同的界面外观。独立于本地平台的Swing组件被称为<strong>轻量级组件</strong>;而依赖于本地平台的 AWT 组件被称为<strong>重量级组件</strong>。
	由于 Swing 的所有组件完全采用 Java 实现，不再调用本地平台的 GUI，所以导致 Swing 图形界面的显示速度要比 AWT 图形界面的显示速度慢一些，但相对于快速发展的硬件设施而言，这种微小的速度差别无妨大碍。</p>

<p><strong>使用Swing的优势:</strong>
	1. Swing 组件不再依赖于本地平台的 GUI，无须采用各种平台的 GUI 交集 ，因此 Swing 提供了大量图形界面组件 ， 远远超出了 AWT 所提供的图形界面组件集。
	2. Swing 组件不再依赖于本地平台 GUI ，因此不会产生与平台 相关的 bug 。</p>

<p>​	3. Swing 组件在各种平台上运行时可以保证具有相同的图形界面外观。</p>

<p>​	Swing 提供的这些优势，让 Java 图形界面程序真正实现了 “ Write Once, Run Anywhere” 的 目标。</p>

<p><strong>Swing的特征：</strong>
 	1. Swing 组件采用 MVC(Model-View-Controller， 即模型一视图一控制器)设计模式：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		模型(Model): 用于维护组件的各种状态；

	视图(View): 是组件的可视化表现；
	
	控制器(Controller):用于控制对于各种事件、组件做出响应 。
	
	当模型发生改变时，它会通知所有依赖它的视图，视图会根据模型数据来更新自己。Swing使用UI代理来包装视图和控制器， 还有一个模型对象来维护该组件的状态。例如，按钮JButton有一个维护其状态信息的模型ButtonModel对象 。 Swing组件的模型是自动设置的，因此一般都使用JButton，而无须关心ButtonModel对象。

2. Swing在不同的平台上表现一致，并且有能力提供本地平台不支持的显示外观 。由于 Swing采用 MVC 模式来维护各组件，所以 当组件的外观被改变时，对组件的状态信息(由模型维护)没有任何影响 。因 此，Swing可以使用插拔式外观感觉 (Pluggable Look And Feel, PLAF)来控制组件外观，使得 Swing图形界面在同一个平台上运行时能拥有不同的外观，用户可以选择自己喜欢的外观 。相比之下，在 AWT 图形界面中，由于控制组件外观的对等类与具体平台相关 ，因此 AWT 组件总是具有与本地平台相同的外观 。    
</code></pre></div></div>

<h2 id="32-swing基本组件的用法">3.2 Swing基本组件的用法</h2>

<h3 id="321-swing组件层次">3.2.1 Swing组件层次</h3>

<p><strong>Swing组件继承体系图：</strong></p>

<p><img src="./images/Swing组件继承体系.png" alt="" /></p>

<p>​	大部分Swing 组件都是 JComponent抽象类的直接或间接子类(并不是全部的 Swing 组件)，JComponent 类定义了所有子类组件的通用方法 ，JComponent 类是 AWT 里 java.awt. Container 类的子类 ，这也是 AWT 和 Swing 的联系之一。 绝大部分 Swing 组件类继承了 Container类，所以Swing 组件都可作为 容器使用 ( JFrame继承了Frame 类)。</p>

<p><strong>Swing组件和AWT组件的对应关系：</strong></p>

<p>​	大部分情况下，只需要在AWT组件的名称前面加个J，就可以得到其对应的Swing组件名称，但有几个例外：</p>

<p>​		1. JComboBox: 对应于 AWT 里的 Choice 组件，但比 Choice 组件功能更丰富 。
		2. JFileChooser: 对应于 AWT 里的 FileDialog 组件 。
		3. JScrollBar: 对应于 AWT 里的 Scrollbar 组件，注意两个组件类名中 b 字母的大小写差别。
		4. JCheckBox : 对应于 AWT 里的 Checkbox 组件， 注意两个组件类名中 b 字母的大小 写差别 。
		5. JCheckBoxMenultem: 对应于 AWT 里的 CheckboxMenuItem 组件，注意两个组件类名中 b字母的大小写差别。</p>

<p><strong>Swing组件按照功能来分类：</strong></p>

<p>​	1. 顶层容器: JFrame、JApplet、JDialog 和 JWindow 。
	2. 中间容器: JPanel 、 JScrollPane 、 JSplitPane 、 JToolBar 等 。
	3. 特殊容器:在用户界面上具有特殊作用的中间容器，如 JIntemalFrame 、 JRootPane 、 JLayeredPane和 JDestopPane 等 。
	4. 基本组件 : 实现人机交互的组件，如 JButton、 JComboBox 、 JList、 JMenu、 JSlider 等 。
	5. 不可编辑信息的显示组件:向用户显示不可编辑信息的组件，如JLabel 、 JProgressBar 和 JToolTip等。
	6. 可编辑信息的显示组件:向用户显示能被编辑的格式化信息的组件，如 JTable 、 JTextArea 和JTextField 等 。
	7. 特殊对话框组件:可以直接产生特殊对话框的组件 ， 如 JColorChooser 和 JFileChooser 等。</p>

<h3 id="322-awt组件的swing实现">3.2.2 AWT组件的Swing实现</h3>

<p>​	Swing 为除 Canvas 之外的所有 AWT 组件提供了相应的实现，Swing 组件比 AWT 组件的功能更加强大。相对于 AWT 组件， Swing 组件具有如下 4 个额外的功能 :</p>

<ol>
  <li>
    <p>可以为 Swing 组件设置提示信息。使用 setToolTipText()方法，为组件设置对用户有帮助的提示信息 。</p>
  </li>
  <li>
    <p>很多 Swing 组件如按钮、标签、菜单项等，除使用文字外，还可以使用图标修饰自己。为了允许在 Swing 组件中使用图标， Swing为Icon 接口提供了 一个实现类: Imagelcon ，该实现类代表一个图像图标。</p>
  </li>
  <li>支持插拔式的外观风格。每个 JComponent 对象都有一个相应的 ComponentUI 对象，为它完成所有的绘画、事件处理、决定尺寸大小等工作。 ComponentUI 对象依赖当前使用的 PLAF ， 使用 UIManager.setLookAndFeel()方法可以改变图形界面的外观风格 。</li>
  <li>支持设置边框。Swing 组件可以设置一个或多个边框。 Swing 中提供了各式各样的边框供用户边 用，也能建立组合边框或自己设计边框。 一种空白边框可以用于增大组件，同时协助布局管理器对容器中的组件进行合理的布局。</li>
</ol>

<p>​	每个 Swing 组件都有一个对应的UI 类，例如 JButton组件就有一个对应的 ButtonUI 类来作为UI代理 。每个 Swing组件的UI代理的类名总是将该 Swing 组件类名的 J 去掉，然后在后面添加 UI 后缀 。 UI代理类通常是一个抽象基类 ， 不同的 PLAF 会有不同的UI代理实现类 。 Swing 类库中包含了几套UI代理,分别放在不同的包下， 每套UI代理都几乎包含了所有 Swing组件的 ComponentUI实现，每套这样的实现都被称为一种PLAF 实现 。以 JButton 为例，其 UI 代理的继承层次下图：</p>

<p>​	  <img src="./images/ComponentUI.png" alt="" /></p>

<p>​	如果需要改变程序的外观风格， 则可以使用如下代码：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//容器：</span>
<span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>

    <span class="c1">//设置外观风格</span>
    <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"com.sun.java.swing.plaf.windows.WindowsLookAndFeel"</span><span class="o">);</span>

    <span class="c1">//刷新jf容器及其内部组件的外观</span>
    <span class="nc">SwingUtilities</span><span class="o">.</span><span class="na">updateComponentTreeUI</span><span class="o">(</span><span class="n">jf</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用Swing组件，实现下图中的界面效果：</p>

<p>​	<img src="./images/swing_c_1.jpg" alt="" /></p>

<p>​	<img src="./images/swing_c_2.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.InputEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SwingComponentDemo</span> <span class="o">{</span>


    <span class="nc">JFrame</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试swing基本组件"</span><span class="o">);</span>

    <span class="c1">//定义一个按钮，并为其指定图标</span>
    <span class="nc">Icon</span> <span class="n">okIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\ok.png"</span><span class="o">));</span>
    <span class="nc">JButton</span> <span class="n">ok</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"确定"</span><span class="o">,</span><span class="n">okIcon</span><span class="o">);</span>

    <span class="c1">//定义一个单选按钮，初始处于选中的状态</span>
    <span class="nc">JRadioButton</span> <span class="n">male</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButton</span><span class="o">(</span><span class="s">"男"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">//定义一个单选按钮，初始处于选中状态</span>
    <span class="nc">JRadioButton</span> <span class="n">female</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButton</span><span class="o">(</span><span class="s">"女"</span><span class="o">,</span><span class="kc">false</span><span class="o">);</span>

    <span class="c1">//定义一个ButtonGroup，把male和female组合起来，实现单选</span>
    <span class="nc">ButtonGroup</span> <span class="n">bg</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">ButtonGroup</span><span class="o">();</span>

    <span class="c1">//定义一个复选框，初始处于没有选中状态</span>
    <span class="nc">JCheckBox</span> <span class="n">married</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"是否已婚？"</span><span class="o">,</span><span class="kc">false</span><span class="o">);</span>

    <span class="c1">//定义一个数组存储颜色</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">colors</span> <span class="o">=</span> <span class="o">{</span> <span class="s">"红色"</span><span class="o">,</span> <span class="s">"绿色 "</span> <span class="o">,</span> <span class="s">"蓝色 "</span> <span class="o">};</span>

    <span class="c1">//定义一个下拉选择框，展示颜色</span>
    <span class="nc">JComboBox</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">colorChooser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JComboBox</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="n">colors</span><span class="o">);</span>

    <span class="c1">//定一个列表框，展示颜色</span>
    <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">colorList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="n">colors</span><span class="o">);</span>

    <span class="c1">//定义一个8行20列的多行文本域</span>
    <span class="nc">JTextArea</span> <span class="n">ta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span><span class="mi">20</span><span class="o">);</span>

    <span class="c1">//定义一个40列的单行文本域</span>
    <span class="nc">JTextField</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextField</span><span class="o">(</span><span class="mi">40</span><span class="o">);</span>

    <span class="c1">//定义菜单条</span>
    <span class="nc">JMenuBar</span> <span class="n">mb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuBar</span><span class="o">();</span>

    <span class="c1">//定义菜单</span>
    <span class="nc">JMenu</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"文件"</span><span class="o">);</span>
    <span class="nc">JMenu</span> <span class="n">edit</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"编辑"</span><span class="o">);</span>

    <span class="c1">//创建菜单项，并指定图标</span>
    <span class="nc">JMenuItem</span> <span class="n">newItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"新建"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\new.png"</span><span class="o">)));</span>
    <span class="nc">JMenuItem</span> <span class="n">saveItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"保存"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\save.png"</span><span class="o">)));</span>
    <span class="nc">JMenuItem</span> <span class="n">exitItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"退出"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\exit.png"</span><span class="o">)));</span>

    <span class="nc">JCheckBoxMenuItem</span> <span class="n">autoWrap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBoxMenuItem</span><span class="o">(</span><span class="s">"自动换行"</span><span class="o">);</span>
    <span class="nc">JMenuItem</span> <span class="n">copyItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"复制"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\copy.png"</span><span class="o">)));</span>
    <span class="nc">JMenuItem</span> <span class="n">pasteItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"粘贴"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\paste.png"</span><span class="o">)));</span>

    <span class="c1">//定义二级菜单，将来会添加到编辑中</span>
    <span class="nc">JMenu</span> <span class="n">format</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"格式"</span><span class="o">);</span>
    <span class="nc">JMenuItem</span> <span class="n">commentItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"注释"</span><span class="o">);</span>
    <span class="nc">JMenuItem</span> <span class="n">cancelItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"取消注释"</span><span class="o">);</span>

    <span class="c1">//定义一个右键菜单，用于设置程序的外观风格</span>
    <span class="nc">JPopupMenu</span> <span class="n">pop</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPopupMenu</span><span class="o">();</span>

    <span class="c1">//定义一个ButtongGroup对象，用于组合风格按钮，形成单选</span>
    <span class="nc">ButtonGroup</span> <span class="n">flavorGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ButtonGroup</span><span class="o">();</span>

    <span class="c1">//定义五个单选按钮菜单项，用于设置程序风格</span>
    <span class="nc">JRadioButtonMenuItem</span> <span class="n">metalItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"Metal 风格"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
    <span class="nc">JRadioButtonMenuItem</span> <span class="n">nimbusItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"Nimbus 风格"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
    <span class="nc">JRadioButtonMenuItem</span> <span class="n">windowsItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"Windows 风格"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
    <span class="nc">JRadioButtonMenuItem</span> <span class="n">classicItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"Windows 经典风格"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
    <span class="nc">JRadioButtonMenuItem</span> <span class="n">motifItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"Motif 风格"</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>



    <span class="c1">//初始化界面</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//------------------------组合主区域------------------------</span>
        <span class="c1">//创建一个装载文本框和按钮的JPanel</span>
        <span class="nc">JPanel</span> <span class="n">bottom</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">bottom</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">bottom</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ok</span><span class="o">);</span>

        <span class="n">f</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bottom</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="c1">//创建一个装载下拉选择框、三个JChekBox的JPanel</span>
        <span class="nc">JPanel</span> <span class="n">checkPanel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">colorChooser</span><span class="o">);</span>
        <span class="n">bg</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">male</span><span class="o">);</span>
        <span class="n">bg</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">female</span><span class="o">);</span>

        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">male</span><span class="o">);</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">female</span><span class="o">);</span>
        <span class="n">checkPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">married</span><span class="o">);</span>

        <span class="c1">//创建一个垂直排列的Box，装载checkPanel和多行文本域</span>
        <span class="nc">Box</span> <span class="n">topLeft</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalBox</span><span class="o">();</span>

        <span class="c1">//使用JScrollPane作为普通组件的JViewPort</span>
        <span class="nc">JScrollPane</span> <span class="n">taJsp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">ta</span><span class="o">);</span>
        <span class="n">topLeft</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">taJsp</span><span class="o">);</span>
        <span class="n">topLeft</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">checkPanel</span><span class="o">);</span>

        <span class="c1">//创建一个水平排列的Box，装载topLeft和colorList</span>
        <span class="nc">Box</span> <span class="n">top</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">top</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">topLeft</span><span class="o">);</span>
        <span class="n">top</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">colorList</span><span class="o">);</span>

        <span class="c1">//将top Box 添加到窗口的中间</span>
        <span class="n">f</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">top</span><span class="o">);</span>

        <span class="c1">//---------------------------组合菜单条----------------------------------------------</span>
        <span class="c1">//为newItem添加快捷键 ctrl+N</span>
        <span class="n">newItem</span><span class="o">.</span><span class="na">setAccelerator</span><span class="o">(</span><span class="nc">KeyStroke</span><span class="o">.</span><span class="na">getKeyStroke</span><span class="o">(</span><span class="sc">'N'</span><span class="o">,</span> <span class="nc">InputEvent</span><span class="o">.</span><span class="na">CTRL_MASK</span><span class="o">));</span>
        <span class="n">newItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"用户点击了“新建”菜单\n"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="c1">//为file添加菜单项</span>
        <span class="n">file</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">newItem</span><span class="o">);</span>
        <span class="n">file</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">saveItem</span><span class="o">);</span>
        <span class="n">file</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">exitItem</span><span class="o">);</span>

        <span class="c1">//为edit添加菜单项</span>
        <span class="n">edit</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">autoWrap</span><span class="o">);</span>
        <span class="n">edit</span><span class="o">.</span><span class="na">addSeparator</span><span class="o">();</span>
        <span class="n">edit</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">copyItem</span><span class="o">);</span>
        <span class="n">edit</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">pasteItem</span><span class="o">);</span>
        <span class="c1">//为commentItem添加提示信息</span>
        <span class="n">commentItem</span><span class="o">.</span><span class="na">setToolTipText</span><span class="o">(</span><span class="s">"将程序代码注释起来"</span><span class="o">);</span>

        <span class="c1">//为format菜单添加菜单项</span>
        <span class="n">format</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">commentItem</span><span class="o">);</span>
        <span class="n">format</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cancelItem</span><span class="o">);</span>

        <span class="c1">//给edit添加一个分隔符</span>
        <span class="n">edit</span><span class="o">.</span><span class="na">addSeparator</span><span class="o">();</span>

        <span class="c1">//把format添加到edit中形成二级菜单</span>
        <span class="n">edit</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">format</span><span class="o">);</span>

        <span class="c1">//把edit file 添加到菜单条中</span>
        <span class="n">mb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="n">mb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">edit</span><span class="o">);</span>

        <span class="c1">//把菜单条设置给窗口</span>
        <span class="n">f</span><span class="o">.</span><span class="na">setJMenuBar</span><span class="o">(</span><span class="n">mb</span><span class="o">);</span>

        <span class="c1">//------------------------组合右键菜单-----------------------------</span>

        <span class="n">flavorGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">metalItem</span><span class="o">);</span>
        <span class="n">flavorGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nimbusItem</span><span class="o">);</span>
        <span class="n">flavorGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">windowsItem</span><span class="o">);</span>
        <span class="n">flavorGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">classicItem</span><span class="o">);</span>
        <span class="n">flavorGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">motifItem</span><span class="o">);</span>

        <span class="c1">//给5个风格菜单创建事件监听器</span>
        <span class="nc">ActionListener</span> <span class="n">flavorLister</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">command</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getActionCommand</span><span class="o">();</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="n">changeFlavor</span><span class="o">(</span><span class="n">command</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">//为5个风格菜单项注册监听器</span>
        <span class="n">metalItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">flavorLister</span><span class="o">);</span>
        <span class="n">nimbusItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">flavorLister</span><span class="o">);</span>
        <span class="n">windowsItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">flavorLister</span><span class="o">);</span>
        <span class="n">classicItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">flavorLister</span><span class="o">);</span>
        <span class="n">motifItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">flavorLister</span><span class="o">);</span>

        <span class="n">pop</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">metalItem</span><span class="o">);</span>
        <span class="n">pop</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nimbusItem</span><span class="o">);</span>
        <span class="n">pop</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">windowsItem</span><span class="o">);</span>
        <span class="n">pop</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">classicItem</span><span class="o">);</span>
        <span class="n">pop</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">motifItem</span><span class="o">);</span>

        <span class="c1">//调用ta组件的setComponentPopupMenu即可设置右键菜单，无需使用事件</span>
        <span class="n">ta</span><span class="o">.</span><span class="na">setComponentPopupMenu</span><span class="o">(</span><span class="n">pop</span><span class="o">);</span>

        <span class="c1">// 设置关闭窗口时推出程序</span>
        <span class="n">f</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>

        <span class="c1">//设置jFrame最佳大小并可见</span>
        <span class="n">f</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">f</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


    <span class="o">}</span>

    <span class="c1">//定义一个方法，用于改变界面风格</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">changeFlavor</span><span class="o">(</span><span class="nc">String</span> <span class="n">command</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span><span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">command</span><span class="o">){</span>
            <span class="k">case</span> <span class="s">"Metal 风格"</span><span class="o">:</span>
                <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"javax.swing.plaf.metal.MetalLookAndFeel"</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">"Nimbus 风格"</span><span class="o">:</span>
                <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"javax.swing.plaf.nimbus.NimbusLookAndFeel"</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">"Windows 风格"</span><span class="o">:</span>
                <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"com.sun.java.swing.plaf.windows.WindowsLookAndFeel"</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">"Windows 经典风格"</span><span class="o">:</span>
                <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"com.sun.java.swing.plaf.windows.WindowsClassicLookAndFeel"</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="s">"Motif 风格"</span><span class="o">:</span>
                <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"com.sun.java.swing.plaf.motif.MotifLookAndFeel"</span><span class="o">);</span>
                <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//更新f窗口内顶级容器以及所有组件的UI</span>
        <span class="nc">SwingUtilities</span><span class="o">.</span><span class="na">updateComponentTreeUI</span><span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">getContentPane</span><span class="o">());</span>
        <span class="c1">//更新mb菜单条及每部所有组件UI</span>
        <span class="nc">SwingUtilities</span><span class="o">.</span><span class="na">updateComponentTreeUI</span><span class="o">(</span><span class="n">mb</span><span class="o">);</span>
        <span class="c1">//更新右键菜单及内部所有菜单项的UI</span>
        <span class="nc">SwingUtilities</span><span class="o">.</span><span class="na">updateComponentTreeUI</span><span class="o">(</span><span class="n">pop</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SwingComponentDemo</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><strong>注意细节：</strong></p>

<p>1.Swing菜单项指定快捷键时必须通过<code class="language-plaintext highlighter-rouge">组件名.setAccelerator(keyStroke.getKeyStroke("大写字母",InputEvent.CTRL_MASK))</code>方法来设置，其中KeyStroke代表一次击键动作，可以直接通过按键对应字母来指定该击键动作 。</p>

<p>2.更新JFrame的风格时，调用了<code class="language-plaintext highlighter-rouge"> SwingUtilities.updateComponentTreeUI(f.getContentPane());</code>这是因为如果直接更新 JFrame 本身 ，将会导致 JFrame 也被更新， JFrame 是一个特殊的容器 ， JFrame 依然部分依赖于本地平台的图形组件 。如果强制 JFrame 更新，则有可能导致该窗口失去标题栏和边框 。</p>

<p>3.给组件设置右键菜单，不需要使用监听器，只需要调用setComponentPopupMenu()方法即可，更简单。</p>

<p>4.关闭JFrame窗口，也无需监听器，只需要调用setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)方法即可，更简单。</p>

<p>5.如果需要让某个组件支持滚动条，只需要把该组件放入到JScrollPane中，然后使用JScrollPane即可。</p>

<h3 id="323-为组件设置边框">3.2.3 为组件设置边框</h3>

<p>​	很多情况下，我们常常喜欢给不同的组件设置边框，从而让界面的层次感更明显，swing中提供了Border对象来代表一个边框，下图是Border的继承体系图：</p>

<p>​	<img src="./images/Border继承体系.png" alt="" /></p>

<p><strong>特殊的Border：</strong></p>

 	1. TitledBorder:它的作用并不是直接为其他组件添加边框，而是为其他边框设置标题，创建该类的对象时，需要传入一个其他的Border对象；
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	2. ComoundBorder:用来组合其他两个边框，创建该类的对象时，需要传入其他两个Border对象，一个作为内边框，一个座位外边框
</code></pre></div></div>

<p><strong>给组件设置边框步骤：</strong></p>

 	1. 使用BorderFactory或者XxxBorder创建Border的实例对象；
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	2. 调用Swing组件的setBorder（Border b）方法为组件设置边框；
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	请使用Border实现下图效果：</p>

<p>​	<img src="./images/border.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.border.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BorderTest</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试边框"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//设置Jframe为网格布局</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">GridLayout</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">4</span><span class="o">));</span>

        <span class="c1">//创建凸起的斜边框，分别设置四条边的颜色</span>
        <span class="nc">Border</span> <span class="n">bb</span> <span class="o">=</span> <span class="nc">BorderFactory</span><span class="o">.</span><span class="na">createBevelBorder</span><span class="o">(</span><span class="nc">BevelBorder</span><span class="o">.</span><span class="na">RAISED</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">BLUE</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">GRAY</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">bb</span><span class="o">,</span><span class="s">"BevelBorder"</span><span class="o">));</span>


        <span class="c1">//创建LineBorder</span>
        <span class="nc">Border</span> <span class="n">lb</span> <span class="o">=</span> <span class="nc">BorderFactory</span><span class="o">.</span><span class="na">createLineBorder</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">ORANGE</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">lb</span><span class="o">,</span><span class="s">"LineBorder"</span><span class="o">));</span>

        <span class="c1">//创建EmptyBorder，会在组件的四周留白</span>
        <span class="nc">Border</span> <span class="n">eb</span> <span class="o">=</span> <span class="nc">BorderFactory</span><span class="o">.</span><span class="na">createEmptyBorder</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">eb</span><span class="o">,</span><span class="s">"EmptyBorder"</span><span class="o">));</span>

        <span class="c1">//创建EtchedBorder，</span>
        <span class="nc">Border</span> <span class="n">etb</span> <span class="o">=</span> <span class="nc">BorderFactory</span><span class="o">.</span><span class="na">createEtchedBorder</span><span class="o">(</span><span class="nc">EtchedBorder</span><span class="o">.</span><span class="na">RAISED</span><span class="o">,</span> <span class="nc">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">,</span> <span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">etb</span><span class="o">,</span><span class="s">"EtchedBorder"</span><span class="o">));</span>

        <span class="c1">//创建TitledBorder,为原有的Border添加标题</span>
        <span class="nc">TitledBorder</span> <span class="n">tb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TitledBorder</span><span class="o">(</span><span class="n">lb</span><span class="o">,</span><span class="s">"测试标题"</span><span class="o">,</span><span class="nc">TitledBorder</span><span class="o">.</span><span class="na">LEFT</span><span class="o">,</span><span class="nc">TitledBorder</span><span class="o">.</span><span class="na">BOTTOM</span><span class="o">,</span><span class="k">new</span> <span class="nc">Font</span><span class="o">(</span><span class="s">"StSong"</span><span class="o">,</span><span class="nc">Font</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span><span class="mi">18</span><span class="o">),</span><span class="nc">Color</span><span class="o">.</span><span class="na">BLUE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">tb</span><span class="o">,</span><span class="s">"TitledBorder"</span><span class="o">));</span>

        <span class="c1">//直接创建MatteBorder，它是EmptyBorder的子类，EmptyBorder是留白，而MatteBorder可以给留空的区域填充颜色</span>
        <span class="nc">MatteBorder</span> <span class="n">mb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MatteBorder</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">10</span><span class="o">,</span><span class="mi">30</span><span class="o">,</span><span class="nc">Color</span><span class="o">.</span><span class="na">GREEN</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">mb</span><span class="o">,</span><span class="s">"MatteBorder"</span><span class="o">));</span>

        <span class="c1">//直接创创建CompoundBorder，将两个边框组合成新边框</span>
        <span class="nc">CompoundBorder</span> <span class="n">cb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CompoundBorder</span><span class="o">(</span><span class="k">new</span> <span class="nc">LineBorder</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">RED</span><span class="o">,</span><span class="mi">8</span><span class="o">),</span><span class="n">tb</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">getPanelWithBorder</span><span class="o">(</span><span class="n">cb</span><span class="o">,</span><span class="s">"CompoundBorder"</span><span class="o">));</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">JPanel</span> <span class="nf">getPanelWithBorder</span><span class="o">(</span><span class="nc">Border</span> <span class="n">border</span><span class="o">,</span><span class="nc">String</span> <span class="n">borderName</span><span class="o">){</span>
        <span class="nc">JPanel</span> <span class="n">jPanel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>

        <span class="n">jPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JLabel</span><span class="o">(</span><span class="n">borderName</span><span class="o">));</span>

        <span class="c1">//为panel设置边框</span>
        <span class="n">jPanel</span><span class="o">.</span><span class="na">setBorder</span><span class="o">(</span><span class="n">border</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">jPanel</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">BorderTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="324-使用jtoolbar创建工具条">3.2.4 使用JToolBar创建工具条</h3>

<p>Swing 提供了JToolBar类来创建工具条，并且可以往JToolBar中添加多个工具按钮。</p>

<p><strong>JToolBar  API:</strong></p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>JToolBar( String name , int orientation)</td>
      <td>创建一个名字为name，方向为orientation的工具条对象，其orientation的是取值可以是SwingConstants.HORIZONTAL或SwingConstants.VERTICAL</td>
    </tr>
    <tr>
      <td>JButton add(Action a)</td>
      <td>通过Action对象为JToolBar工具条添加对应的工具按钮</td>
    </tr>
    <tr>
      <td>addSeparator( Dimension size )</td>
      <td>向工具条中添加指定大小的分隔符</td>
    </tr>
    <tr>
      <td>setFloatable( boolean b )</td>
      <td>设定工具条是否可以被拖动</td>
    </tr>
    <tr>
      <td>setMargin(Insets m)</td>
      <td>设置工具条与工具按钮的边距</td>
    </tr>
    <tr>
      <td>setOrientation( int o )</td>
      <td>设置工具条的方向</td>
    </tr>
    <tr>
      <td>setRollover(boolean rollover)</td>
      <td>设置此工具条的rollover状态</td>
    </tr>
  </tbody>
</table>

<p><strong>add(Action a)方法：</strong></p>

<p>​	上述API中add(Action a)这个方法比较难理解，为什么呢，之前说过，Action接口是ActionListener的一个子接口，那么它就代表一个事件监听器，而这里add方法是在给工具条添加一个工具按钮，为什么传递的是一个事件监听器呢？</p>

<p>​	首先要明确的是不管是菜单条中的菜单项还是工具条中的工具按钮，最终肯定是需要点击来完成一些操作，所以JToolBar以及JMenu都提供了更加便捷的添加子组件的方法add(Action a),在这个方法的内部会做如下几件事：</p>

   	1. 创建一个适用于该容器的组件(例如，在工具栏中创建一个工具按钮)；
   	2. 从 Action 对象中获得对应的属性来设置该组件(例如，通过 name 来设置文本，通过 lcon 来设置图标) ；
   	3. 把Action监听器注册到刚才创建的组件上；

<p><strong>案例：</strong></p>

<p>​	使用JToolBar组件完成下图效果：</p>

<p>​	<img src="./images/JTooBarTest.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JToolBarTest</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试工具条"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">jta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span><span class="mi">35</span><span class="o">);</span>
    <span class="c1">//创建工具条</span>
    <span class="nc">JToolBar</span> <span class="n">jtb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JToolBar</span><span class="o">();</span>

    <span class="c1">//创建"上一曲"Action,该Action用于创建工具按钮</span>
    <span class="nc">Action</span> <span class="n">pre</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"上一曲"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\pre.png"</span><span class="o">)))</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">jta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"上一曲.\n"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="c1">//创建"暂停" Action</span>
    <span class="nc">Action</span> <span class="n">pause</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"暂停"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\pause.png"</span><span class="o">)))</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">jta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"暂停播放.\n"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="c1">// 创建"下一曲" Action</span>
    <span class="nc">Action</span> <span class="n">next</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"下一曲"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\next.png"</span><span class="o">)))</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">jta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"下一曲.\n"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//给JTextArea添加滚动条</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">jta</span><span class="o">));</span>

        <span class="c1">//以Action的形式创建按钮，并将按钮添加到Panel中</span>
        <span class="nc">JButton</span> <span class="n">preBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="n">pre</span><span class="o">);</span>
        <span class="nc">JButton</span> <span class="n">pauseBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="n">pause</span><span class="o">);</span>
        <span class="nc">JButton</span> <span class="n">nextBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="n">next</span><span class="o">);</span>


        <span class="c1">//往工具条中添加Action对象，该对象会转换成工具按钮</span>
        <span class="n">jtb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">preBtn</span><span class="o">);</span>
        <span class="n">jtb</span><span class="o">.</span><span class="na">addSeparator</span><span class="o">();</span>
        <span class="n">jtb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">pauseBtn</span><span class="o">);</span>
        <span class="n">jtb</span><span class="o">.</span><span class="na">addSeparator</span><span class="o">();</span>
        <span class="n">jtb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nextBtn</span><span class="o">);</span>

        <span class="c1">//向窗口中添加工具条</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jtb</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JToolBarTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="325-jcolorchooser-和jfilechooser">3.2.5 JColorChooser 和JFileChooser</h3>

<p>Swing提供了JColorChooser和JFileChooser这两种对话框，可以很方便的完成颜色的选择和本地文件的选择。</p>

<h4 id="3251-jcolorchooser">3.2.5.1 JColorChooser</h4>

<p>JColorChooser 用于创建颜色选择器对话框 ， 该类的用法非常简单，只需要调用它的静态方法就可以快速生成一个颜色选择对话框：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Color</span> <span class="nf">showDialog</span><span class="o">(</span><span class="nc">Component</span> <span class="n">component</span><span class="o">,</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span><span class="nc">Color</span> <span class="n">initialColor</span><span class="o">)</span>
    
<span class="cm">/*
	参数：
		componet:指定当前对话框的父组件
		title：当前对话框的名称
		initialColor：指定默认选中的颜色
		
	返回值：
		返回用户选中的颜色
*/</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用颜色选择器，完成下图功能：</p>

<p>​		点击按钮，改变文本域的背景色</p>

<p>​	<img src="./images/JColorChooser.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JColorChooserDemo</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jFrame</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试颜色选择器"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">jta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="s">"我爱中华"</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">30</span><span class="o">);</span>

    <span class="nc">JButton</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"改变文本框的本景色"</span><span class="o">){</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

            <span class="c1">//弹出颜色选择器</span>
            <span class="nc">Color</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">JColorChooser</span><span class="o">.</span><span class="na">showDialog</span><span class="o">(</span><span class="n">jFrame</span><span class="o">,</span> <span class="s">"颜色选择器"</span><span class="o">,</span> <span class="nc">Color</span><span class="o">.</span><span class="na">WHITE</span><span class="o">);</span>
            <span class="n">jta</span><span class="o">.</span><span class="na">setBackground</span><span class="o">(</span><span class="n">result</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">});</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="n">jFrame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jta</span><span class="o">);</span>

        <span class="n">jFrame</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="n">jFrame</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jFrame</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jFrame</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JColorChooserDemo</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h4 id="3252-jfilechooser">3.2.5.2 JFileChooser</h4>

<p>​	JFileChooser 的功能与AWT中的 FileDialog 基本相似，也是用于生成”打开文件”、”保存文件 “对话框。与 FileDialog 不同的是 ， JFileChooser 无须依赖于本地平台的 GUI ， 它由 100%纯 Java 实现 ， 在所有平台 上具有完全相同的行为，并可以在所有平台上具有相同的外观风格。</p>

<p>JFileChooser使用步骤：</p>

<ol>
  <li>创建JFileChooser对象：</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JFileChooser</span> <span class="n">chooser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFileChooser</span><span class="o">(</span><span class="s">"D:\\a"</span><span class="o">);</span><span class="c1">//指定默认打开的本地磁盘路径</span>
</code></pre></div></div>

<ol>
  <li>调用JFileChooser的一系列可选方法，进行初始化</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setSelectedFile</span><span class="o">(</span><span class="nc">File</span> <span class="n">file</span><span class="o">)/</span><span class="n">setSelectedFiles</span><span class="o">(</span><span class="nc">File</span><span class="o">[]</span> <span class="n">selectedFiles</span><span class="o">):</span><span class="n">设定默认选中的文件</span>
<span class="n">setMultiSelectionEnabled</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">b</span><span class="o">)</span><span class="err">：</span><span class="n">设置是否允许多选</span><span class="err">，</span><span class="n">默认是单选</span>
<span class="n">setFileSelectionMode</span><span class="o">(</span><span class="kt">int</span> <span class="n">mode</span><span class="o">)</span><span class="err">：</span><span class="n">设置可以选择内容</span><span class="err">，</span><span class="n">例如文件</span><span class="err">、</span><span class="n">文件夹等</span><span class="err">，</span><span class="n">默认只能选择文件</span>
</code></pre></div></div>

<ol>
  <li>打开文件对话框</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">showOpenDialog</span><span class="o">(</span><span class="nc">Component</span> <span class="n">parent</span><span class="o">):</span><span class="n">打开文件加载对话框</span><span class="err">，</span><span class="n">并指定父组件</span>
<span class="n">showSaveDialog</span><span class="o">(</span><span class="nc">Component</span> <span class="n">parent</span><span class="o">):</span><span class="n">打开文件保存对话框</span><span class="err">，</span><span class="n">并指定父组件</span>
</code></pre></div></div>

<ol>
  <li>获取用户选择的结果</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">File</span> <span class="nf">getSelectedFile</span><span class="o">():</span><span class="n">获取用户选择的一个文件</span>
<span class="nc">File</span><span class="o">[]</span> <span class="nf">getSelectedFiles</span><span class="o">():</span><span class="n">获取用户选择的多个文件</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用JFileChooser完成下图效果：</p>

<p>​	<img src="./images/ImageIODemo.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.imageio.ImageIO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JFileChooserDemo</span> <span class="o">{</span>

    <span class="c1">//创建窗口对象</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试JFileChooser"</span><span class="o">);</span>

    <span class="c1">//创建打开文件对话框</span>
    <span class="nc">JFileChooser</span> <span class="n">chooser</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFileChooser</span><span class="o">(</span><span class="s">"."</span><span class="o">);</span>

    <span class="c1">//创建菜单条</span>
    <span class="nc">JMenuBar</span> <span class="n">jmb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuBar</span><span class="o">();</span>
    <span class="c1">//创建菜单</span>
    <span class="nc">JMenu</span> <span class="n">jMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"文件"</span><span class="o">);</span>
    <span class="c1">//创建菜单项</span>
    <span class="nc">JMenuItem</span> <span class="n">open</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"打开"</span><span class="o">){</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">chooser</span><span class="o">.</span><span class="na">showOpenDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">);</span>
            <span class="nc">File</span> <span class="n">imageFile</span> <span class="o">=</span> <span class="n">chooser</span><span class="o">.</span><span class="na">getSelectedFile</span><span class="o">();</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">image</span> <span class="o">=</span> <span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">imageFile</span><span class="o">);</span>
                <span class="n">drawArea</span><span class="o">.</span><span class="na">repaint</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">});</span>

    <span class="nc">JMenuItem</span> <span class="n">save</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"另存为"</span><span class="o">){</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">chooser</span><span class="o">.</span><span class="na">setFileSelectionMode</span><span class="o">(</span><span class="nc">JFileChooser</span><span class="o">.</span><span class="na">DIRECTORIES_ONLY</span><span class="o">);</span>
            <span class="n">chooser</span><span class="o">.</span><span class="na">showSaveDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">);</span>
            <span class="nc">File</span> <span class="n">dir</span> <span class="o">=</span> <span class="n">chooser</span><span class="o">.</span><span class="na">getSelectedFile</span><span class="o">();</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span><span class="s">"jpeg"</span><span class="o">,</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="n">dir</span><span class="o">,</span><span class="s">"a.jpg"</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">});</span>

    <span class="c1">//用来记录用户选择的图片</span>
    <span class="nc">BufferedImage</span> <span class="n">image</span><span class="o">;</span>

    <span class="c1">//显示图片</span>
    <span class="kd">class</span> <span class="nc">MyCanvas</span> <span class="kd">extends</span> <span class="nc">JPanel</span><span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">image</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">image</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nc">JPanel</span> <span class="n">drawArea</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyCanvas</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//设置图片显示区域大小</span>
        <span class="n">drawArea</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span><span class="mi">300</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">drawArea</span><span class="o">);</span>

        <span class="c1">//组装并设置菜单条</span>
        <span class="n">jMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">open</span><span class="o">);</span>
        <span class="n">jMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">save</span><span class="o">);</span>
        <span class="n">jmb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jMenu</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setJMenuBar</span><span class="o">(</span><span class="n">jmb</span><span class="o">);</span>

        <span class="c1">//显示jf</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JFileChooserDemo</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>    
      
<span class="o">}</span>
</code></pre></div></div>

<h3 id="327-使用joptionpane">3.2.7 使用JOptionPane</h3>

<h4 id="3271-基本概述">3.2.7.1 基本概述</h4>

<p>通过 JOptionPane 可以非常方便地创建一些简单的对话框， Swing 已经为这些对话框添加了相应的组件，无须程序员手动添加组件 。 JOptionPane 提供了如下 4 个方法来创建对话框 。</p>

<table>
  <thead>
    <tr>
      <th>方法名称</th>
      <th>方法功能</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>showMessageDialog/showInternalMessageDialog</td>
      <td>消息对话框 ，告知用户某事己发生 ， 用户只能单击”确定”按钮 ， 类似于 JavaScript 的 alert 函数 。</td>
    </tr>
    <tr>
      <td>showConfirmDialog/showInternalConfirmDialog</td>
      <td>确认对话框，向用户确认某个问题，用户可以选择 yes 、 no ~ cancel 等选项 。 类似于 JavaScript 的 comfirm 函数 。该方法返回用户单击了 哪个按钮</td>
    </tr>
    <tr>
      <td>showInputDialog/showInternalInputDialog</td>
      <td>输入对话框，提示要求输入某些信息，类似于 JavaScript的 prompt 函数。该方法返回用户输入的字符串 。</td>
    </tr>
    <tr>
      <td>showOptionDialog/showInternalOptionDialog</td>
      <td>自定义选项对话框 ，允许使用自 定义选项 ，可以取代showConfirmDialog 所产生的对话框，只是用起来更复杂 。</td>
    </tr>
  </tbody>
</table>

<p>上述方法都有都有很多重载形式，选择其中一种最全的形式，参数解释如下：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">showXxxDialog</span><span class="o">(</span><span class="nc">Component</span> <span class="n">parentComponent</span><span class="o">,</span>
		<span class="nc">Object</span> <span class="n">message</span><span class="o">,</span> 
		<span class="nc">String</span> <span class="n">title</span><span class="o">,</span> 
		<span class="kt">int</span> <span class="n">optionType</span><span class="o">,</span> 
		<span class="kt">int</span> <span class="n">messageType</span><span class="o">,</span>
        	<span class="nc">Icon</span> <span class="n">icon</span><span class="o">,</span>
		<span class="nc">Object</span><span class="o">[]</span> <span class="n">options</span><span class="o">,</span> 
		<span class="nc">Object</span> <span class="n">initialValue</span><span class="o">)</span>
<span class="o">--</span><span class="n">参数解释</span><span class="err">：</span>
<span class="n">parentComponent</span><span class="err">：</span><span class="n">当前对话框的父组件</span>
<span class="n">message</span><span class="err">：</span><span class="n">对话框上显示的信息</span><span class="err">，</span><span class="n">信息可以是字符串</span><span class="err">、</span><span class="n">组件</span><span class="err">、</span><span class="n">图片等</span>
<span class="n">title</span><span class="err">：</span><span class="n">当前对话框的标题</span>
<span class="n">optionType</span><span class="err">：</span><span class="n">当前对话框上显示的按钮类型</span><span class="err">：</span><span class="no">DEFAULT_OPTION</span><span class="err">、</span><span class="no">YES_NO_OPTION</span><span class="err">、</span><span class="no">YES_NO_CANCEL_OPTION</span><span class="err">、</span><span class="no">OK_CANCEL_OPTION</span>
<span class="nl">messageType:当前对话框的类型:</span><span class="no">ERROR_MESSAGE</span><span class="err">、</span><span class="no">INFORMATION_MESSAGE</span><span class="err">、</span><span class="no">WARNING_MESSAGE</span><span class="err">、</span><span class="no">QUESTION_MESSAGE</span><span class="err">、</span><span class="no">PLAIN_MESSAGE</span>
<span class="nl">icon:</span><span class="n">当前对话框左上角的图标</span>
<span class="nl">options:</span><span class="n">自定义下拉列表的选项</span>
<span class="nl">initialValue:</span><span class="n">自定义选项中的默认选中项</span>
</code></pre></div></div>

<p><strong>当用户与对话框交互结束后，不同类型对话框的返回值如下：</strong></p>

<ul>
  <li>showMessageDialog: 无返回值 。</li>
  <li>showlnputDialog: 返回用户输入或选择的字符串 。</li>
  <li>showConfirmDialog: 返回 一个整数代表用户选择的选项 。</li>
  <li>showOptionDialog : 返回 一个整数代表用户选择的选项，如果用户选择第一项，则返回 0; 如果选择第二项，则返回1……依此类推 。</li>
</ul>

<p><strong>对 showConfirmDialog 所产生的对话框，有如下几个返回值：</strong></p>

<ul>
  <li>YES OPTION: 用户 单击了 “是”按钮后返回 。</li>
  <li>NO OPTION: 用 户单击了”否”按钮后返回 。</li>
  <li>CANCEL OPTION: 用户单击了”取消”按钮后返回 。</li>
  <li>OK OPTION : 用户单击了”确定”按钮后返回 。</li>
  <li>CLOSED OPTION: 用户 单击了对话框右上角的 “ x” 按钮后返回。</li>
</ul>

<h4 id="3272-四种对话框演示">3.2.7.2 四种对话框演示</h4>

<p><strong>消息对话框：</strong></p>

<p>​	<img src="./images/消息提示框.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageDialogTest</span> <span class="o">{</span>


    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试消息对话框"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">jta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>

    <span class="nc">JButton</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"弹出消息对话框"</span><span class="o">)</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//JOptionPane.showMessageDialog(jf, jta.getText(), "消息对话框", JOptionPane.ERROR_MESSAGE);</span>
            <span class="c1">//JOptionPane.showMessageDialog(jf, jta.getText(), "消息对话框", JOptionPane.INFORMATION_MESSAGE);</span>
            <span class="c1">//JOptionPane.showMessageDialog(jf, jta.getText(), "消息对话框", JOptionPane.WARNING_MESSAGE);</span>
            <span class="c1">//JOptionPane.showMessageDialog(jf, jta.getText(), "消息对话框", JOptionPane.QUESTION_MESSAGE);</span>
            <span class="c1">//JOptionPane.showMessageDialog(jf, jta.getText(), "消息对话框", JOptionPane.PLAIN_MESSAGE);</span>
            <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">showMessageDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">,</span> <span class="n">jta</span><span class="o">.</span><span class="na">getText</span><span class="o">(),</span> <span class="s">"消息对话框"</span><span class="o">,</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">WARNING_MESSAGE</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"2\\female.png"</span><span class="o">)));</span>

        <span class="o">}</span>
    <span class="o">});</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jta</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">btn</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">MessageDialogTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><strong>确认对话框：</strong></p>

<p>​	<img src="./images/确认对话框.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConfirmDialogTest</span> <span class="o">{</span>


    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试确认对话框"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">jta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>

    <span class="nc">JButton</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"弹出确认对话框"</span><span class="o">)</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">showConfirmDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">,</span> <span class="n">jta</span><span class="o">.</span><span class="na">getText</span><span class="o">(),</span> <span class="s">"确认对话框"</span><span class="o">,</span><span class="nc">JOptionPane</span><span class="o">.</span><span class="na">YES_NO_OPTION</span><span class="o">,</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">QUESTION_MESSAGE</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">YES_OPTION</span><span class="o">){</span>
                <span class="n">jta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n用户点击了确定按钮"</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">==</span><span class="nc">JOptionPane</span><span class="o">.</span><span class="na">NO_OPTION</span><span class="o">){</span>
                <span class="n">jta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n用户点击了取消按钮"</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span>
    <span class="o">});</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jta</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">btn</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ConfirmDialogTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>​</p>

<p><strong>输入对话框：</strong></p>

<p>​	<img src="./images/输入对话框1.jpg" alt="" /></p>

<p>​	<img src="./images/输入对话框2.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InputDialogTest</span> <span class="o">{</span>


    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试输入对话框"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">jta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>

    <span class="nc">JButton</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"弹出输入对话框"</span><span class="o">)</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>


           <span class="cm">/* String result = JOptionPane.showInputDialog(jf, "请填写您的银行账号：", "输入对话框", JOptionPane.INFORMATION_MESSAGE);
            if(result!=null){
                jta.append(result.toString());
            }
            */</span>

            <span class="nc">Object</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">showInputDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">"输入对话框"</span><span class="o">,</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">DEFAULT_OPTION</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"柳岩"</span><span class="o">,</span> <span class="s">"舒淇"</span><span class="o">,</span> <span class="s">"龚玥菲"</span><span class="o">},</span> <span class="s">"舒淇"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="n">jta</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">});</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jta</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">btn</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">InputDialogTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<p><strong>选项对话框：</strong></p>

<p>​	<img src="./images/选项对话框.jpg" alt="" /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OptionDialogTest</span> <span class="o">{</span>


    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试选项对话框"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">jta</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>

    <span class="nc">JButton</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"弹出选项对话框"</span><span class="o">)</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>




            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">showOptionDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">,</span> <span class="s">"请选择尿不湿号码"</span><span class="o">,</span> <span class="s">"选项对话框"</span><span class="o">,</span><span class="nc">JOptionPane</span><span class="o">.</span><span class="na">DEFAULT_OPTION</span><span class="o">,</span><span class="nc">JOptionPane</span><span class="o">.</span><span class="na">INFORMATION_MESSAGE</span><span class="o">,</span>
                    <span class="kc">null</span><span class="o">,</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"大号"</span><span class="o">,</span><span class="s">"中号"</span><span class="o">,</span><span class="s">"小号"</span><span class="o">},</span><span class="s">"中号"</span><span class="o">);</span>

            <span class="k">switch</span> <span class="o">(</span><span class="n">result</span><span class="o">){</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="n">jta</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"用户选择了大号"</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="n">jta</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"用户选择了中号"</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="n">jta</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"用户选择了小号"</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">});</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jta</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">btn</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">OptionDialogTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h2 id="33-swing中的特殊容器">3.3 Swing中的特殊容器</h2>

<p>Swing提供了一些具有特殊功能的容器 ， 这些特殊容器可以用于创建一些更复杂的用户界面。</p>

<h3 id="331-使用jsplitpane">3.3.1 使用JSplitPane</h3>

<p>JSplitPane 用于创建一个分割面板,它可以将 一个组件(通常是一个容器)分割成两个部分，并提供一个分割条 ， 用户可以拖动该分割条来调整两个部分的大小。</p>

<p><img src="./images/JSplitPaneDemo.jpg" alt="" /></p>

<p><strong>JSplitPane使用步骤：</strong></p>

<ol>
  <li>创建JSplitPane对象</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">通过如下构造方法可以创建JSplitPane对象</span>
<span class="nc">JSplitPane</span><span class="o">(</span><span class="kt">int</span> <span class="n">newOrientation</span><span class="o">,</span> <span class="nc">Component</span> <span class="n">newLeftComponent</span><span class="o">,</span><span class="nc">Component</span> <span class="n">newRightComponent</span><span class="o">)</span>
    <span class="n">newOrientation</span><span class="err">：</span><span class="n">指定JSplitPane容器的分割方向</span><span class="err">：</span>
    	<span class="n">如果值为JSplitPane</span><span class="o">.</span><span class="na">VERTICAL_SPLIT</span><span class="o">,</span><span class="n">为纵向分割</span><span class="err">；</span>
    	<span class="n">如果值为JSplitPane</span><span class="o">.</span><span class="na">HORIZONTAL_SPLIT</span><span class="err">，</span><span class="n">为横向分割</span><span class="err">；</span>
    	
    <span class="n">newLeftComponent</span><span class="err">：</span><span class="n">左侧或者上侧的组件</span><span class="err">；</span>
    <span class="n">newRightComponent</span><span class="err">：</span><span class="n">右侧或者下侧的组件</span><span class="err">；</span>
</code></pre></div></div>

<ol>
  <li>设置是否开启连续布局的支持(可选)</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setContinuousLayout</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">newContinuousLayout</span><span class="o">):</span>
	<span class="n">默认是关闭的</span><span class="err">，</span><span class="n">如果设置为true</span><span class="err">，</span><span class="n">则打开连续布局的支持</span><span class="err">，</span><span class="n">但由于连续布局支持需要不断的重绘组件</span><span class="err">，</span><span class="n">所以效率会低一些</span>
</code></pre></div></div>

<ol>
  <li>设置是否支持”一触即展”的支持(可选)</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setOneTouchExpandable</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">newValue</span><span class="o">):</span>
	<span class="n">默认是关闭的</span><span class="err">，</span><span class="n">如果设置为true</span><span class="err">，</span><span class="n">则打开</span><span class="s">"一触即展"</span><span class="n">的支持</span>
</code></pre></div></div>

<ol>
  <li>其他设置</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setDividerLocation</span><span class="o">(</span><span class="kt">double</span> <span class="n">proportionalLocation</span><span class="o">):</span><span class="n">设置分隔条的位置为JSplitPane的某个百分比</span>
<span class="n">setDividerLocation</span><span class="o">(</span><span class="kt">int</span> <span class="n">location</span><span class="o">)</span><span class="err">：</span><span class="n">通过像素值设置分隔条的位置</span>
<span class="n">setDividerSize</span><span class="o">(</span><span class="kt">int</span> <span class="n">newSize</span><span class="o">)</span><span class="err">：</span><span class="n">通过像素值设置分隔条的大小</span>
<span class="n">setLeftComponent</span><span class="o">(</span><span class="nc">Component</span> <span class="n">comp</span><span class="o">)/</span><span class="n">setTopComponent</span><span class="o">(</span><span class="nc">Component</span> <span class="n">comp</span><span class="o">)/</span><span class="n">setRightComponent</span><span class="o">(</span><span class="nc">Component</span> <span class="n">comp</span><span class="o">)/</span><span class="n">setBottomComponent</span><span class="o">(</span><span class="nc">Component</span> <span class="n">comp</span><span class="o">):</span><span class="n">设置指定位置的组件</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用JSplitPane实现下图效果：</p>

<p>​		点击右侧的图书名称，在左上方显示该图书的图片，左下方显示该图书的描述</p>

<p>​	<img src="./images/JSplitPane.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">Icon</span> <span class="n">icon</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">desc</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nc">Icon</span> <span class="n">icon</span><span class="o">,</span> <span class="nc">String</span> <span class="n">desc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">icon</span> <span class="o">=</span> <span class="n">icon</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">desc</span> <span class="o">=</span> <span class="n">desc</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Icon</span> <span class="nf">getIcon</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">icon</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIcon</span><span class="o">(</span><span class="nc">Icon</span> <span class="n">icon</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">icon</span> <span class="o">=</span> <span class="n">icon</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getDesc</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">desc</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDesc</span><span class="o">(</span><span class="nc">String</span> <span class="n">desc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">desc</span> <span class="o">=</span> <span class="n">desc</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ListSelectionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ListSelectionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SplitPaneTest</span> <span class="o">{</span>

    <span class="nc">Book</span><span class="o">[]</span> <span class="n">books</span> <span class="o">=</span> <span class="o">{</span><span class="k">new</span> <span class="nc">Book</span><span class="o">(</span><span class="s">"java自学宝典"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\java.png"</span><span class="o">)),</span> <span class="s">"国内关于 Java 编程最全面的图书 \n 看得懂 ， 学得会"</span><span class="o">),</span>

            <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="s">"轻量级的JAVAEE企业应用实战"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\ee.png"</span><span class="o">)),</span> <span class="s">"SSM整合开发的经典图书，值的拥有"</span><span class="o">),</span>

            <span class="k">new</span> <span class="nf">Book</span><span class="o">(</span><span class="s">"Android基础教程"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\android.png"</span><span class="o">)),</span> <span class="s">"全面介绍Android平台应用程序\n 开发的各方面知识"</span><span class="o">)</span>

    <span class="o">};</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试JSplitPane"</span><span class="o">);</span>

    <span class="c1">//列表展示图书</span>
    <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">Book</span><span class="o">&gt;</span> <span class="n">bookList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;&gt;(</span><span class="n">books</span><span class="o">);</span>

    <span class="nc">JLabel</span> <span class="n">bookCover</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JLabel</span><span class="o">();</span>

    <span class="nc">JTextArea</span> <span class="n">bookDesc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//为三个组件设置最佳大小</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">150</span><span class="o">,</span><span class="mi">400</span><span class="o">));</span>
        <span class="n">bookCover</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">220</span><span class="o">,</span><span class="mi">330</span><span class="o">));</span>
        <span class="n">bookDesc</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">220</span><span class="o">,</span><span class="mi">70</span><span class="o">));</span>

        <span class="c1">//为列表添加事件监听器</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">addListSelectionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ListSelectionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">valueChanged</span><span class="o">(</span><span class="nc">ListSelectionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="n">bookList</span><span class="o">.</span><span class="na">getSelectedValue</span><span class="o">();</span>
                <span class="n">bookCover</span><span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="n">book</span><span class="o">.</span><span class="na">getIcon</span><span class="o">());</span>
                <span class="n">bookDesc</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">book</span><span class="o">.</span><span class="na">getDesc</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//创建一个垂直的分割面板</span>
        <span class="nc">JSplitPane</span> <span class="n">left</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSplitPane</span><span class="o">(</span><span class="nc">JSplitPane</span><span class="o">.</span><span class="na">VERTICAL_SPLIT</span><span class="o">,</span><span class="n">bookCover</span><span class="o">,</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">bookDesc</span><span class="o">));</span>

        <span class="c1">//打开"一触即展"特性</span>
        <span class="n">left</span><span class="o">.</span><span class="na">setOneTouchExpandable</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//设置分隔条的大小</span>

        <span class="n">left</span><span class="o">.</span><span class="na">setDividerSize</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
        <span class="c1">//设置分割面板根据组件的大小调整最佳布局</span>
        <span class="n">left</span><span class="o">.</span><span class="na">resetToPreferredSizes</span><span class="o">();</span>
        
        <span class="c1">//创建一个水平分隔面板</span>
        <span class="nc">JSplitPane</span> <span class="n">content</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSplitPane</span><span class="o">(</span><span class="nc">JSplitPane</span><span class="o">.</span><span class="na">HORIZONTAL_SPLIT</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">bookList</span><span class="o">);</span>
        <span class="c1">//设置支持连续布局</span>
        <span class="n">content</span><span class="o">.</span><span class="na">setContinuousLayout</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SplitPaneTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="332-使用jtabledpane">3.3.2 使用JTabledPane</h3>

<p>JTabbedPane可以很方便地在窗口上放置多个标签页，每个标签页相当于获得了一个与外部容器具有相同大小的组件摆放区域。通过这种方式， 就可以在一个容器里放置更多的组件 ， 例如右击桌面上的” 我的电脑 “图标，在弹出的快捷菜单里单击”属性 “ 菜单工页 ， 就可以看 到 一个”系统属性 “ 对话框 ，这个对话框里包含了 若干个标签页。</p>

<p><img src="./images/properties.jpg" alt="" /></p>

<p>如果需要使用JTabbedPane在窗口上创建标签页 ，则可以按如下步骤进行:</p>

<ol>
  <li>创建JTabbedPane对象</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nc">JTabbedPane</span><span class="o">(</span><span class="kt">int</span> <span class="n">tabPlacement</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tabLayoutPolicy</span><span class="o">):</span>
	<span class="nl">tabPlacement:</span>
		<span class="n">指定标签标题的放置位置</span><span class="err">，</span><span class="n">可以选择</span> <span class="nc">SwingConstants中的四个常量</span><span class="err">：</span><span class="no">TOP</span><span class="err">、</span><span class="no">LEFT</span><span class="err">、</span><span class="no">BOTTOM</span><span class="err">、</span><span class="no">RIGHT</span>
	<span class="nl">tabLaoutPolicy:</span>
		<span class="n">指定当窗口不能容纳标签页标题时的布局策略</span><span class="err">，</span><span class="n">可以选择JTabbedPane</span><span class="o">.</span><span class="na">WRAP_TAB_LAYOUT和JTabbedPane</span><span class="o">.</span><span class="na">SCROLL_TAB_LAYOUT</span>
</code></pre></div></div>

<ol>
  <li>通过JTabbedPane对象堆标签进行增删改查</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">addTab</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="nc">Icon</span> <span class="n">icon</span><span class="o">,</span> <span class="nc">Component</span> <span class="n">component</span><span class="o">,</span> <span class="nc">String</span> <span class="n">tip</span><span class="o">):</span><span class="n">添加标签</span>
	<span class="nl">title:</span><span class="n">标签的名称</span>
	<span class="nl">icon:</span><span class="n">标签的图标</span>
	<span class="nl">component:</span><span class="n">标签对应的组件</span>
	<span class="nl">tip:</span><span class="n">光标放到标签上的提示</span>
	
<span class="n">insertTab</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="nc">Icon</span> <span class="n">icon</span><span class="o">,</span> <span class="nc">Component</span> <span class="n">component</span><span class="o">,</span> <span class="nc">String</span> <span class="n">tip</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">):</span><span class="n">插入标签页</span>
	<span class="nl">title:</span><span class="n">标签的名称</span>
	<span class="nl">icon:</span><span class="n">标签的图标</span>
	<span class="nl">component:</span><span class="n">标签对应的组件</span>
	<span class="nl">tip:</span><span class="n">光标放到标签上的提示</span>
	<span class="nl">index:</span><span class="n">在哪个索引处插入标签页</span>
<span class="n">setComponentAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="nc">Component</span> <span class="n">component</span><span class="o">):</span><span class="n">修改标签页对应的组件</span>
	<span class="nl">index:</span><span class="n">修改哪个索引处的标签</span>
	<span class="nl">component:</span><span class="n">标签对应的组件</span>
<span class="n">removeTabAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">):</span>
	<span class="nl">index:</span><span class="n">删除哪个索引处的标签</span>
</code></pre></div></div>

<ol>
  <li>设置当前显示的标签页</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setSelectedIndex</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">):</span><span class="n">设置哪个索引处的标签被选中</span>
</code></pre></div></div>

<ol>
  <li>设置JTabbedPane的其他属性</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setDisabledIconAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="nc">Icon</span> <span class="n">disabledIcon</span><span class="o">):</span> <span class="n">将指定位置的禁用图标设置为</span> <span class="n">icon</span><span class="err">，</span><span class="n">该图标也可以是null表示不使用禁用图标</span><span class="err">。</span>
<span class="n">setEnabledAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">enabled</span><span class="o">):</span> <span class="n">设置指定位置的标签页是否启用</span><span class="err">。</span>
<span class="n">setTitleAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="nc">String</span> <span class="n">title</span><span class="o">):</span> <span class="n">设置指定位置标签页的标题为</span> <span class="n">title</span><span class="err">，</span><span class="n">该title可以是null</span><span class="o">,</span><span class="n">这表明设置该标签页的标题为空</span><span class="err">。</span>
<span class="n">setToolTipTextAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="nc">String</span> <span class="n">toolTipText</span><span class="o">):</span> <span class="n">设置指定位置标签页的提示文本</span> <span class="err">。</span>
</code></pre></div></div>

<ol>
  <li>为JTabbedPane设置监听器</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">addChangeListener</span><span class="o">(</span><span class="nc">ChangeListener</span> <span class="n">l</span><span class="o">)</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	请使用JTabbedPane完成下图功能：</p>

<p>​	<img src="./images/JTabbedPane.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ChangeEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ChangeListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JTabbedPaneTest</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试JTabbedPane"</span><span class="o">);</span>



    <span class="nc">JTabbedPane</span> <span class="n">tabbedPane</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTabbedPane</span><span class="o">(</span><span class="nc">SwingConstants</span><span class="o">.</span><span class="na">TOP</span><span class="o">,</span><span class="nc">JTabbedPane</span><span class="o">.</span><span class="na">WRAP_TAB_LAYOUT</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>


        <span class="c1">//设置jf大小</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setBounds</span><span class="o">(</span><span class="mi">400</span><span class="o">,</span><span class="mi">400</span><span class="o">,</span><span class="mi">400</span><span class="o">,</span><span class="mi">400</span><span class="o">);</span>
        <span class="c1">//设置jf大小不能变化</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setResizable</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>


        <span class="nc">ImageIcon</span> <span class="n">icon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\open.gif"</span><span class="o">));</span>
        <span class="c1">//添加标签</span>
        <span class="n">tabbedPane</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="s">"用户管理"</span><span class="o">,</span><span class="n">icon</span><span class="o">,</span><span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"用户一"</span><span class="o">,</span><span class="s">"用户二"</span><span class="o">,</span><span class="s">"用户三"</span><span class="o">}));</span>
        <span class="n">tabbedPane</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="s">"商品管理"</span><span class="o">,</span><span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"商品一"</span><span class="o">,</span><span class="s">"商品二"</span><span class="o">,</span><span class="s">"商品三"</span><span class="o">}));</span>
        <span class="n">tabbedPane</span><span class="o">.</span><span class="na">addTab</span><span class="o">(</span><span class="s">"订单管理"</span><span class="o">,</span><span class="n">icon</span><span class="o">,</span><span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"订单一"</span><span class="o">,</span><span class="s">"订单二"</span><span class="o">,</span><span class="s">"订单三"</span><span class="o">}));</span>

        <span class="c1">//设置第二个标签默认选中</span>
        <span class="n">tabbedPane</span><span class="o">.</span><span class="na">setSelectedIndex</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="c1">//设置第一个标签不能用</span>
        <span class="n">tabbedPane</span><span class="o">.</span><span class="na">setEnabledAt</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="kc">false</span><span class="o">);</span>

        <span class="n">tabbedPane</span><span class="o">.</span><span class="na">addChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ChangeListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stateChanged</span><span class="o">(</span><span class="nc">ChangeEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">selectedIndex</span> <span class="o">=</span> <span class="n">tabbedPane</span><span class="o">.</span><span class="na">getSelectedIndex</span><span class="o">();</span>
                <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">showMessageDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">,</span><span class="s">"选中了第"</span><span class="o">+(</span><span class="n">selectedIndex</span><span class="o">+</span><span class="mi">1</span><span class="o">)+</span><span class="s">"个标签"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tabbedPane</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JTabbedPaneTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="333-使用jlayeredpanejdesktoppanejinternalframe">3.3.3 使用JLayeredPane、JDesktopPane、JInternalFrame</h3>

<h4 id="3331-jlayeredpane">3.3.3.1 JLayeredPane</h4>

<p>JLayeredPane是 一个代表有层 次深度的容器 ， 它允许组件在需要 时 互相重叠。当向JLayeredPane容器中添加组件时， 需要为该组件指定一个深度索引 ， 其中层次索引较高 的层里的组件位于其他层的组件之上。</p>

<p><img src="./images/JLayeredPane1.gif" alt="" /></p>

<p>JLayeredPane 还将容器的层次深度分成几个默认层 ，程序只是将组件放入相应 的层 ，从而可以更容易地确保组件的正确重叠 ， 无须为组件指定具体的深度索引。JLayeredPane 提供了如下几个默认层：</p>

<ol>
  <li>DEFAULT_LAYER:大多数组件位于标准层，这是最底层；</li>
  <li>PALETTE_LAYER : 调色板层位于默认层之上 。该层对于浮动工具栏和调色板很有用，因此可以位于其他组件之上 。</li>
  <li>MODAL_LAYER: 该层用于显示模式对话框。它们将出现在容器中所有工具栏 、调色板或标准组件的上面 。</li>
  <li>POPUP_LAYER : 该层用于显示右键菜单 ， 与对话框 、工具提示和普通组件关联的弹出式窗口将出现在对应的对话框、工具提示和普通组件之上。</li>
  <li>DRAG_LAYER: 该层用于放置拖放过程中的组件(关于拖放操作请看下一节内 容) ，拖放操作中的组件位于所有组件之上 。 一旦拖放操作结束后 ， 该组件将重新分配到其所属的正常层。</li>
</ol>

<p><strong>JLayeredPane 方法：</strong></p>

<ol>
  <li>moveToBack(Component c)：把当前组件c移动到所在层的所有组件的最后一个位置；</li>
  <li>moveToFront(Component c)：把当前组件c移动到所在层的所有组件的第一个位置；</li>
  <li>setLayer(Component c, int layer)：更改组件c所处的层；</li>
</ol>

<p>需要注意的是，往JLayeredPane中添加组件，如果要显示，则必须手动设置该组件在容器中显示的位置以及大小。</p>

<p><strong>案例：</strong></p>

<p>​	使用JLayeredPane完成下图效果：</p>

<p>​	<img src="./images/JLayeredPane2.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JLayeredPaneTest</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试JLayeredPane"</span><span class="o">);</span>
    <span class="nc">JLayeredPane</span> <span class="n">layeredPane</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JLayeredPane</span><span class="o">();</span>

    <span class="c1">//自定义组件，继承JPanel</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">ContentPanel</span> <span class="kd">extends</span> <span class="nc">JPanel</span><span class="o">{</span>

        <span class="kd">public</span> <span class="nf">ContentPanel</span><span class="o">(</span><span class="kt">int</span> <span class="n">xPos</span><span class="o">,</span><span class="kt">int</span> <span class="n">yPos</span><span class="o">,</span><span class="nc">String</span> <span class="n">title</span><span class="o">,</span><span class="nc">String</span> <span class="n">ico</span><span class="o">){</span>
            <span class="c1">//设置边框</span>
            <span class="n">setBorder</span><span class="o">(</span><span class="nc">BorderFactory</span><span class="o">.</span><span class="na">createTitledBorder</span><span class="o">(</span><span class="nc">BorderFactory</span><span class="o">.</span><span class="na">createEtchedBorder</span><span class="o">(),</span><span class="n">title</span><span class="o">));</span>
            <span class="nc">JLabel</span> <span class="n">label</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JLabel</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\"</span><span class="o">+</span><span class="n">ico</span><span class="o">)));</span>
            <span class="n">add</span><span class="o">(</span><span class="n">label</span><span class="o">);</span>
            <span class="n">setBounds</span><span class="o">(</span><span class="n">xPos</span><span class="o">,</span><span class="n">yPos</span><span class="o">,</span><span class="mi">160</span><span class="o">,</span><span class="mi">220</span><span class="o">);</span>

        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//向LayeredPane中添加三个组件，往JLayeredPane中添加组件，都必须手动的设置组件显示的位置和大小，才能显示出来</span>

        <span class="n">layeredPane</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ContentPanel</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">20</span><span class="o">,</span><span class="s">"java自学宝典"</span><span class="o">,</span><span class="s">"java.png"</span><span class="o">),</span><span class="nc">JLayeredPane</span><span class="o">.</span><span class="na">MODAL_LAYER</span><span class="o">);</span>
        <span class="n">layeredPane</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ContentPanel</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">60</span><span class="o">,</span><span class="s">"Android基础教程"</span><span class="o">,</span><span class="s">"android.png"</span><span class="o">),</span><span class="nc">JLayeredPane</span><span class="o">.</span><span class="na">DEFAULT_LAYER</span><span class="o">);</span>
        <span class="n">layeredPane</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ContentPanel</span><span class="o">(</span><span class="mi">80</span><span class="o">,</span><span class="mi">100</span><span class="o">,</span><span class="s">"轻量级javaEE企业应用"</span><span class="o">,</span><span class="s">"ee.png"</span><span class="o">),</span><span class="nc">JLayeredPane</span><span class="o">.</span><span class="na">DRAG_LAYER</span><span class="o">);</span>

        <span class="n">layeredPane</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span><span class="mi">400</span><span class="o">));</span>


        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">layeredPane</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JLayeredPaneTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="3332-jdesktoppane和jinternalframe">3.3.3.2 JDesktopPane和JInternalFrame</h4>

<p>JDesktopPane是JLayeredPane的子类，这种容器在开发中会更常用很多应用程序都需要启动多个内部窗口来显示信息（典型的比如IDEA、NotePad++），这些内部窗口都属于同一个外部窗口，当外部窗 口 最小化时， 这些内部窗口都被隐藏起来。在 Windows 环境中，这
种用户界面被称为多文档界面 C Multiple Document Interface, MDI) 。</p>

<p>使用 Swing 可以非常简单地创建出这种 MDI 界面 ， 通常，内部窗口有自己的标题栏、标题、图标、三个窗口按钮，并允许拖动改变内部窗口 的大小和位置，但内部窗口不能拖出外部窗口。</p>

<p>​	<img src="./images/内部窗口1.jpg" alt="" /></p>

<p>JDesktopPane 需要和 JIntemalFrame 结合使用，其中JDesktopPane 代表一 个虚拟桌面 ，而JIntemalFrame则用于创建内部窗口。使用 JDesktopPane 和 JIntemalFrame 创建内部窗口按如下步骤进行即可:</p>

<ol>
  <li>创建 一 个 JDesktopPane 对象,代表虚拟桌面</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JDesktopPane</span><span class="o">()</span>
</code></pre></div></div>

<ol>
  <li>使用 JIntemalFrame 创建一个内部窗口</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JInternalFrame</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">resizable</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">closable</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">maximizable</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">iconifiable</span><span class="o">):</span>
	<span class="nl">title:</span> <span class="n">内部窗口标题</span>
	<span class="nl">resizable:</span><span class="n">是否可改变大小</span>
	<span class="nl">closeble:</span> <span class="n">是否可关闭</span>
	<span class="nl">maximizable:</span> <span class="n">是否可最大化</span>
	<span class="nl">iconifiable:</span><span class="n">是否可最小化</span>
</code></pre></div></div>

<ol>
  <li>一旦获得了内部窗口之后，该窗口的用法和普通窗口的用法基本相似， 一样可以指定该窗口的布局管理器， 一样可以向窗口内添加组件、改变窗口图标等。</li>
  <li>将该内部窗口以合适大小、在合适位置显示出来 。与普通窗口类似的是， 该窗口默认大小是 0x0像素，位于0，0 位置(虚拟桌面的左上角处)，并且默认处于隐藏状态，程序可以通过如下代码将内部窗口显示出来:</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">reshape</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="kt">int</span> <span class="n">height</span><span class="o">):</span><span class="n">设置内部窗口的大小以及在外部窗口中的位置</span><span class="err">；</span>
<span class="n">show</span><span class="o">():</span><span class="n">设置内部窗口可见</span>
</code></pre></div></div>

<ol>
  <li>将内部窗口添加到 JDesktopPane 容器中，再将 JDesktopPane 容器添加到其他容器中。</li>
</ol>

<p><strong>案例：</strong></p>

<p>​	请使用JDesktopPane和JInternalFrame完成下图效果：</p>

<p>​	<img src="./images/JInternalFrame.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JInternalFrameTest</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="no">DESKTOP_WIDTH</span> <span class="o">=</span> <span class="mi">480</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="no">DESKTOP_HEIGHT</span> <span class="o">=</span> <span class="mi">360</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="no">FRAME_DISTANCE</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span>

    <span class="c1">//创建外部窗口</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试JInternalFrame"</span><span class="o">);</span>

    <span class="c1">//创建虚拟桌面</span>
    <span class="nc">JDesktopPane</span> <span class="n">desktop</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JDesktopPane</span><span class="o">();</span>

    <span class="c1">//定义内部窗口为的大小</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">230</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="no">DESKTOP_HEIGHT</span><span class="o">;</span>

    <span class="c1">//定义下一个内部窗口的横轴坐标</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">nextFrameX</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="c1">//为外部窗口定义两个菜单</span>
    <span class="nc">JMenu</span> <span class="n">fileMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"文件"</span><span class="o">);</span>


    <span class="c1">//定义Action，用于快捷创建菜单项和工具按钮</span>
    <span class="nc">Action</span> <span class="n">newAction</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"新建"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\new.png"</span><span class="o">)))</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//创建内部窗口</span>
            <span class="nc">JInternalFrame</span> <span class="n">iframe</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JInternalFrame</span><span class="o">(</span><span class="s">"新文档"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="kc">true</span><span class="o">);</span>
            <span class="c1">//往内部窗口中添加一个8行40列的文本框</span>
            <span class="n">iframe</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">8</span><span class="o">,</span><span class="mi">40</span><span class="o">)));</span>
            <span class="c1">//将内部窗口添加到虚拟桌面中</span>
            <span class="n">desktop</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">iframe</span><span class="o">);</span>
            <span class="c1">//设置内部窗口的原始位置</span>
            <span class="n">iframe</span><span class="o">.</span><span class="na">reshape</span><span class="o">(</span><span class="n">nextFrameX</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">width</span><span class="o">,</span><span class="n">height</span><span class="o">);</span>
            <span class="c1">//使该窗口可见</span>
            <span class="n">iframe</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>

            <span class="c1">//计算下一个内部窗口的位置</span>
            <span class="n">nextFrameX</span><span class="o">+=</span><span class="no">FRAME_DISTANCE</span><span class="o">;</span>


            <span class="k">if</span> <span class="o">(</span><span class="n">nextFrameX</span><span class="o">&gt;</span><span class="no">DESKTOP_WIDTH</span><span class="o">-</span><span class="n">width</span><span class="o">){</span>
                <span class="n">nextFrameX</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="nc">Action</span> <span class="n">exitAction</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AbstractAction</span><span class="o">(</span><span class="s">"退出"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"3\\exit.png"</span><span class="o">)))</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//结束当前程序</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">};</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//为窗口安装菜单条</span>
        <span class="nc">JMenuBar</span> <span class="n">menuBar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuBar</span><span class="o">();</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setJMenuBar</span><span class="o">(</span><span class="n">menuBar</span><span class="o">);</span>
        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">fileMenu</span><span class="o">);</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">newAction</span><span class="o">);</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">exitAction</span><span class="o">);</span>



        <span class="c1">//设置虚拟桌面的最佳大小</span>
        <span class="n">desktop</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="no">DESKTOP_WIDTH</span><span class="o">,</span><span class="no">DESKTOP_HEIGHT</span><span class="o">));</span>

        <span class="c1">//将虚拟桌面添加到外部窗口中</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">desktop</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JInternalFrameTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="34-jprocessbarprocessmonitorboundedrangemodel实现进度条">3.4 JProcessBar、ProcessMonitor、BoundedRangeModel实现进度条</h2>

<p>进度条是图形界面中广泛使用的GUI 组件，当复制一个较大的文件时，操作系统会显示一个进度条，用于标识复制操作完成的比例 : 当启动 Eclipse 等程序时， 因为需要加载较多的资源 ， 故而启动速度较慢 ， 程序也会在启动过程中显示一个进度条 ， 用以表示该软件启动完成的比例 ……</p>

<h3 id="341-创建进度条">3.4.1 创建进度条</h3>

<p>使用JProgressBar创建进度条的步骤：</p>

<ol>
  <li>创建JProgressBar对象</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nf">JProgressBar</span><span class="o">(</span><span class="kt">int</span> <span class="n">orient</span><span class="o">,</span> <span class="kt">int</span> <span class="n">min</span><span class="o">,</span> <span class="kt">int</span> <span class="n">max</span><span class="o">):</span>
	<span class="nl">orint:</span><span class="n">方向</span>
	<span class="nl">min:</span><span class="n">最小值</span>
	<span class="nl">max:</span><span class="n">最大值</span>
</code></pre></div></div>

<ol>
  <li>设置属性</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setBorderPainted</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">b</span><span class="o">):</span><span class="n">设置进度条是否有边框</span>
<span class="n">setIndeterminate</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">newValue</span><span class="o">):</span><span class="n">设置当前进度条是不是进度不确定的进度条</span><span class="err">，</span><span class="n">如果是</span><span class="err">，</span><span class="n">则将看到一个滑块在进度条中左右移动</span>
<span class="n">setStringPainted</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">b</span><span class="o">)</span><span class="err">：</span><span class="n">设置进度条是否显示当前完成的百分比</span>
</code></pre></div></div>

<ol>
  <li>获取和设置当前进度条的进度状态</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setValue</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">):</span><span class="n">设置当前进度值</span>
<span class="kt">double</span> <span class="nf">getPercentComplete</span><span class="o">():</span><span class="n">获取进度条的完成百分比</span>
<span class="nc">String</span>  <span class="nf">getStrin</span><span class="o">():</span><span class="n">返回进度字符串的当前值</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	请使用JProgressBar完成下图效果：</p>

<p>​	<img src="./images/JProgressBar.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JProgressTest</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试进度条"</span><span class="o">);</span>
    <span class="c1">//创建一个垂直进度条</span>
    <span class="nc">JProgressBar</span> <span class="n">bar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JProgressBar</span><span class="o">(</span><span class="nc">JProgressBar</span><span class="o">.</span><span class="na">HORIZONTAL</span><span class="o">);</span>

    <span class="nc">JCheckBox</span> <span class="n">indeterminate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"不确定进度"</span><span class="o">);</span>
    <span class="nc">JCheckBox</span> <span class="n">noBorder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"不绘制边框"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="nc">Box</span> <span class="n">box</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Box</span><span class="o">(</span><span class="nc">BoxLayout</span><span class="o">.</span><span class="na">Y_AXIS</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">indeterminate</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">noBorder</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">FlowLayout</span><span class="o">());</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">box</span><span class="o">);</span>

        <span class="c1">//把进度条添加到jf窗口中</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bar</span><span class="o">);</span>

        <span class="c1">//设置进度条的最大值和最小值</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setMinimum</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setMaximum</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>

        <span class="c1">//设置进度条中绘制完成百分比</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setStringPainted</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//根据选择决定是否绘制进度条边框</span>
        <span class="n">noBorder</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">noBorder</span><span class="o">.</span><span class="na">isSelected</span><span class="o">();</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setBorderPainted</span><span class="o">(!</span><span class="n">flag</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//根据选择决定是否是不确定进度条</span>
        <span class="n">indeterminate</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">indeterminate</span><span class="o">.</span><span class="na">isSelected</span><span class="o">();</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setIndeterminate</span><span class="o">(</span><span class="n">flag</span><span class="o">);</span>
                <span class="c1">//不绘制百分比，因为之前设置了绘制百分比</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setStringPainted</span><span class="o">(!</span><span class="n">flag</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


        <span class="c1">//通过循环不断改变进度条的完成进度</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="c1">//改变进度条的完成进度</span>
            <span class="n">bar</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JProgressTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>在刚才的程序中，通过for循环来不断的更新进度条的进度，这仅仅是为了演示而已，实际开发中这样的操作是没有意义的。通常情况下是不断的检测一个耗时任务的完成情况，然后才去更新进度条的进度。下面的代码通过Timer定时器和Runnable接口，对上述代码进行改进，其运行结果没有变化，知识修改到了进度条进度更新的逻辑。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ChangeEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ChangeListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JProgressTest2</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试进度条"</span><span class="o">);</span>
    <span class="c1">//创建一个垂直进度条</span>
    <span class="nc">JProgressBar</span> <span class="n">bar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JProgressBar</span><span class="o">(</span><span class="nc">JProgressBar</span><span class="o">.</span><span class="na">HORIZONTAL</span><span class="o">);</span>

    <span class="nc">JCheckBox</span> <span class="n">indeterminate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"不确定进度"</span><span class="o">);</span>
    <span class="nc">JCheckBox</span> <span class="n">noBorder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"不绘制边框"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="nc">Box</span> <span class="n">box</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Box</span><span class="o">(</span><span class="nc">BoxLayout</span><span class="o">.</span><span class="na">Y_AXIS</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">indeterminate</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">noBorder</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">FlowLayout</span><span class="o">());</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">box</span><span class="o">);</span>

        <span class="c1">//把进度条添加到jf窗口中</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bar</span><span class="o">);</span>

        <span class="c1">//开启耗时任务</span>
        <span class="nc">SimulatedActivity</span> <span class="n">simulatedActivity</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimulatedActivity</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>


        <span class="c1">//设置进度条的最大值和最小值</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setMinimum</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setMaximum</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>

        <span class="c1">//设置进度条中绘制完成百分比</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setStringPainted</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//根据选择决定是否绘制进度条边框</span>
        <span class="n">noBorder</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">noBorder</span><span class="o">.</span><span class="na">isSelected</span><span class="o">();</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setBorderPainted</span><span class="o">(!</span><span class="n">flag</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//根据选择决定是否是不确定进度条</span>
        <span class="n">indeterminate</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">indeterminate</span><span class="o">.</span><span class="na">isSelected</span><span class="o">();</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setIndeterminate</span><span class="o">(</span><span class="n">flag</span><span class="o">);</span>
                <span class="c1">//不绘制百分比，因为之前设置了绘制百分比</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setStringPainted</span><span class="o">(!</span><span class="n">flag</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>




        <span class="c1">//通过定时器，不断的读取simulatedActivity中的current值，更新进度条的进度</span>
        <span class="nc">Timer</span> <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Timer</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">.</span><span class="na">getCurrent</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="c1">//监听进度条的变化，如果进度完成为100%，那么停止定时器</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">addChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ChangeListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stateChanged</span><span class="o">(</span><span class="nc">ChangeEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span>   <span class="n">bar</span><span class="o">.</span><span class="na">getValue</span><span class="o">()==</span><span class="n">bar</span><span class="o">.</span><span class="na">getMaximum</span><span class="o">()){</span>
                    <span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JProgressTest2</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">//定义一个线程任务，模拟耗时操作</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">SimulatedActivity</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
        <span class="c1">//内存可见</span>
        <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">amount</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">SimulatedActivity</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCurrent</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">current</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCurrent</span><span class="o">(</span><span class="kt">int</span> <span class="n">current</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">;</span>
        <span class="o">}</span>


        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAmount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAmount</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//通过循环，不断的修改current的值，模拟任务完成量</span>
            <span class="k">while</span><span class="o">(</span><span class="n">current</span><span class="o">&lt;</span><span class="n">amount</span><span class="o">){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">current</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>之前我们学习过，其实Swing中很多组件的界面与数据都采用了MVC的设计思想：</p>

<p>​	<img src="./images/mvc.png" alt="" /></p>

<p>Swing 组件大都将外观显示和 内部数据分离 ， JProgressBar 也不例外， JProgressBar 组件有一个内置的用于保存其状态数据的Model对象 ， 这个对象由BoundedRangeModel对象表示，程序调用JProgressBar对象的方法完成进度百分比的设置，监听进度条的数据变化，其实都是通过它内置的BoundedRangeModel对象完成的。下面的代码是对之前代码的改进，通过BoundedRangeModel完成数据的设置，获取与监听。</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ChangeEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ChangeListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JProgressTest3</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试进度条"</span><span class="o">);</span>
    <span class="c1">//创建一个垂直进度条</span>
    <span class="nc">JProgressBar</span> <span class="n">bar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JProgressBar</span><span class="o">(</span><span class="nc">JProgressBar</span><span class="o">.</span><span class="na">HORIZONTAL</span><span class="o">);</span>

    <span class="nc">JCheckBox</span> <span class="n">indeterminate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"不确定进度"</span><span class="o">);</span>
    <span class="nc">JCheckBox</span> <span class="n">noBorder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBox</span><span class="o">(</span><span class="s">"不绘制边框"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="nc">Box</span> <span class="n">box</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Box</span><span class="o">(</span><span class="nc">BoxLayout</span><span class="o">.</span><span class="na">Y_AXIS</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">indeterminate</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">noBorder</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">FlowLayout</span><span class="o">());</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">box</span><span class="o">);</span>

        <span class="c1">//把进度条添加到jf窗口中</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bar</span><span class="o">);</span>

        <span class="c1">//开启耗时任务</span>
        <span class="nc">SimulatedActivity</span> <span class="n">simulatedActivity</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimulatedActivity</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
        <span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>


        <span class="c1">//设置进度条的最大值和最小值</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">setMinimum</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">setMaximum</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>

        <span class="c1">//设置进度条中绘制完成百分比</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">setStringPainted</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//根据选择决定是否绘制进度条边框</span>
        <span class="n">noBorder</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">noBorder</span><span class="o">.</span><span class="na">isSelected</span><span class="o">();</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setBorderPainted</span><span class="o">(!</span><span class="n">flag</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//根据选择决定是否是不确定进度条</span>
        <span class="n">indeterminate</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="n">indeterminate</span><span class="o">.</span><span class="na">isSelected</span><span class="o">();</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setIndeterminate</span><span class="o">(</span><span class="n">flag</span><span class="o">);</span>
                <span class="c1">//不绘制百分比，因为之前设置了绘制百分比</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">setStringPainted</span><span class="o">(!</span><span class="n">flag</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>




        <span class="c1">//通过定时器，不断的读取simulatedActivity中的current值，更新进度条的进度</span>
        <span class="nc">Timer</span> <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Timer</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">bar</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">setValue</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">.</span><span class="na">getCurrent</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        <span class="c1">//监听进度条的变化，如果进度完成为100%，那么停止定时器</span>
        <span class="n">bar</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">addChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ChangeListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stateChanged</span><span class="o">(</span><span class="nc">ChangeEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span>   <span class="n">bar</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">getValue</span><span class="o">()==</span><span class="n">bar</span><span class="o">.</span><span class="na">getModel</span><span class="o">().</span><span class="na">getMaximum</span><span class="o">()){</span>
                    <span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">JProgressTest3</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">//定义一个线程任务，模拟耗时操作</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">SimulatedActivity</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
        <span class="c1">//内存可见</span>
        <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">amount</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">SimulatedActivity</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCurrent</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">current</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCurrent</span><span class="o">(</span><span class="kt">int</span> <span class="n">current</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">;</span>
        <span class="o">}</span>


        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAmount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAmount</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//通过循环，不断的修改current的值，模拟任务完成量</span>
            <span class="k">while</span><span class="o">(</span><span class="n">current</span><span class="o">&lt;</span><span class="n">amount</span><span class="o">){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">current</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="342-创建进度对话框">3.4.2 创建进度对话框</h3>

<p>ProgressMonitor的用法与JProgressBa 的用法基本相似，只是ProgressMonitor可以直接创 建一个进度对话框，它提供了下面的构造器完成对话框的创建：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="nf">ProgressMonitor</span><span class="o">(</span><span class="nc">Component</span> <span class="n">parentComponent</span><span class="o">,</span><span class="nc">Object</span> <span class="n">message</span><span class="o">,</span><span class="nc">String</span> <span class="n">note</span><span class="o">,</span> <span class="kt">int</span> <span class="n">min</span><span class="o">,</span><span class="kt">int</span> <span class="n">max</span><span class="o">):</span>
	<span class="nl">parentComponent:</span><span class="n">对话框的父组件</span>
	<span class="nl">message:</span><span class="n">对话框的描述信息</span>
	<span class="nl">note:</span><span class="n">对话框的提示信息</span>
	<span class="nl">min:</span><span class="n">进度条的最小值</span>
	<span class="nl">max:</span><span class="n">进度条的最大值</span>
</code></pre></div></div>

<p>使用 ProgressMonitor 创建的对话框里包含的进度条是非常固定的，程序甚至不能设置该进度条是否包含边框(总是包含边框) ， 不能设置进度不确定，不能改变进度条的方向(总是水平方向) 。</p>

<p><strong>案例：</strong></p>

<p>​	使用ProgressMonitor完成下图效果：</p>

<p>​	<img src="./images/ProgressMonitor.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProgressMonitorTest</span> <span class="o">{</span>

    <span class="nc">Timer</span> <span class="n">timer</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="kd">final</span> <span class="nc">SimulatedActivity</span> <span class="n">simulatedActivity</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimulatedActivity</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
        <span class="kd">final</span> <span class="nc">Thread</span> <span class="n">targetThread</span><span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">);</span>
        <span class="n">targetThread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>


        <span class="nc">ProgressMonitor</span> <span class="n">dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ProgressMonitor</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s">"等待任务完成"</span><span class="o">,</span> <span class="s">"已完成："</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">simulatedActivity</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>

        <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Timer</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">dialog</span><span class="o">.</span><span class="na">setProgress</span><span class="o">(</span><span class="n">simulatedActivity</span><span class="o">.</span><span class="na">getCurrent</span><span class="o">());</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">dialog</span><span class="o">.</span><span class="na">isCanceled</span><span class="o">()){</span>
                    <span class="n">timer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
                    <span class="n">targetThread</span><span class="o">.</span><span class="na">interrupt</span><span class="o">();</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">timer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>


        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"aaa"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ProgressMonitorTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">//定义一个线程任务，模拟耗时操作</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">SimulatedActivity</span> <span class="kd">implements</span> <span class="nc">Runnable</span><span class="o">{</span>
        <span class="c1">//内存可见</span>
        <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">amount</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">SimulatedActivity</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCurrent</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">current</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCurrent</span><span class="o">(</span><span class="kt">int</span> <span class="n">current</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">;</span>
        <span class="o">}</span>


        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getAmount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAmount</span><span class="o">(</span><span class="kt">int</span> <span class="n">amount</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">=</span> <span class="n">amount</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//通过循环，不断的修改current的值，模拟任务完成量</span>
            <span class="k">while</span><span class="o">(</span><span class="n">current</span><span class="o">&lt;</span><span class="n">amount</span><span class="o">){</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="n">current</span><span class="o">++;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h2 id="35-jlistjcombobox实现列表框">3.5 JList、JComboBox实现列表框</h2>

<p>无论从哪个角度来看， JList 和 JComboBox 都是极其相似的，它们都有一个列表框，只是 JComboBox的列表框需要 以下拉方式显示出来; JList 和 JComboBox 都可以通过调用 setRendererO方法来改变列表项的表现形式 。甚至维护这两个组件的 Model 都是相似的， JList 使用 ListModel, JComboBox 使用ComboBoxModel ，而 ComboBoxModel 是 ListModel 的子类 。</p>

<h3 id="351-简单列表框">3.5.1 简单列表框</h3>

<p>使用JList或JComboBox实现简单列表框的步骤：</p>

<ol>
  <li>创建JList或JComboBox对象</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JList</span><span class="o">(</span><span class="kd">final</span> <span class="no">E</span><span class="o">[]</span> <span class="n">listData</span><span class="o">):</span><span class="n">创建JList对象</span><span class="err">，</span><span class="n">把listData数组中的每项内容转换成一个列表项展示</span>
<span class="nc">JList</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Vector</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">listData</span><span class="o">):</span><span class="n">创建JList对象</span><span class="err">，</span><span class="n">把listData数组中的每项内容转换成一个列表项展示</span>
<span class="nc">JComboBox</span><span class="o">(</span><span class="no">E</span><span class="o">[]</span> <span class="n">items</span><span class="o">):</span>
<span class="nc">JComboBox</span><span class="o">(</span><span class="nc">Vector</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="n">items</span><span class="o">):</span>
</code></pre></div></div>

<ol>
  <li>设置JList或JComboBox的外观行为</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">---------------------------</span><span class="nc">JList</span><span class="o">----------------------------------------------</span>
<span class="n">addSelectionInterval</span><span class="o">(</span><span class="kt">int</span> <span class="n">anchor</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lead</span><span class="o">):</span><span class="n">在已经选中列表项的基础上</span><span class="err">，</span><span class="n">增加选中从anchor到lead索引范围内的所有列表项</span>
<span class="n">setFixedCellHeight</span><span class="o">(</span><span class="kt">int</span> <span class="n">height</span><span class="o">)/</span><span class="n">setFixedCellWidth</span><span class="o">(</span><span class="kt">int</span> <span class="n">width</span><span class="o">):</span><span class="n">设置列表项的高度和宽度</span>
<span class="n">setLayoutOrientation</span><span class="o">(</span><span class="kt">int</span> <span class="n">layoutOrientation</span><span class="o">)</span><span class="err">：</span><span class="n">设置列表框的布局方向</span>
<span class="n">setSelectedIndex</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span><span class="err">：</span><span class="n">设置默认选中项</span>
<span class="n">setSelectedIndices</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span><span class="o">)</span><span class="err">：</span><span class="n">设置默认选中的多个列表项</span>
<span class="n">setSelectedValue</span><span class="o">(</span><span class="nc">Object</span> <span class="n">anObject</span><span class="o">,</span><span class="kt">boolean</span> <span class="n">shouldScroll</span><span class="o">)</span><span class="err">：</span><span class="n">设置默认选中项</span><span class="err">，</span><span class="n">并滚动到该项显示</span>
<span class="n">setSelectionBackground</span><span class="o">(</span><span class="nc">Color</span> <span class="n">selectionBackground</span><span class="o">)</span><span class="err">：</span><span class="n">设置选中项的背景颜色</span>
<span class="n">setSelectionForeground</span><span class="o">(</span><span class="nc">Color</span> <span class="n">selectionForeground</span><span class="o">)</span><span class="err">：</span><span class="n">设置选中项的前景色</span>
<span class="n">setSelectionInterval</span><span class="o">(</span><span class="kt">int</span> <span class="n">anchor</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lead</span><span class="o">):</span><span class="n">设置从anchor到lead范围内的所有列表项被选中</span>
<span class="n">setSelectionMode</span><span class="o">(</span><span class="kt">int</span> <span class="n">selectionMode</span><span class="o">)</span><span class="err">：</span><span class="n">设置选中模式</span><span class="err">，</span><span class="n">默认没有限制</span><span class="err">，</span><span class="n">也可以设置为单选或者区域选中</span>
<span class="n">setVisibleRowCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">visibleRowCount</span><span class="o">)</span><span class="err">：</span><span class="n">设置列表框的可是高度足以显示多少行列表项</span>
<span class="o">---------------------------</span><span class="nc">JComboBox</span><span class="o">----------------------------------------------</span> 
<span class="n">setEditable</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">aFlag</span><span class="o">)</span><span class="err">：</span><span class="n">设置是否可以直接修改列表文本框的值</span><span class="err">，</span><span class="n">默认为不可以</span>
<span class="n">setMaximumRowCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span><span class="err">：</span><span class="n">设置列表框的可是高度足以显示多少行列表项</span>
<span class="n">setSelectedIndex</span><span class="o">(</span><span class="kt">int</span> <span class="n">anIndex</span><span class="o">)</span><span class="err">：</span><span class="n">设置默认选中项</span>
<span class="n">setSelectedItem</span><span class="o">(</span><span class="nc">Object</span> <span class="n">anObject</span><span class="o">)</span><span class="err">：</span><span class="n">根据列表项的值</span><span class="err">，</span><span class="n">设置默认选中项</span>
</code></pre></div></div>

<ol>
  <li>设置监听器，监听列表项的变化，JList通过addListSelectionListener完成，JComboBox通过addItemListener完成</li>
</ol>

<p><strong>案例：</strong></p>

<p>​	使用JList和JComboBox完成下图效果：</p>

<p>​	<img src="./images/JList_JComboBox.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.border.EtchedBorder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.border.TitledBorder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ListSelectionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ListSelectionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ItemEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ItemListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Vector</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">mainWin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"列表框测试"</span><span class="o">);</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">books</span> <span class="o">=</span> <span class="o">{</span><span class="s">"java自学宝典"</span><span class="o">,</span><span class="s">"轻量级javaEE企业应用实战"</span><span class="o">,</span><span class="s">"Android基础教程"</span><span class="o">,</span><span class="s">"jQuery实战教程"</span><span class="o">,</span><span class="s">"SpringBoot企业级开发"</span><span class="o">};</span>

    <span class="c1">//用一个字符串数组来创建一个JList对象</span>
    <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">bookList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;&gt;(</span><span class="n">books</span><span class="o">);</span>
    <span class="nc">JComboBox</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">bookSelector</span><span class="o">;</span>

    <span class="c1">//定义 布局选择按钮 所在的面板</span>
    <span class="nc">JPanel</span> <span class="n">layoutPanel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
    <span class="nc">ButtonGroup</span> <span class="n">layoutGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ButtonGroup</span><span class="o">();</span>

    <span class="c1">//定义 选择模式按钮 所在面板</span>
    <span class="nc">JPanel</span> <span class="n">selectModePanel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
    <span class="nc">ButtonGroup</span> <span class="n">selectModeGroup</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ButtonGroup</span><span class="o">();</span>

    <span class="nc">JTextArea</span> <span class="n">favorite</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">40</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//设置JList的可视高度可以同时展示3个列表项</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">setVisibleRowCount</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>

        <span class="c1">//设置Jlist默认选中第三项到第五项</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">setSelectionInterval</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">4</span><span class="o">);</span>
        <span class="n">addLayoutButton</span><span class="o">(</span><span class="s">"纵向滚动"</span><span class="o">,</span><span class="nc">JList</span><span class="o">.</span><span class="na">VERTICAL</span><span class="o">);</span>
        <span class="n">addLayoutButton</span><span class="o">(</span><span class="s">"纵向换行"</span><span class="o">,</span><span class="nc">JList</span><span class="o">.</span><span class="na">VERTICAL_WRAP</span><span class="o">);</span>
        <span class="n">addLayoutButton</span><span class="o">(</span><span class="s">"横向换行"</span><span class="o">,</span><span class="nc">JList</span><span class="o">.</span><span class="na">HORIZONTAL_WRAP</span><span class="o">);</span>

        <span class="n">addSelectModeButton</span><span class="o">(</span><span class="s">"无限制"</span><span class="o">,</span> <span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">MULTIPLE_INTERVAL_SELECTION</span><span class="o">);</span>
        <span class="n">addSelectModeButton</span><span class="o">(</span><span class="s">"单选"</span><span class="o">,</span> <span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">SINGLE_SELECTION</span><span class="o">);</span>
        <span class="n">addSelectModeButton</span><span class="o">(</span><span class="s">"单范围"</span><span class="o">,</span> <span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">SINGLE_INTERVAL_SELECTION</span><span class="o">);</span>

        <span class="nc">Box</span> <span class="n">listBox</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createVerticalBox</span><span class="o">();</span>
        <span class="c1">//将JList组件放置到JScrollPane中，并将JScrollPane放置到box中</span>
        <span class="n">listBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">bookList</span><span class="o">));</span>
        <span class="n">listBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">layoutPanel</span><span class="o">);</span>
        <span class="n">listBox</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">selectModePanel</span><span class="o">);</span>

        <span class="c1">//为JList添加事件监听器</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">addListSelectionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ListSelectionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">valueChanged</span><span class="o">(</span><span class="nc">ListSelectionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">selectedValuesList</span> <span class="o">=</span> <span class="n">bookList</span><span class="o">.</span><span class="na">getSelectedValuesList</span><span class="o">();</span>
                <span class="n">favorite</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
                <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">selectedValuesList</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">favorite</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">s</span><span class="o">+</span><span class="s">"\n"</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="c1">//定义一个Vector对象</span>
        <span class="nc">Vector</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">bookCollection</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Vector</span><span class="o">&lt;&gt;();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">books</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"java自学宝典"</span><span class="o">,</span><span class="s">"轻量级javaEE企业应用实战"</span><span class="o">,</span><span class="s">"Android基础教程"</span><span class="o">,</span><span class="s">"jQuery实战教程"</span><span class="o">,</span><span class="s">"SpringBoot企业级开发"</span><span class="o">);</span>
        <span class="n">bookCollection</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">books</span><span class="o">);</span>

        <span class="c1">//创建JComboBox对象</span>
        <span class="n">bookSelector</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JComboBox</span><span class="o">&lt;&gt;(</span><span class="n">bookCollection</span><span class="o">);</span>

        <span class="c1">//为JComboBox添加事件监听器</span>
        <span class="n">bookSelector</span><span class="o">.</span><span class="na">addItemListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ItemListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">itemStateChanged</span><span class="o">(</span><span class="nc">ItemEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Object</span> <span class="n">selectedItem</span> <span class="o">=</span> <span class="n">bookSelector</span><span class="o">.</span><span class="na">getSelectedItem</span><span class="o">();</span>
                <span class="n">favorite</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">selectedItem</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//设置JComboBox的列表项可编辑</span>
        <span class="n">bookSelector</span><span class="o">.</span><span class="na">setEditable</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//设置下拉列表的可视高度最多显示4个列表项</span>
        <span class="n">bookSelector</span><span class="o">.</span><span class="na">setMaximumRowCount</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

        <span class="nc">JPanel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bookSelector</span><span class="o">);</span>
        <span class="nc">Box</span> <span class="n">box</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">listBox</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">panel</span><span class="o">);</span>

        <span class="nc">JPanel</span> <span class="n">favoritePanel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">favoritePanel</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">BorderLayout</span><span class="o">());</span>
        <span class="n">favoritePanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">favorite</span><span class="o">));</span>
        <span class="n">favoritePanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JLabel</span><span class="o">(</span><span class="s">"您最喜欢的图书："</span><span class="o">),</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>

        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">box</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">favoritePanel</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>



    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addLayoutButton</span><span class="o">(</span><span class="nc">String</span> <span class="n">label</span><span class="o">,</span><span class="kt">int</span> <span class="n">orientation</span><span class="o">){</span>
        <span class="n">layoutPanel</span><span class="o">.</span><span class="na">setBorder</span><span class="o">(</span><span class="k">new</span> <span class="nc">TitledBorder</span><span class="o">(</span><span class="k">new</span> <span class="nc">EtchedBorder</span><span class="o">(),</span><span class="s">"确定选项布局"</span><span class="o">));</span>

        <span class="nc">JRadioButton</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButton</span><span class="o">(</span><span class="n">label</span><span class="o">);</span>

        <span class="n">layoutPanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">);</span>
        <span class="c1">//默认选中第一个按钮</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">layoutGroup</span><span class="o">.</span><span class="na">getButtonCount</span><span class="o">()==</span><span class="mi">0</span><span class="o">){</span>
            <span class="n">button</span><span class="o">.</span><span class="na">setSelected</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">layoutGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">);</span>
        <span class="n">button</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span><span class="o">-&gt;{</span>
            <span class="c1">//改变列表框里列表项的布局方向</span>
            <span class="n">bookList</span><span class="o">.</span><span class="na">setLayoutOrientation</span><span class="o">(</span><span class="n">orientation</span><span class="o">);</span>
        <span class="o">});</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSelectModeButton</span><span class="o">(</span><span class="nc">String</span> <span class="n">label</span><span class="o">,</span><span class="kt">int</span> <span class="n">selectMode</span><span class="o">){</span>
        <span class="n">selectModePanel</span><span class="o">.</span><span class="na">setBorder</span><span class="o">(</span><span class="k">new</span> <span class="nc">TitledBorder</span><span class="o">(</span><span class="k">new</span> <span class="nc">EtchedBorder</span><span class="o">(),</span><span class="s">"确定选择模式"</span><span class="o">));</span>
        <span class="nc">JRadioButton</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButton</span><span class="o">(</span><span class="n">label</span><span class="o">);</span>
        <span class="n">selectModePanel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">selectModeGroup</span><span class="o">.</span><span class="na">getButtonCount</span><span class="o">()==</span><span class="mi">0</span><span class="o">){</span>
            <span class="n">button</span><span class="o">.</span><span class="na">setSelected</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">selectModeGroup</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">button</span><span class="o">);</span>
        <span class="n">button</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span><span class="o">-&gt;{</span>
            <span class="n">bookList</span><span class="o">.</span><span class="na">setSelectionMode</span><span class="o">(</span><span class="n">selectMode</span><span class="o">);</span>
        <span class="o">});</span>


    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ListTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="352-不强制存储列表项的listmodel和comboboxmodel">3.5.2 不强制存储列表项的ListModel和ComboBoxModel</h3>

<p>与JProgressBar一样，JList和JComboBox也采用了MVC的设计模式，JList和JComboBox只负责外观的显示，而组件底层的状态数据则由对应的Model来维护。JList对应的Model是ListModel接口，JComboBox对应的Model是ComboBox接口，其代码如下：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ListModel</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;{</span>

  <span class="kt">int</span> <span class="nf">getSize</span><span class="o">();</span>

  <span class="no">E</span> <span class="nf">getElementAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">);</span>

  <span class="kt">void</span> <span class="nf">addListDataListener</span><span class="o">(</span><span class="nc">ListDataListener</span> <span class="n">l</span><span class="o">);</span>

  <span class="kt">void</span> <span class="nf">removeListDataListener</span><span class="o">(</span><span class="nc">ListDataListener</span> <span class="n">l</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ComboBoxModel</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">ListModel</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kt">void</span> <span class="nf">setSelectedItem</span><span class="o">(</span><span class="nc">Object</span> <span class="n">anItem</span><span class="o">);</span>

  <span class="nc">Object</span> <span class="nf">getSelectedItem</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>从上面接口来看，这个 ListMode l 不管 JList 里的所有列表项的存储形式，它甚至不强制存储所有的列表项，只要 ListModel的实现类提供了getSize()和 getElementAt()两个方法 ， JList 就可以根据该ListModel 对象来生成列表框 。ComboBoxModel 继承了 ListModel ，它添加了”选择项”的概念，选择项代表 JComboBox 显示区域内可见的列表项 。</p>

<p>在使用JList和JComboBox时，除了可以使用jdk提供的Model实现类，程序员自己也可以根据需求，自己定义Model的实现类，实现对应的方法使用。</p>

<p><strong>案例：</strong></p>

<p>​	自定义NumberListModel和NumberComboBoxModel实现类，允许使用数值范围来创建JList和JComboBox</p>

<p>​	<img src="./images/ListModelTest.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.RoundingMode</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberListModel</span> <span class="kd">extends</span> <span class="nc">AbstractListModel</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">protected</span> <span class="nc">BigDecimal</span> <span class="n">start</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">BigDecimal</span> <span class="n">end</span><span class="o">;</span>
    <span class="kd">protected</span> <span class="nc">BigDecimal</span> <span class="n">step</span><span class="o">;</span>


    <span class="kd">public</span> <span class="nf">NumberListModel</span><span class="o">(</span><span class="kt">double</span> <span class="n">start</span><span class="o">,</span><span class="kt">double</span> <span class="n">end</span><span class="o">,</span><span class="kt">double</span> <span class="n">step</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="n">start</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">end</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="n">end</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">step</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BigDecimal</span><span class="o">(</span><span class="n">step</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">floor</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="nc">Math</span><span class="o">.</span><span class="na">floor</span><span class="o">(</span><span class="n">end</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="n">start</span><span class="o">).</span><span class="na">divide</span><span class="o">(</span><span class="n">step</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span> <span class="nc">RoundingMode</span><span class="o">.</span><span class="na">HALF_DOWN</span><span class="o">).</span><span class="na">doubleValue</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">floor</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">BigDecimal</span> <span class="nf">getElementAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">index</span><span class="o">).</span><span class="na">multiply</span><span class="o">(</span><span class="n">step</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">start</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="nc">RoundingMode</span><span class="o">.</span><span class="na">HALF_DOWN</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>




<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.RoundingMode</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumberComboBoxModel</span> <span class="kd">extends</span> <span class="nc">NumberListModel</span> <span class="kd">implements</span> <span class="nc">ComboBoxModel</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">//用于保存用户选中项的索引</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">selectId</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">NumberComboBoxModel</span><span class="o">(</span><span class="kt">double</span> <span class="n">start</span><span class="o">,</span> <span class="kt">double</span> <span class="n">end</span><span class="o">,</span> <span class="kt">double</span> <span class="n">step</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">end</span><span class="o">,</span> <span class="n">step</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">//设置选择项</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSelectedItem</span><span class="o">(</span><span class="nc">Object</span> <span class="n">anItem</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">anItem</span> <span class="k">instanceof</span> <span class="nc">BigDecimal</span><span class="o">){</span>
            <span class="nc">BigDecimal</span> <span class="n">target</span> <span class="o">=</span> <span class="o">(</span><span class="nc">BigDecimal</span><span class="o">)</span> <span class="n">anItem</span><span class="o">;</span>
            <span class="n">selectId</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="na">subtract</span><span class="o">(</span><span class="kd">super</span><span class="o">.</span><span class="na">start</span><span class="o">).</span><span class="na">divide</span><span class="o">(</span><span class="kd">super</span><span class="o">.</span><span class="na">step</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span> <span class="nc">RoundingMode</span><span class="o">.</span><span class="na">HALF_DOWN</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">//获取选中项的索引</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">BigDecimal</span> <span class="nf">getSelectedItem</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">selectId</span><span class="o">).</span><span class="na">multiply</span><span class="o">(</span><span class="n">step</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">start</span><span class="o">).</span><span class="na">setScale</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="nc">RoundingMode</span><span class="o">.</span><span class="na">HALF_DOWN</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>


<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ListSelectionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.ListSelectionListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ItemEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ItemListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListModelTest</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">mainWin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试ListModel"</span><span class="o">);</span>

    <span class="c1">//根据NumberListModel对象创建一个JList</span>
    <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="n">numScopeList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;&gt;(</span><span class="k">new</span> <span class="nc">NumberListModel</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">21</span><span class="o">,</span><span class="mi">2</span><span class="o">));</span>

    <span class="c1">//根据NumberComboBoxModel对象创建一个JComboBox</span>
    <span class="nc">JComboBox</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="n">numScopeSelector</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JComboBox</span><span class="o">&lt;&gt;(</span><span class="k">new</span> <span class="nc">NumberComboBoxModel</span><span class="o">(</span><span class="mf">0.1</span><span class="o">,</span><span class="mf">1.2</span><span class="o">,</span><span class="mf">0.1</span><span class="o">));</span>

    <span class="nc">JTextField</span> <span class="n">showVal</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextField</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//JList可视高度可同时显示四个列表项</span>
        <span class="n">numScopeList</span><span class="o">.</span><span class="na">setVisibleRowCount</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

        <span class="c1">//默认选中第三项到第五项</span>
        <span class="n">numScopeList</span><span class="o">.</span><span class="na">setSelectionInterval</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">4</span><span class="o">);</span>

        <span class="c1">//设置每个列表项具有指定高度和宽度</span>
        <span class="n">numScopeList</span><span class="o">.</span><span class="na">setFixedCellHeight</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>
        <span class="n">numScopeList</span><span class="o">.</span><span class="na">setFixedCellWidth</span><span class="o">(</span><span class="mi">90</span><span class="o">);</span>

        <span class="c1">//为numScopeList添加监听器</span>
        <span class="n">numScopeList</span><span class="o">.</span><span class="na">addListSelectionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ListSelectionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">valueChanged</span><span class="o">(</span><span class="nc">ListSelectionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//获取用户选中的所有数字</span>
                <span class="nc">List</span><span class="o">&lt;</span><span class="nc">BigDecimal</span><span class="o">&gt;</span> <span class="n">selectedValuesList</span> <span class="o">=</span> <span class="n">numScopeList</span><span class="o">.</span><span class="na">getSelectedValuesList</span><span class="o">();</span>
                <span class="n">showVal</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
                <span class="k">for</span> <span class="o">(</span><span class="nc">BigDecimal</span> <span class="n">bigDecimal</span> <span class="o">:</span> <span class="n">selectedValuesList</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">showVal</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">showVal</span><span class="o">.</span><span class="na">getText</span><span class="o">()+</span><span class="n">bigDecimal</span><span class="o">.</span><span class="na">toString</span><span class="o">()+</span><span class="s">", "</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//设置下拉列表的可视高度可显示5个列表项</span>
        <span class="n">numScopeSelector</span><span class="o">.</span><span class="na">setMaximumRowCount</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>

        <span class="nc">Box</span> <span class="n">box</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">numScopeList</span><span class="o">));</span>

        <span class="nc">JPanel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">numScopeSelector</span><span class="o">);</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>

        <span class="c1">//为numberScopeSelector添加监听器</span>
        <span class="n">numScopeSelector</span><span class="o">.</span><span class="na">addItemListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ItemListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">itemStateChanged</span><span class="o">(</span><span class="nc">ItemEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">numScopeSelector</span><span class="o">.</span><span class="na">getSelectedItem</span><span class="o">();</span>
                <span class="n">showVal</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">});</span>


        <span class="nc">JPanel</span> <span class="n">bottom</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">bottom</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JLabel</span><span class="o">(</span><span class="s">"您选择的值是："</span><span class="o">));</span>
        <span class="n">bottom</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">showVal</span><span class="o">);</span>

        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">box</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bottom</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ListModelTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="353-强制存储列表项的defaultlistmodel和defaultcomboboxmodel">3.5.3 强制存储列表项的DefaultListModel和DefaultComboBoxModel</h3>

<p>前面只是介绍了如何创建 JList 、 JComboBox 对象， 当 调用 JList 和 JComboBox构造方法时时传入数组或 Vector 作为参数，这些数组元素或集合元素将会作为列表项。当使用JList 或 JComboBox 时 常常还需要动态地增加、删除列表项,例如JCombox提供了下列方法完成增删操作：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">addItem</span><span class="o">(</span><span class="no">E</span> <span class="n">item</span><span class="o">):</span><span class="n">添加一个列表项</span>
<span class="n">insertItemAt</span><span class="o">(</span><span class="no">E</span> <span class="n">item</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">)</span><span class="err">：</span><span class="n">向指定索引处插入一个列表项</span>
<span class="n">removeAllItems</span><span class="o">()</span><span class="err">：</span><span class="n">删除所有列表项</span>
<span class="n">removeItem</span><span class="o">(</span><span class="nc">Object</span> <span class="n">anObject</span><span class="o">)</span><span class="err">：</span><span class="n">删除指定列表项</span>
<span class="n">removeItemAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">anIndex</span><span class="o">)</span><span class="err">：</span><span class="n">删除指定索引处的列表项</span>
</code></pre></div></div>

<p>JList 并没有提供这些类似的方法。如果需要创建一个可以增加、删除列表项的 JList 对象，则应该在创建 JLi st 时显式使用 DefaultListModel作为构造参数 。因为 DefaultListModel 作为 JList 的 Model，它负责维护 JList 组件的所有列表数据，所以可以通过向 DefaultListModel 中添加、删除元素来实现向 JList 对象中增加 、删除列表项 。DefaultListModel 提供了如下几个方法来添加、删除元素:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">):</span> <span class="n">在该</span> <span class="nc">ListModel</span> <span class="n">的指定位置处插入指定元素</span> <span class="err">。</span>
<span class="n">addElement</span><span class="o">(</span><span class="no">E</span> <span class="n">obj</span><span class="o">):</span> <span class="n">将指定元素添加到该</span> <span class="nc">ListModel</span> <span class="n">的末尾</span> <span class="err">。</span>
<span class="n">insertElementAt</span><span class="o">(</span><span class="no">E</span> <span class="n">obj</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">):</span> <span class="n">在该</span> <span class="nc">ListModel</span> <span class="n">的指定位置处插入指定元素</span> <span class="err">。</span>
<span class="nc">Object</span> <span class="nf">remove</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">):</span> <span class="n">删除该</span> <span class="nc">ListModel</span> <span class="n">中指定位置处的元素</span> 
<span class="n">removeAllElements</span><span class="o">():</span> <span class="n">删</span> <span class="n">除该</span> <span class="nc">ListModel</span> <span class="n">中的所有元素</span><span class="err">，</span><span class="n">并将其的大小设置为零</span> <span class="err">。</span>
<span class="n">removeElement</span><span class="o">(</span><span class="no">E</span> <span class="n">obj</span><span class="o">):</span> <span class="n">删除该</span> <span class="nc">ListModel</span> <span class="n">中第一个与参数匹配的元素</span><span class="err">。</span>
<span class="n">removeElementAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">):</span> <span class="n">删除该</span> <span class="nc">ListModel</span> <span class="n">中指定索引处的元素</span> <span class="err">。</span>
<span class="n">removeRange</span><span class="o">(</span><span class="kt">int</span> <span class="n">企omIndex</span> <span class="err">，</span> <span class="kt">int</span> <span class="n">toIndex</span><span class="o">):</span> <span class="n">删除该</span> <span class="nc">ListModel</span> <span class="n">中指定范围内的所有元素</span><span class="err">。</span>
<span class="n">set</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="no">E</span> <span class="n">element</span><span class="o">)</span> <span class="o">:</span> <span class="n">将该</span> <span class="nc">ListModel</span> <span class="n">指定索引处的元素替换成指定元素</span><span class="err">。</span>
<span class="n">setElementAt</span><span class="o">(</span><span class="no">E</span> <span class="n">obj</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">):</span> <span class="n">将该</span> <span class="nc">ListModel</span> <span class="n">指定索引处的元素替换成指定元素</span><span class="err">。</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用DefaultListModel完成下图效果：</p>

<p>​	<img src="./images/DefaultListModel.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.ActionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultListModelTest</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">mainWin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"测试DefaultListModel"</span><span class="o">);</span>

    <span class="c1">//定义一个JList对象</span>
    <span class="nc">JList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">bookList</span><span class="o">;</span>
    <span class="c1">//定义一个DefaultListModel对象</span>
    <span class="nc">DefaultListModel</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">bookModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultListModel</span><span class="o">&lt;&gt;();</span>

    <span class="nc">JTextField</span> <span class="n">bookName</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextField</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>

    <span class="nc">JButton</span> <span class="n">removeBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"删除选中图书"</span><span class="o">);</span>
    <span class="nc">JButton</span> <span class="n">addBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"添加指定图书"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//向bookModel中添加元素</span>
        <span class="n">bookModel</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"java自学宝典"</span><span class="o">);</span>
        <span class="n">bookModel</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"轻量级javaEE企业应用实战"</span><span class="o">);</span>
        <span class="n">bookModel</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"Android基础教程"</span><span class="o">);</span>
        <span class="n">bookModel</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"jQuery实战教程"</span><span class="o">);</span>
        <span class="n">bookModel</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"SpringBoot企业级开发"</span><span class="o">);</span>

        <span class="c1">//根据DefaultListModel创建一个JList对象</span>
        <span class="n">bookList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JList</span><span class="o">&lt;&gt;(</span><span class="n">bookModel</span><span class="o">);</span>
        <span class="c1">//设置最大可视高度</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">setVisibleRowCount</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

        <span class="c1">//设置只能单选</span>
        <span class="n">bookList</span><span class="o">.</span><span class="na">setSelectionMode</span><span class="o">(</span><span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">SINGLE_SELECTION</span><span class="o">);</span>

        <span class="c1">//为addBtn添加事件监听器</span>
        <span class="n">addBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//当bookName文本框内容不为空时添加列表项</span>
                <span class="k">if</span> <span class="o">(!</span><span class="n">bookName</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">trim</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">""</span><span class="o">)){</span>

                    <span class="n">bookModel</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="n">bookName</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
                <span class="o">}</span>

            <span class="o">}</span>
        <span class="o">});</span>

        <span class="c1">//为removeBtn添加事件监听器</span>
        <span class="n">removeBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">ActionListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="nc">ActionEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">selectedIndex</span> <span class="o">=</span> <span class="n">bookList</span><span class="o">.</span><span class="na">getSelectedIndex</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">selectedIndex</span><span class="o">&gt;=</span><span class="mi">0</span><span class="o">){</span>

                    <span class="n">bookModel</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">selectedIndex</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="nc">JPanel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bookName</span><span class="o">);</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addBtn</span><span class="o">);</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">removeBtn</span><span class="o">);</span>

        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">bookList</span><span class="o">));</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">DefaultListModelTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div></div>

<h3 id="354-使用listcellrenderer改变列表外观">3.5.4 使用ListCellRenderer改变列表外观</h3>

<p>前面程序中的 JList 和 JComboBox 采用的都是简单的字符串列表项， 实际上 ， JList 和 JComboBox还可以支持图标列表项，如果在创建 JList 或 JComboBox 时传入图标数组，则创建的 JList 和 JComboBox的列表项就是图标 。</p>

<p>如果希望列表项是更复杂 的组件，例如，希望像 QQ 程序那样每个列表项既有图标，此时需要使用ListCellRenderer接口的实现类对象，自定义每个条目组件的渲染过程：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ListCellRenderer</span><span class="o">&lt;</span><span class="no">E</span><span class="o">&gt;</span>
<span class="o">{</span>
    <span class="nc">Component</span> <span class="nf">getListCellRendererComponent</span><span class="o">(</span>
        <span class="nc">JList</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">E</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span><span class="c1">//列表组件</span>
        <span class="no">E</span> <span class="n">value</span><span class="o">,</span><span class="c1">//当前列表项的值额索引</span>
        <span class="kt">int</span> <span class="n">index</span><span class="o">,</span><span class="c1">//当前列表项d</span>
        <span class="kt">boolean</span> <span class="n">isSelected</span><span class="o">,</span><span class="c1">//当前列表项是否被选中</span>
        <span class="kt">boolean</span> <span class="n">cellHasFocus</span><span class="o">);</span><span class="c1">//当前列表项是否获取了焦点</span>
<span class="o">}</span>
</code></pre></div></div>

<p>通过JList的<code class="language-plaintext highlighter-rouge">setCellRenderer(ListCellRenderer&lt;? super E&gt; cellRenderer)</code>方法，把自定义的ListCellRenderer对象传递给JList，就可以按照自定义的规则绘制列表项组件了。</p>

<p><strong>案例：</strong></p>

<p>​	使用ListCellRenderer实现下图效果：</p>

<p>​	<img src="./images/ListCellRenderer.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListCellRendererTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">JFrame</span> <span class="n">mainWin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"好友列表"</span><span class="o">);</span>

    <span class="kd">private</span> <span class="nc">String</span><span class="o">[]</span> <span class="n">friends</span> <span class="o">=</span> <span class="o">{</span>
            <span class="s">"李清照"</span><span class="o">,</span>
            <span class="s">"苏格拉底"</span><span class="o">,</span>
            <span class="s">"李白"</span><span class="o">,</span>
            <span class="s">"弄玉"</span><span class="o">,</span>
            <span class="s">"虎头"</span>
    <span class="o">};</span>

    <span class="c1">//定义一个JList对象</span>
    <span class="nc">JList</span> <span class="n">friendsList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JList</span><span class="o">(</span><span class="n">friends</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//设置JList使用ImageCellRenderer作为列表项绘制器</span>
        <span class="n">friendsList</span><span class="o">.</span><span class="na">setCellRenderer</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageCellRenderer</span><span class="o">());</span>

        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">friendsList</span><span class="o">));</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ListCellRendererTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">class</span> <span class="nc">ImageCellRenderer</span> <span class="kd">extends</span> <span class="nc">JPanel</span> <span class="kd">implements</span> <span class="nc">ListCellRenderer</span> <span class="o">{</span>


        <span class="kd">private</span> <span class="nc">ImageIcon</span> <span class="n">icon</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
        <span class="c1">//定义绘制单元格的背景色</span>
        <span class="kd">private</span> <span class="nc">Color</span> <span class="n">background</span><span class="o">;</span>
        <span class="c1">//定义绘制单元格的前景色</span>
        <span class="kd">private</span> <span class="nc">Color</span> <span class="n">foreground</span><span class="o">;</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Component</span> <span class="nf">getListCellRendererComponent</span><span class="o">(</span><span class="nc">JList</span> <span class="n">list</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">,</span> <span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isSelected</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">cellHasFocus</span><span class="o">)</span> <span class="o">{</span>

            <span class="n">icon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"9\\"</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s">".gif"</span><span class="o">));</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
            <span class="n">background</span> <span class="o">=</span> <span class="n">isSelected</span> <span class="o">?</span> <span class="n">list</span><span class="o">.</span><span class="na">getSelectionBackground</span><span class="o">()</span> <span class="o">:</span> <span class="n">list</span><span class="o">.</span><span class="na">getBackground</span><span class="o">();</span>
            <span class="n">foreground</span> <span class="o">=</span> <span class="n">isSelected</span> <span class="o">?</span> <span class="n">list</span><span class="o">.</span><span class="na">getSelectionForeground</span><span class="o">()</span> <span class="o">:</span> <span class="n">list</span><span class="o">.</span><span class="na">getForeground</span><span class="o">();</span>

            <span class="c1">//返回当前JPanel对象，作为列表项绘制器</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">paintComponent</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="n">icon</span><span class="o">.</span><span class="na">getImage</span><span class="o">().</span><span class="na">getWidth</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="n">icon</span><span class="o">.</span><span class="na">getImage</span><span class="o">().</span><span class="na">getHeight</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>

            <span class="c1">//填充背景矩形</span>
            <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">background</span><span class="o">);</span>
            <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">getWidth</span><span class="o">(),</span><span class="n">getHeight</span><span class="o">());</span>

            <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">foreground</span><span class="o">);</span>
            <span class="c1">//绘制好友头像</span>
            <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">icon</span><span class="o">.</span><span class="na">getImage</span><span class="o">(),</span><span class="n">getWidth</span><span class="o">()/</span><span class="mi">2</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="mi">10</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>

            <span class="c1">//绘制好友昵称</span>
            <span class="n">g</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="k">new</span> <span class="nc">Font</span><span class="o">(</span><span class="s">"SansSerif"</span><span class="o">,</span><span class="nc">Font</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span><span class="mi">18</span><span class="o">));</span>
            <span class="n">g</span><span class="o">.</span><span class="na">drawString</span><span class="o">(</span><span class="n">name</span><span class="o">,</span><span class="n">getWidth</span><span class="o">()/</span><span class="mi">2</span><span class="o">-</span><span class="n">name</span><span class="o">.</span><span class="na">length</span><span class="o">()*</span><span class="mi">10</span><span class="o">,</span><span class="n">height</span><span class="o">+</span><span class="mi">30</span><span class="o">);</span>
        <span class="o">}</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Dimension</span> <span class="nf">getPreferredSize</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">Dimension</span><span class="o">(</span><span class="mi">60</span><span class="o">,</span><span class="mi">80</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="36-jtreetreemodel实现树">3.6 JTree、TreeModel实现树</h2>

<p>树也是图形用户界面中使用非常广泛的 GUI 组件，例如使用 Windows 资源管理器时，将看到如下图所示的目录树:</p>

<p><img src="./images/目录树.jpg" alt="" /></p>

<p>如上图所示的树，代表计算机世界里的树，它从自然界实际的树抽象而来 。 计算机世界里的树是由一系列具有严格父子关系的节点组成的，每个节点既可以是其上一级节点的子节点，也可以是其下一级节点的父节点，因此同一个节点既可以是父节点，也可以是子节点(类似于一个人，他既是他儿子的父亲，又是他父亲的儿子)。</p>

<p><strong>按照结点是否包含子结点，可以把结点分为下面两类：</strong></p>

<p>​	普通结点：包含子结点的结点；</p>

<p>​	叶子结点：没有子结点的结点；</p>

<p><strong>按照结点是否具有唯一的父结点，可以把结点分为下面两类：</strong></p>

<p>​	根结点：没有父结点的结点，计算机中，一棵树只能有一个根结点</p>

<p>​	普通结点：具有唯一父结点的结点</p>

<p>使用 Swing 里的 Jtree 、 TreeModel 及其相关的辅助类可以很轻松地开发出计算机世界里的树。</p>

<h3 id="361-创建树">3.6.1 创建树</h3>

<p>Swing 使用 JTree 对 象来代表一棵树，JTree 树中结点可以使用 TreePath 来标识，该对象封装了当前结点及其所有的父结点。</p>

<p><strong>当一个结点具有子结点时，该结点有两种状态：</strong></p>

<p>​	展开状态:当父结点处于展开状态时，其子结点是可见的；</p>

<p>​	折叠状态: 当父结点处于折叠状态时，其子结点都是不可见的 。</p>

<p>如果某个结点是可见的，则该结点的父结点(包括直接的、间接的父结点)都必须处于展开状态，只要有任意一个父结点处于折叠状态，该结点就是不可见的 。</p>

<p><strong>JTree常用构造方法：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JTree</span><span class="o">(</span><span class="nc">TreeModel</span> <span class="n">newModel</span><span class="o">):</span><span class="n">使用指定</span> <span class="n">的数据模型创建</span> <span class="nc">JTree</span> <span class="n">对象</span><span class="err">，</span><span class="n">它默认显示根结点</span><span class="err">。</span>
<span class="nc">JTree</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">root</span><span class="o">):</span> <span class="n">使用</span> <span class="n">root</span> <span class="n">作为根节</span> <span class="n">点创建</span> <span class="nc">JTree</span> <span class="n">对象</span><span class="err">，</span><span class="n">它默认显示根结点</span> <span class="err">。</span>
<span class="nc">JTree</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">root</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">asksAllowsChildren</span><span class="o">):</span> <span class="n">使用root作为根结点创建JTree对象</span><span class="err">，</span><span class="n">它默认显示根结点</span><span class="err">。</span> <span class="n">asksAllowsChildren</span> <span class="n">参数控制怎样的结点才算叶子结点</span><span class="err">，</span><span class="n">如果该参数为</span> <span class="kc">true</span> <span class="err">，</span><span class="n">则只有当程序使用</span> <span class="n">setAllowsChildren</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="n">显式设置某个结点不允许添加子结点时</span><span class="o">(</span><span class="n">以后也不会拥有子结点</span><span class="o">)</span> <span class="err">，</span><span class="n">该结点才会被</span> <span class="nc">JTree</span> <span class="nl">当成叶子结点:</span><span class="n">如果该参数为</span> <span class="kc">false</span> <span class="err">，</span><span class="n">则只要某个结点当时没有子结点</span><span class="o">(</span><span class="n">不管以后是否拥有子结点</span><span class="o">)</span> <span class="err">，</span><span class="n">该结点都会被</span> <span class="nc">JTree</span> <span class="n">当成叶子结点</span><span class="err">。</span>
</code></pre></div></div>

<p><strong>TreeNode继承体系及使用：</strong></p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/TreeNode.png" alt="" />	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/%E7%9B%AE%E5%BD%95%E6%A0%912.jpg" alt="" /></p>

<p>在构建目录树时，可以先创建很多DefaultMutableTreeNode对象，并调用他们的add方法构建好子父级结构，最后根据根结点构建一个JTree即可。</p>

<p><strong>案例：</strong></p>

<p>​	使用JTree和TreeNode完成下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/SimpleJTree.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultMutableTreeNode</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleJTree</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"简单树"</span><span class="o">);</span>

    <span class="nc">JTree</span> <span class="n">tree</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">root</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangdong</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangxi</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">foshan</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">shantou</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guilin</span><span class="o">;</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">nanning</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//依次创建所有结点</span>
        <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"中国"</span><span class="o">);</span>
        <span class="n">guangdong</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广东"</span><span class="o">);</span>
        <span class="n">guangxi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广西"</span><span class="o">);</span>
        <span class="n">foshan</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"佛山"</span><span class="o">);</span>
        <span class="n">shantou</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"汕头"</span><span class="o">);</span>
        <span class="n">guilin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"桂林"</span><span class="o">);</span>
        <span class="n">nanning</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"南宁"</span><span class="o">);</span>


        <span class="c1">//通过add()方法建立父子层级关系</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">foshan</span><span class="o">);</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">shantou</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guilin</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nanning</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangdong</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangxi</span><span class="o">);</span>

        <span class="c1">//依据根结点，创建JTree</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTree</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">tree</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SimpleJTree</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>JTree的其他外观设置方法：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tree</span><span class="o">.</span><span class="na">putClientProperty</span><span class="o">(</span> <span class="s">"JTree.lineStyle"</span><span class="o">,</span> <span class="s">"None"</span><span class="o">):</span><span class="n">设置结点之间没有连接线</span>
<span class="n">tree</span><span class="o">.</span><span class="na">putClientProperty</span><span class="o">(</span><span class="s">"JTree.lineStyle"</span> <span class="o">,</span> <span class="s">"Horizontal"</span><span class="o">)</span><span class="err">：</span><span class="n">设置结点之间只有水平分割线</span>
<span class="n">tree</span><span class="o">.</span><span class="na">setShowsRootHandles</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="err">：</span><span class="n">设置根结点有</span><span class="s">"展开、折叠"</span><span class="n">图标</span>
<span class="n">tree</span><span class="o">.</span><span class="na">setRootVisible</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span><span class="err">：</span><span class="n">隐藏根结点</span>
</code></pre></div></div>

<p><strong>DefaultMutableTreeNode其他成员方法：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Enumeration</span> <span class="n">breadthFirstEnumerationO</span><span class="o">/</span><span class="n">preorderEnumeration</span><span class="o">():</span> <span class="n">按广度优先的顺序遍历以此结点为根的子树</span><span class="err">，</span><span class="n">并返回所有结点组成的枚举对象</span> <span class="err">。</span>
<span class="nc">Enumeration</span> <span class="n">depthFirstEnumerationO</span><span class="o">/</span><span class="n">postorderEnumeration</span><span class="o">():</span> <span class="n">按深度优先的顺序遍历以此结点为根的子树</span><span class="err">，</span><span class="n">并返回所有结点组成的枚举对象</span> <span class="err">。</span>
<span class="nc">DefaultMutableTreeNode</span> <span class="nf">getNextSibling</span><span class="o">():</span> <span class="n">返回此结点的下一个兄弟结点</span> <span class="err">。</span>
<span class="nc">TreeNode</span> <span class="nf">getParent</span><span class="o">():</span> <span class="n">返回此结点的父结点</span> <span class="err">。</span> <span class="n">如果此结点没有父结点</span><span class="err">，</span><span class="n">则返回null</span> <span class="err">。</span>
<span class="nc">TreeNode</span><span class="o">[]</span> <span class="nf">getPath</span><span class="o">():</span> <span class="n">返回从根结点到达此结点的所有结点组成的数组</span><span class="err">。</span>
<span class="nc">DefaultMutableTreeNode</span> <span class="nf">getPreviousSibling</span><span class="o">():</span> <span class="n">返回此结点的上一个兄弟结点</span><span class="err">。</span>
<span class="nc">TreeNode</span> <span class="nf">getRoot</span><span class="o">():</span> <span class="n">返回包含此结点的树的根结点</span> <span class="err">。</span>
<span class="nc">TreeNode</span> <span class="nf">getSharedAncestor</span><span class="o">(</span><span class="nc">DefaultMutableTreeNode</span> <span class="n">aNode</span><span class="o">):</span> <span class="n">返回此结点和aNode最近的共同祖先</span> <span class="err">。</span>
<span class="kt">int</span> <span class="nf">getSiblingCount</span><span class="o">():</span> <span class="n">返回此结点的兄弟结点数</span> <span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isLeaf</span><span class="o">():</span> <span class="n">返回该结点是否是叶子结点</span> <span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isNodeAncestor</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">anotherNode</span><span class="o">):</span> <span class="n">判断anotherNode是否是当前结点的祖先结点</span><span class="o">(</span><span class="n">包括父结点</span><span class="o">)</span> <span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isNodeChild</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">aNode</span><span class="o">):</span> <span class="n">如果aNode是此结点的子结点</span><span class="err">，</span><span class="n">则返回true</span><span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isNodeDescendant</span><span class="o">(</span><span class="nc">DefaultMutableTreeNode</span> <span class="n">anotherNode</span><span class="o">):</span> <span class="n">如果</span> <span class="n">anotherNode</span> <span class="n">是此结点的后代</span><span class="err">，</span><span class="n">包括是此结点本身</span><span class="err">、</span><span class="n">此结点的子结点或此结点的子结点的后代</span><span class="err">，</span><span class="n">都将返回true</span> <span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isNodeRelated</span><span class="o">(</span><span class="nc">DefaultMutableTreeNode</span> <span class="n">aNode</span><span class="o">)</span> <span class="o">:</span> <span class="n">当aNode和当前结点位于同一棵树中时返回</span> <span class="kc">true</span> <span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isNodeSibling</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">anotherNode</span><span class="o">):</span> <span class="n">返回anotherNode是否是当前结点的兄弟结点</span> <span class="err">。</span>
<span class="kt">boolean</span> <span class="nf">isRoot</span><span class="o">():</span> <span class="n">返回当前结点是否是根结点</span> <span class="err">。</span>
<span class="nc">Enumeration</span> <span class="nf">pathFromAncestorEnumeration</span><span class="o">(</span><span class="nc">TreeNode</span> <span class="n">ancestor</span><span class="o">):</span> <span class="n">返回从指定祖先结点到当前结点的所有结点组成的枚举对象</span> <span class="err">。</span>
</code></pre></div></div>

<h3 id="362-拖动编辑树结点">3.6.2 拖动、编辑树结点</h3>

<p>JTree 生成的树默认是不可编辑的，不可以添加、删除结点，也不可以改变结点数据 :如果想让某个 JTree 对象变成可编辑状态，则可以调用 JTree 的setEditable(boolean b)方法，传入 true 即可把这棵树变成可编辑的树(可以添加、删除结点，也可以改变结点数据) 。</p>

<p><strong>编辑树结点的步骤：</strong></p>

<ol>
  <li>获取当前被选中的结点：</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">获取当前被选中的结点</span><span class="err">，</span><span class="n">会有两种方式</span><span class="err">：</span>
	<span class="n">一</span><span class="err">：</span>
		<span class="n">通过JTree对象的某些方法</span><span class="err">，</span><span class="n">例如</span> <span class="nc">TreePath</span> <span class="nf">getSelectionPath</span><span class="o">()</span><span class="n">等</span><span class="err">，</span><span class="n">得到一个TreePath对象</span><span class="err">，</span><span class="n">包含了从根结点到当前结点路径上的所有结点</span><span class="err">；</span>
		<span class="n">调用TreePath对象的</span> <span class="nc">Object</span> <span class="nf">getLastPathComponent</span><span class="o">()</span><span class="n">方法</span><span class="err">，</span><span class="n">得到当前选中结点</span>
	<span class="n">二</span><span class="err">：</span>
		<span class="n">调用JTree对象的</span> <span class="nc">Object</span> <span class="nf">getLastSelectedPathComponent</span><span class="o">()</span> <span class="n">方法获取当前被选中的结点</span>
</code></pre></div></div>

<ol>
  <li>调用DefaultTreeModel数据模型有关增删改的一系列方法完成编辑，方法执行完后，会自动重绘JTree</li>
</ol>

<p><strong>案例：</strong></p>

<p>​	使用JTree以及DefaultTreeModel、DefaultMutableTreeNode、TreePath完成下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/EditTree.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EditTree</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">;</span>
    <span class="nc">JTree</span> <span class="n">tree</span><span class="o">;</span>

    <span class="c1">//JTree关联的数据模型对象</span>
    <span class="nc">DefaultTreeModel</span> <span class="n">model</span><span class="o">;</span>

    <span class="c1">//定义几个初始结点</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"中国"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangdong</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广东"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangxi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广西"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">foshan</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"佛山"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">shantou</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"汕头"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guilin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"桂林"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">nanning</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"南宁"</span><span class="o">);</span>

    <span class="c1">//定义需要被拖动的TreePath</span>
    <span class="nc">TreePath</span> <span class="n">movePath</span><span class="o">;</span>

    <span class="c1">//定义按钮，完成操作</span>
    <span class="nc">JButton</span> <span class="n">addSiblingBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"添加兄弟结点"</span><span class="o">);</span>
    <span class="nc">JButton</span> <span class="n">addChildBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"添加子结点"</span><span class="o">);</span>
    <span class="nc">JButton</span> <span class="n">deleteBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"删除结点"</span><span class="o">);</span>
    <span class="nc">JButton</span> <span class="n">editBtn</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"编辑当前结点"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//通过add()方法建立父子层级关系</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">foshan</span><span class="o">);</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">shantou</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guilin</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nanning</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangdong</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangxi</span><span class="o">);</span>

        <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"可编辑结点的树"</span><span class="o">);</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTree</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>

        <span class="c1">//获取JTree关联的数据模型TreeModel对象</span>
        <span class="n">model</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultTreeModel</span><span class="o">)</span> <span class="n">tree</span><span class="o">.</span><span class="na">getModel</span><span class="o">();</span>

        <span class="c1">//设置JTree可编辑</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">setEditable</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//创建鼠标事件监听器</span>
        <span class="nc">MouseListener</span> <span class="n">ml</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MouseAdapter</span><span class="o">()</span> <span class="o">{</span>

            <span class="c1">//按下鼠标时，获得被拖动的结点</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//如果需要唯一确定某个结点，则必须通过TreePath来获取</span>
                <span class="nc">TreePath</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="na">getPathForLocation</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">());</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">tp</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                    <span class="n">movePath</span> <span class="o">=</span> <span class="n">tp</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="c1">//松开树表示，确定即将被拖入到的父结点</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseReleased</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>

                <span class="nc">TreePath</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="na">getPathForLocation</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getX</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getY</span><span class="o">());</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">tp</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">movePath</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                    <span class="c1">//阻止向子结点拖动</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">movePath</span><span class="o">.</span><span class="na">isDescendant</span><span class="o">(</span><span class="n">tp</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">movePath</span><span class="o">!=</span><span class="n">tp</span><span class="o">){</span>
                        <span class="nc">JOptionPane</span><span class="o">.</span><span class="na">showMessageDialog</span><span class="o">(</span><span class="n">jf</span><span class="o">,</span><span class="s">"目标结点是被移动结点的子结点，无法移动！"</span><span class="o">,</span><span class="s">"非法移动"</span><span class="o">,</span><span class="nc">JOptionPane</span><span class="o">.</span><span class="na">WARNING_MESSAGE</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="c1">//不是向子结点移动，并且鼠标按下和松开也不是同一个结点</span>

                    <span class="k">if</span> <span class="o">(</span><span class="n">movePath</span><span class="o">!=</span><span class="n">tp</span><span class="o">){</span>
                        <span class="c1">//add方法内部，先将该结点从原父结点删除，然后再把该结点添加到新结点中</span>
                        <span class="nc">DefaultMutableTreeNode</span> <span class="n">tartParentNode</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">tp</span><span class="o">.</span><span class="na">getLastPathComponent</span><span class="o">();</span>
                        <span class="nc">DefaultMutableTreeNode</span> <span class="n">moveNode</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">movePath</span><span class="o">.</span><span class="na">getLastPathComponent</span><span class="o">();</span>
                        <span class="n">tartParentNode</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">moveNode</span><span class="o">);</span>

                        <span class="n">movePath</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
                        <span class="n">tree</span><span class="o">.</span><span class="na">updateUI</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="c1">//为JTree添加鼠标监听器</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">addMouseListener</span><span class="o">(</span><span class="n">ml</span><span class="o">);</span>

        <span class="nc">JPanel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>

        <span class="n">addSiblingBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//获取选中结点</span>
            <span class="nc">DefaultMutableTreeNode</span> <span class="n">selectedNode</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">tree</span><span class="o">.</span><span class="na">getLastSelectedPathComponent</span><span class="o">();</span>

            <span class="c1">//如果结点为空，则直接返回</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">selectedNode</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//获取该选中结点的父结点</span>
            <span class="nc">DefaultMutableTreeNode</span> <span class="n">parent</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">selectedNode</span><span class="o">.</span><span class="na">getParent</span><span class="o">();</span>

            <span class="c1">//如果父结点为空，则直接返回</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">parent</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//创建一个新结点</span>
            <span class="nc">DefaultMutableTreeNode</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"新结点"</span><span class="o">);</span>

            <span class="c1">//获取选中结点的索引</span>
            <span class="kt">int</span> <span class="n">selectedIndex</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="na">getIndex</span><span class="o">(</span><span class="n">selectedNode</span><span class="o">);</span>

            <span class="c1">//在选中位置插入新结点</span>
            <span class="n">model</span><span class="o">.</span><span class="na">insertNodeInto</span><span class="o">(</span><span class="n">newNode</span><span class="o">,</span><span class="n">parent</span><span class="o">,</span><span class="n">selectedIndex</span><span class="o">);</span>

            <span class="c1">//----------显示新结点---------------</span>
            <span class="c1">//获取从根结点到新结点的所有结点</span>
            <span class="nc">TreeNode</span><span class="o">[]</span> <span class="n">pathToRoot</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">getPathToRoot</span><span class="o">(</span><span class="n">newNode</span><span class="o">);</span>

            <span class="c1">//使用指定的结点数组创建TreePath</span>
            <span class="nc">TreePath</span> <span class="n">treePath</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreePath</span><span class="o">(</span><span class="n">pathToRoot</span><span class="o">);</span>

            <span class="c1">//显示指定的treePath</span>
            <span class="n">tree</span><span class="o">.</span><span class="na">scrollPathToVisible</span><span class="o">(</span><span class="n">treePath</span><span class="o">);</span>


        <span class="o">});</span>

        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addSiblingBtn</span><span class="o">);</span>

        <span class="n">addChildBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//获取选中结点</span>
            <span class="nc">DefaultMutableTreeNode</span> <span class="n">selectedNode</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">tree</span><span class="o">.</span><span class="na">getLastSelectedPathComponent</span><span class="o">();</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">selectedNode</span><span class="o">==</span><span class="kc">null</span><span class="o">){</span>
                <span class="k">return</span> <span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//创建新结点</span>
            <span class="nc">DefaultMutableTreeNode</span> <span class="n">newNode</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"新结点"</span><span class="o">);</span>

            <span class="c1">//model.insertNodeInto(newNode,selectedNode,selectedNode.getChildCount());使用TreeModel的方法添加，不需要手动刷新UI</span>
            <span class="n">selectedNode</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">newNode</span><span class="o">);</span><span class="c1">//使用TreeNode的方法添加，需要手动刷新UI</span>

            <span class="c1">//显示新结点</span>

            <span class="nc">TreeNode</span><span class="o">[]</span> <span class="n">pathToRoot</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">getPathToRoot</span><span class="o">(</span><span class="n">newNode</span><span class="o">);</span>
            <span class="nc">TreePath</span> <span class="n">treePath</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreePath</span><span class="o">(</span><span class="n">pathToRoot</span><span class="o">);</span>
            <span class="n">tree</span><span class="o">.</span><span class="na">scrollPathToVisible</span><span class="o">(</span><span class="n">treePath</span><span class="o">);</span>

            <span class="c1">//手动刷新UI</span>
            <span class="n">tree</span><span class="o">.</span><span class="na">updateUI</span><span class="o">();</span>

        <span class="o">});</span>

        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addChildBtn</span><span class="o">);</span>

        <span class="n">deleteBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>

            <span class="nc">DefaultMutableTreeNode</span> <span class="n">selectedNode</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">tree</span><span class="o">.</span><span class="na">getLastSelectedPathComponent</span><span class="o">();</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">selectedNode</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">selectedNode</span><span class="o">.</span><span class="na">getParent</span><span class="o">()!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="n">model</span><span class="o">.</span><span class="na">removeNodeFromParent</span><span class="o">(</span><span class="n">selectedNode</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">});</span>

        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">deleteBtn</span><span class="o">);</span>

        <span class="c1">//实现编辑结点的监听器</span>
        <span class="n">editBtn</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>

            <span class="nc">TreePath</span> <span class="n">selectionPath</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="na">getSelectionPath</span><span class="o">();</span>

            <span class="k">if</span> <span class="o">(</span><span class="n">selectionPath</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="c1">//编辑选中结点</span>
                <span class="n">tree</span><span class="o">.</span><span class="na">startEditingAtPath</span><span class="o">(</span><span class="n">selectionPath</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">});</span>

        <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">editBtn</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">tree</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">panel</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">EditTree</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h3 id="363-监听结点事件">3.6.3 监听结点事件</h3>

<p><strong>修改JTree的选择模式：</strong></p>

<p>JTree 专门提供了 一个 TreeSelectionModel 对象来保存该 JTree 选中状态的信息 。 也就是说，JTree组件背后隐藏了两个 model 对象 ， 其中TreeModel 用于保存该 JTree 的所有节点数据 ， 而TreeSelectionModel 用于保存该 JTree的所有选中状态的信息 。</p>

<p>程序可以改变 JTree 的选择模式 ， 但必须先获取该 JTree 对应的 TreeSelectionMode1 对象 ， 再调用该对象的 setSelectionMode(int mode);方法来设置该JTree的选择模式 ，其中model可以有如下3种取值：</p>

<ol>
  <li>TreeSelectionModel.CONTIGUOUS_TREE_SELECTION: 可 以连续选中多个 TreePath 。</li>
  <li>TreeSelectionModel.DISCONTIGUOUS_TREE_SELECTION : 该选项对于选择没有任何限制 。</li>
  <li>TreeSelectionModel.SINGLE_TREE_SELECTION: 每次只能选择一个 TreePath 。</li>
</ol>

<p><strong>为JTree添加监听器:</strong></p>

<ol>
  <li>addTreeExpansionListener(TreeExpansionListener tel) : 添加树节点展开/折叠事件的监听器。</li>
  <li>addTreeSelectionListener(TreeSelectionListener tsl) : 添加树节点选择事件的监听器。</li>
</ol>

<p><strong>案例：</strong></p>

<p>​	实现下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/SelectJTree.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultMutableTreeNode</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SelectJTree</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"监听树的选择事件"</span><span class="o">);</span>

    <span class="nc">JTree</span> <span class="n">tree</span><span class="o">;</span>

    <span class="nc">DefaultMutableTreeNode</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"中国"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangdong</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广东"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangxi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广西"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">foshan</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"佛山"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">shantou</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"汕头"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guilin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"桂林"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">nanning</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"南宁"</span><span class="o">);</span>

    <span class="nc">JTextArea</span> <span class="n">eventTxt</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>

        <span class="c1">//通过add()方法建立父子层级关系</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">foshan</span><span class="o">);</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">shantou</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guilin</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nanning</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangdong</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangxi</span><span class="o">);</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTree</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>

        <span class="c1">//添加监听器</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">addTreeSelectionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getOldLeadSelectionPath</span><span class="o">()!=</span><span class="kc">null</span><span class="o">){</span>
                <span class="n">eventTxt</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"原选中结点的路径："</span><span class="o">+</span><span class="n">e</span><span class="o">.</span><span class="na">getOldLeadSelectionPath</span><span class="o">().</span><span class="na">toString</span><span class="o">()+</span><span class="s">"\n"</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="n">eventTxt</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"新选中结点的路径："</span><span class="o">+</span><span class="n">e</span><span class="o">.</span><span class="na">getNewLeadSelectionPath</span><span class="o">().</span><span class="na">toString</span><span class="o">()+</span><span class="s">"\n"</span><span class="o">);</span>
        <span class="o">});</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setShowsRootHandles</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">setRootVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="nc">Box</span> <span class="n">box</span> <span class="o">=</span> <span class="nc">Box</span><span class="o">.</span><span class="na">createHorizontalBox</span><span class="o">();</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">tree</span><span class="o">));</span>
        <span class="n">box</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">eventTxt</span><span class="o">));</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">box</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SelectJTree</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="364-使用defaulttreecellrenderer改变结点外观">3.6.4 使用DefaultTreeCellRenderer改变结点外观</h3>

<p>JTree默认的外观是比较单一的，它提供了如下几种改变结点外观的方式：</p>

<ol>
  <li>使用 DefaultTreeCellRenderer 直接改变节点的外观，这种方式可 以 改变整棵树所有节点 的字体、颜色和图标 。</li>
  <li>为 JTree 指定 DefaultTreeCellRenderer 的扩展类对象作为 JTree 的节点绘制器，该绘制器负责为不同节点使用不同的字体、颜色和图标。通常使用这种方式来改变节点的外观 。</li>
  <li>为 JTree 指定一个实现 TreeCellRenderer 接口的节点绘制器，该绘制器可以为不同的节点自由绘制任意内容，这是最复杂但最灵活的节点绘制器 。</li>
</ol>

<p>第 一种方式最简单 ， 但灵活性最差 ，因为它会改变整棵树所有节点的外观 。 在这种情况下 ， Jtree的所有节点依然使用相同的图标 ，相当于整体替换了 Jtree 中 节点的所有默认图标 。 用户指定 的节点图标未必就比 JTree 默认的图标美观 。</p>

<p>DefaultTreeCellRenderer 提供了如下几个方法来修改节点的外观：</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setBackgroundNonSelectionColor</span><span class="o">(</span><span class="nc">Color</span> <span class="n">newColor</span><span class="o">):</span> <span class="n">设置用于非选定节点的背景颜色</span> <span class="err">。</span>
<span class="n">setBackgroundSelectionColor</span><span class="o">(</span><span class="nc">Color</span> <span class="n">newColor</span><span class="o">):</span> <span class="n">设置节点在选中状态下的背景颜色</span> <span class="err">。</span>
<span class="n">setBorderSelectionColor</span><span class="o">(</span><span class="nc">Color</span> <span class="n">newColor</span><span class="o">):</span> <span class="n">设置选中状态下节点的边框颜色</span> <span class="err">。</span>
<span class="n">setClosedIcon</span><span class="o">(</span><span class="nc">Icon</span> <span class="n">newIcon</span><span class="o">):</span> <span class="n">设置处于折叠状态下非叶子节点的图标</span> <span class="err">。</span>
<span class="n">setFont</span><span class="o">(</span><span class="nc">Font</span> <span class="n">font</span><span class="o">)</span> <span class="o">:</span> <span class="n">设置节点文本</span> <span class="n">的</span> <span class="n">字体</span><span class="err">。</span>
<span class="n">setLeaflcon</span><span class="o">(</span><span class="nc">Icon</span> <span class="n">newIcon</span><span class="o">):</span> <span class="n">设置叶子节点的图标</span> <span class="err">。</span>
<span class="n">setOpenlcon</span><span class="o">(</span><span class="nc">Icon</span> <span class="n">newlcon</span><span class="o">):</span> <span class="n">设置处于展开状态下非叶子节</span> <span class="n">点的图标</span><span class="err">。</span>
<span class="n">setTextNonSelectionColor</span><span class="o">(</span><span class="nc">Color</span> <span class="n">newColor</span><span class="o">):</span> <span class="n">设置绘制非选中状态下节点文本的颜色</span> <span class="err">。</span>
<span class="n">setTextSelectionColor</span><span class="o">(</span><span class="nc">Color</span> <span class="n">newColor</span><span class="o">):</span> <span class="n">设置绘制选中状态下节点文本的颜色</span> <span class="err">。</span>
</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用DefaultTreeCellRenderer完成下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/CellRender1.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultMutableTreeNode</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultTreeCellRenderer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChangeAllCellRender</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"改变所有结点外观"</span><span class="o">);</span>

    <span class="nc">JTree</span> <span class="n">tree</span><span class="o">;</span>

    <span class="nc">DefaultMutableTreeNode</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"中国"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangdong</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广东"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guangxi</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"广西"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">foshan</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"佛山"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">shantou</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"汕头"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">guilin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"桂林"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">nanning</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"南宁"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//通过add()方法建立父子层级关系</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">foshan</span><span class="o">);</span>
        <span class="n">guangdong</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">shantou</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guilin</span><span class="o">);</span>
        <span class="n">guangxi</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nanning</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangdong</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">guangxi</span><span class="o">);</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTree</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>

        <span class="c1">//创建一个DefaultTreeCellRenderer对象</span>
        <span class="nc">DefaultTreeCellRenderer</span> <span class="n">cellRenderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultTreeCellRenderer</span><span class="o">();</span>
        <span class="c1">//设置非选定结点的背景颜色</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setBackgroundNonSelectionColor</span><span class="o">(</span><span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">220</span><span class="o">,</span><span class="mi">220</span><span class="o">,</span><span class="mi">220</span><span class="o">));</span>
        <span class="c1">//设置选中结点的背景色</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setBackgroundSelectionColor</span><span class="o">(</span><span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">140</span><span class="o">,</span><span class="mi">140</span><span class="o">,</span><span class="mi">140</span><span class="o">));</span>
        <span class="c1">//设置选中状态下结点的边框颜色</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setBorderSelectionColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">);</span>
        <span class="c1">//设置处于折叠状态下非叶子结点的图标</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setClosedIcon</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\close.gif"</span><span class="o">)));</span>
        <span class="c1">//设置结点文本的字体</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="k">new</span> <span class="nc">Font</span><span class="o">(</span><span class="s">"SansSerif"</span><span class="o">,</span><span class="nc">Font</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span><span class="mi">16</span><span class="o">));</span>
        <span class="c1">//设置叶子结点图标</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setLeafIcon</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\leaf.png"</span><span class="o">)));</span>
        <span class="c1">//设置处于展开状态下非叶子结点图标跑</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setOpenIcon</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\open.gif"</span><span class="o">)));</span>
        <span class="c1">//设置绘制非选中状态下结点文本颜色</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setTextNonSelectionColor</span><span class="o">(</span><span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">));</span>
        <span class="c1">//设置选中状态下结点的文本颜色</span>
        <span class="n">cellRenderer</span><span class="o">.</span><span class="na">setTextSelectionColor</span><span class="o">(</span><span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">255</span><span class="o">));</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setCellRenderer</span><span class="o">(</span><span class="n">cellRenderer</span><span class="o">);</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setShowsRootHandles</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setRootVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">tree</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ChangeAllCellRender</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="365-扩展defaulttreecellrenderer改变结点外观">3.6.5 扩展DefaultTreeCellRenderer改变结点外观</h3>

<p>DefaultTreeCellRenderer 实现类实现了TreeCellRenderer接口，该接口里只有 一个用于绘制节点内容的方法: getTreeCellRendererComponent() ， 该方法负责绘制 JTree 节点 。学习JList的时候，如果要绘制JList的列表项外观的内容，需要实现ListCellRenderer 接口，通过重写getTreeCellRendererComponent()方法返回一个Component 对象 ， 该对象就是 JTree 的节点组件 。两者之间非常类似</p>

<p>DefaultTreeCellRende rer 类继承了JLabel，实现 getTreeCellRendererComponent()方法时返回 this ，即返回一个特殊的 JLabel 对象 。 如果需要根据节点内容来改变节点的外观，则可以再次扩展DefaultTreeCellRenderer 类，并再次重写它提供的 getTreeCellRendererComponent()方法。</p>

<p><strong>案例：</strong></p>

<p>​	自定义类继承DefaultTreeCellRenderer,重写getTreeCellRendererComponent()方法，实现下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/%E6%89%A9%E5%B1%95DefaultTreeCellRenderer.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultMutableTreeNode</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultTreeCellRenderer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExtendsDefaultCellTreeRenderer</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"根据结点类型定义图标"</span><span class="o">);</span>

    <span class="nc">JTree</span> <span class="n">tree</span><span class="o">;</span>

    <span class="c1">//定义几个初始结点</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">ROOT</span><span class="o">,</span><span class="s">"数据库导航"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">salaryDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">DATABASE</span><span class="o">,</span><span class="s">"公司工资数据库"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">customerDb</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">DATABASE</span><span class="o">,</span><span class="s">"公司客户数据库"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">employee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">TABLE</span><span class="o">,</span><span class="s">"员工表"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">attend</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">TABLE</span><span class="o">,</span><span class="s">"考勤表"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">concat</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">TABLE</span><span class="o">,</span><span class="s">"联系方式表"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">id</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">INDEX</span><span class="o">,</span><span class="s">"员工ID"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">COLUMN</span><span class="o">,</span><span class="s">"姓名"</span><span class="o">));</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">gender</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="k">new</span> <span class="nc">NodeData</span><span class="o">(</span><span class="nc">DBObjectType</span><span class="o">.</span><span class="na">COLUMN</span><span class="o">,</span><span class="s">"性别"</span><span class="o">));</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//通过结点的add方法，建立结点的父子关系</span>

        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">salaryDb</span><span class="o">);</span>
        <span class="n">root</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customerDb</span><span class="o">);</span>

        <span class="n">salaryDb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">employee</span><span class="o">);</span>
        <span class="n">salaryDb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">attend</span><span class="o">);</span>

        <span class="n">customerDb</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">concat</span><span class="o">);</span>

        <span class="n">concat</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="n">concat</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="n">concat</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">gender</span><span class="o">);</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTree</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setCellRenderer</span><span class="o">(</span><span class="k">new</span> <span class="nc">MyRenderer</span><span class="o">());</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setShowsRootHandles</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">setRootVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="c1">//设置使用windows外观风格</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">UIManager</span><span class="o">.</span><span class="na">setLookAndFeel</span><span class="o">(</span><span class="s">"com.sun.java.swing.plaf.windows.WindowsLookAndFeel"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="c1">//更新JTree的UI外观</span>
        <span class="nc">SwingUtilities</span><span class="o">.</span><span class="na">updateComponentTreeUI</span><span class="o">(</span><span class="n">tree</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">tree</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">ExtendsDefaultCellTreeRenderer</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">class</span> <span class="nc">MyRenderer</span> <span class="kd">extends</span> <span class="nc">DefaultTreeCellRenderer</span><span class="o">{</span>
        <span class="c1">//初始化5个图标</span>
        <span class="nc">ImageIcon</span> <span class="n">rootIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\root.gif"</span><span class="o">));</span>
        <span class="nc">ImageIcon</span> <span class="n">databaseIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\database.gif"</span><span class="o">));</span>
        <span class="nc">ImageIcon</span> <span class="n">tableIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\table.gif"</span><span class="o">));</span>
        <span class="nc">ImageIcon</span> <span class="n">columnIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\column.gif"</span><span class="o">));</span>
        <span class="nc">ImageIcon</span> <span class="n">indexIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\index.gif"</span><span class="o">));</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Component</span> <span class="nf">getTreeCellRendererComponent</span><span class="o">(</span><span class="nc">JTree</span> <span class="n">tree</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">sel</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">expanded</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">leaf</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">hasFocus</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//执行父类默认的绘制结点操作</span>
            <span class="kd">super</span><span class="o">.</span><span class="na">getTreeCellRendererComponent</span><span class="o">(</span><span class="n">tree</span><span class="o">,</span><span class="n">value</span><span class="o">,</span><span class="n">sel</span><span class="o">,</span><span class="n">expanded</span><span class="o">,</span><span class="n">leaf</span><span class="o">,</span><span class="n">row</span><span class="o">,</span><span class="n">hasFocus</span><span class="o">);</span>
            <span class="nc">DefaultMutableTreeNode</span>  <span class="n">node</span> <span class="o">=</span> <span class="o">(</span><span class="nc">DefaultMutableTreeNode</span><span class="o">)</span> <span class="n">value</span><span class="o">;</span>

            <span class="nc">NodeData</span> <span class="n">data</span> <span class="o">=</span> <span class="o">(</span><span class="nc">NodeData</span><span class="o">)</span> <span class="n">node</span><span class="o">.</span><span class="na">getUserObject</span><span class="o">();</span>
            <span class="c1">//根据结点数据中的nodeType决定结点的图标</span>
            <span class="nc">ImageIcon</span> <span class="n">icon</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">nodeType</span><span class="o">){</span>
                <span class="k">case</span> <span class="nc">DBObjectType</span><span class="o">.</span><span class="na">ROOT</span><span class="o">:</span>
                    <span class="n">icon</span> <span class="o">=</span> <span class="n">rootIcon</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nc">DBObjectType</span><span class="o">.</span><span class="na">DATABASE</span><span class="o">:</span>
                    <span class="n">icon</span> <span class="o">=</span> <span class="n">databaseIcon</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nc">DBObjectType</span><span class="o">.</span><span class="na">TABLE</span><span class="o">:</span>
                    <span class="n">icon</span> <span class="o">=</span> <span class="n">tableIcon</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nc">DBObjectType</span><span class="o">.</span><span class="na">COLUMN</span><span class="o">:</span>
                    <span class="n">icon</span> <span class="o">=</span> <span class="n">columnIcon</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="k">case</span> <span class="nc">DBObjectType</span><span class="o">.</span><span class="na">INDEX</span><span class="o">:</span>
                    <span class="n">icon</span> <span class="o">=</span> <span class="n">indexIcon</span><span class="o">;</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//改变图标</span>
            <span class="k">this</span><span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="n">icon</span><span class="o">);</span>

            <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>


    <span class="c1">//定义一个NodeData类，用于封装结点数据</span>
    <span class="kd">class</span> <span class="nc">NodeData</span><span class="o">{</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="n">nodeType</span><span class="o">;</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="n">nodeData</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">NodeData</span><span class="o">(</span><span class="kt">int</span> <span class="n">nodeType</span><span class="o">,</span> <span class="nc">String</span> <span class="n">nodeData</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">nodeType</span> <span class="o">=</span> <span class="n">nodeType</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">nodeData</span> <span class="o">=</span> <span class="n">nodeData</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">nodeData</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">//定义一个接口，该接口里包含数据库对象类型的常量</span>
    <span class="kd">interface</span>  <span class="nc">DBObjectType</span><span class="o">{</span>
        <span class="kt">int</span> <span class="no">ROOT</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="no">DATABASE</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
        <span class="kt">int</span> <span class="no">TABLE</span><span class="o">=</span><span class="mi">2</span><span class="o">;</span>
        <span class="kt">int</span> <span class="no">COLUMN</span><span class="o">=</span><span class="mi">3</span><span class="o">;</span>
        <span class="kt">int</span> <span class="no">INDEX</span><span class="o">=</span><span class="mi">4</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="366-实现treecellrenderer接口改变结点外观">3.6.6 实现TreeCellRenderer接口改变结点外观</h3>

<p>这种改变结点外观的方式是最灵活的，程序实现TreeCellRenderer接口时同样需要实现getTreeCellRendererComponent()方法，该方法可以返回任意类型的组件，该组件将作为JTree的结点。通过这种方式可以最大程度的改变结点的外观。</p>

<p><strong>案例：</strong></p>

<p>​	自定义类，继承JPanel类，实现TreeCellRenderer接口，完成下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/TreeCellRenderer.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.DefaultMutableTreeNode</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.tree.TreeCellRenderer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomerTreeNode</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"定制树的结点"</span><span class="o">);</span>

    <span class="nc">JTree</span> <span class="n">tree</span><span class="o">;</span>

    <span class="c1">//定义几个初始结点</span>

    <span class="nc">DefaultMutableTreeNode</span> <span class="n">friends</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"我的好友"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">qingzhao</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"李清照"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">suge</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"苏格拉底"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">libai</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"李白"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">nongyu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"弄玉"</span><span class="o">);</span>
    <span class="nc">DefaultMutableTreeNode</span> <span class="n">hutou</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultMutableTreeNode</span><span class="o">(</span><span class="s">"虎头"</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>

        <span class="n">friends</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">qingzhao</span><span class="o">);</span>
        <span class="n">friends</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">suge</span><span class="o">);</span>
        <span class="n">friends</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">libai</span><span class="o">);</span>
        <span class="n">friends</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">nongyu</span><span class="o">);</span>
        <span class="n">friends</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">hutou</span><span class="o">);</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTree</span><span class="o">(</span><span class="n">friends</span><span class="o">);</span>

        <span class="n">tree</span><span class="o">.</span><span class="na">setShowsRootHandles</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="n">tree</span><span class="o">.</span><span class="na">setRootVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>


        <span class="n">tree</span><span class="o">.</span><span class="na">setCellRenderer</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageCellRenderer</span><span class="o">());</span>



        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">tree</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">CustomerTreeNode</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="kd">class</span> <span class="nc">ImageCellRenderer</span> <span class="kd">extends</span> <span class="nc">JPanel</span> <span class="kd">implements</span> <span class="nc">TreeCellRenderer</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="nc">ImageIcon</span> <span class="n">icon</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
        <span class="c1">//定义绘制单元格时的背景色</span>
        <span class="kd">private</span> <span class="nc">Color</span> <span class="n">background</span><span class="o">;</span>
        <span class="c1">//定义绘制单元格时的前景色</span>
        <span class="kd">private</span> <span class="nc">Color</span> <span class="n">foreground</span><span class="o">;</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Component</span> <span class="nf">getTreeCellRendererComponent</span><span class="o">(</span><span class="nc">JTree</span> <span class="n">tree</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">selected</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">expanded</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">leaf</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">hasFocus</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">icon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"10\\"</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s">".gif"</span><span class="o">));</span>

            <span class="n">name</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>

            <span class="n">background</span> <span class="o">=</span> <span class="n">hasFocus</span> <span class="o">?</span> <span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">140</span><span class="o">,</span> <span class="mi">200</span><span class="o">,</span> <span class="mi">235</span><span class="o">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
            <span class="n">foreground</span> <span class="o">=</span> <span class="n">hasFocus</span> <span class="o">?</span> <span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span><span class="mi">255</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nc">Color</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>
            <span class="c1">//返回当前JPanel作为结点</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//重写paintComponent改变JPanel的外观</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">paintComponent</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">imageWidth</span> <span class="o">=</span> <span class="n">icon</span><span class="o">.</span><span class="na">getImage</span><span class="o">().</span><span class="na">getWidth</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">imageHeight</span> <span class="o">=</span> <span class="n">icon</span><span class="o">.</span><span class="na">getImage</span><span class="o">().</span><span class="na">getHeight</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
            <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">background</span><span class="o">);</span>
            <span class="n">g</span><span class="o">.</span><span class="na">fillRect</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="n">getWidth</span><span class="o">(),</span><span class="n">getHeight</span><span class="o">());</span>

            <span class="n">g</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">foreground</span><span class="o">);</span>
            <span class="c1">//绘制好友图标</span>
            <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">icon</span><span class="o">.</span><span class="na">getImage</span><span class="o">(),</span><span class="n">getWidth</span><span class="o">()/</span><span class="mi">2</span><span class="o">-</span><span class="n">imageWidth</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span><span class="mi">10</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>

            <span class="c1">//绘制好友姓名</span>
            <span class="n">g</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="k">new</span> <span class="nc">Font</span><span class="o">(</span><span class="s">"SansSerif"</span><span class="o">,</span><span class="nc">Font</span><span class="o">.</span><span class="na">BOLD</span><span class="o">,</span><span class="mi">18</span><span class="o">));</span>

            <span class="n">g</span><span class="o">.</span><span class="na">drawString</span><span class="o">(</span><span class="n">name</span><span class="o">,</span><span class="n">getWidth</span><span class="o">()/</span><span class="mi">2</span><span class="o">-</span><span class="n">name</span><span class="o">.</span><span class="na">length</span><span class="o">()*</span><span class="mi">10</span><span class="o">,</span><span class="n">imageHeight</span><span class="o">+</span><span class="mi">30</span><span class="o">);</span>

        <span class="o">}</span>


        <span class="c1">//设置当前组件结点最佳大小</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Dimension</span> <span class="nf">getPreferredSize</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">Dimension</span><span class="o">(</span><span class="mi">80</span><span class="o">,</span><span class="mi">80</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="37-jtabletablemodel实现表格">3.7 JTable、TableModel实现表格</h2>

<p>表格也是GUI程序中常用的组件，表格是一个由多行、多列组成的二维显示区 。 Swing 的 JTable 以及相关类提供了这种表格支持 ， 通过使用 JTable 以及相关类，程序既可以使用简单的代码创建出表格来显示二维数据，也可以开发出功能丰富的表格，还可以为表格定制各种显示外观、编辑特性 。</p>

<h3 id="371-创建简单表格">3.7.1 创建简单表格</h3>

<p><strong>使用JTable创建简单表格步骤:</strong></p>

<ol>
  <li>创建一个一维数组，存储表格中每一列的标题</li>
  <li>创建一个二维数组，存储表格中每一行数据，其中二维数组内部的每个一维数组，代表表格中的一行数据</li>
  <li>根据第一步和第二步创建的一维数组和二维数组，创建JTable对象</li>
  <li>把JTable添加到其他容器中显示</li>
</ol>

<p><strong>案例：</strong></p>

<p>​	使用JTable实现下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/SimpleTable.jpg" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleTable</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"简单表格"</span><span class="o">);</span>

    <span class="nc">JTable</span> <span class="n">table</span><span class="o">;</span>

    <span class="c1">//定义二维数组作为表格数据</span>

    <span class="nc">Object</span><span class="o">[][]</span> <span class="n">tableData</span> <span class="o">=</span> <span class="o">{</span>

            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李清照"</span><span class="o">,</span><span class="mi">29</span><span class="o">,</span><span class="s">"女"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"苏格拉底"</span><span class="o">,</span><span class="mi">56</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李白"</span><span class="o">,</span><span class="mi">35</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"弄玉"</span><span class="o">,</span><span class="mi">18</span><span class="o">,</span><span class="s">"女"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"虎头"</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>

    <span class="o">};</span>

    <span class="c1">//定义一个一维数组，作为列标题</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">columnTitle</span> <span class="o">=</span> <span class="o">{</span><span class="s">"姓名"</span><span class="o">,</span><span class="s">"年龄"</span><span class="o">,</span><span class="s">"性别"</span><span class="o">};</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//以二维数组和一维数组来创建一个JTable对象</span>

        <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">tableData</span><span class="o">,</span><span class="n">columnTitle</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SimpleTable</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>在上面实现的简单表格中，大概有如下几个功能：</p>

<ol>
  <li>当表格高度不足以显示所有的数据行时，该表格会自动显示滚动条 。</li>
  <li>把鼠标移动到两列之间的分界符时，鼠标形状会变成可调整大小的形状，表明用户可以自由调整表格列的大小 。</li>
  <li>在表格列上按下鼠标并拖动时，可以将表格的整列拖动到其他位置 。</li>
  <li>当单击某一个单元格时，系统会自动选中该单元格所在的行 。</li>
  <li>当双击某一个单元格时，系统会自动进入该单元格的修改状态 。</li>
</ol>

<p><strong>JTable调整列：</strong></p>

<p>JTable提供了一个setAutoResizeMode(int mode)方法用来调整表格的格式，该方法可以接收下面几个值：</p>

<ol>
  <li>JTable.AUTO_RESIZE_OFF: 关闭表格的自动调整功能。当调整某一列的宽度时，其他列的宽度不会发生变化；</li>
  <li>JTable.AUTO_RESIZE_NEXT_COLUMN:只调整下一列的宽度，其他列及表格的宽度不会发生改变；</li>
  <li>JTable.AUTO_RESIZE_SUBSEQUENT_COLUMNS:平均调整当前列后面所有列的宽度，当前列的前面所有列及表格的宽度都不会发生变化，这是默认的调整方式</li>
  <li>JTable.AUTO_RESIZE_LAST_COLUMN:只调整最后一列的宽度，其他列及表格的宽度不会发生变化；</li>
  <li>JTable.AUTO_RESIZE_ALL_COLUMNS:平均调整表格中所有列的宽度，表格的宽度不会发生改变</li>
</ol>

<p>如果需要精确控制每一列的宽度，则可通过 TableColumn 对象来实现 。 JTable 使用 TableColumn 来表示表格中的每一列， JTable 中表格列的所有属性，如最佳宽度、是否可调整宽度、最小和最大宽度等都保存在该 TableColumn 中 。 此外， TableColumn 还允许为该列指定特定的单元格绘制器和单元格编辑器(这些内容将在后面讲解) 。 TableColumn 具有如下方法 。</p>

<ol>
  <li>setMaxWidth(int maxWidth): 设置该列的最大宽度 。 如果指定的 maxWidth 小于该列的最小宽度， 则 maxWidth 被设置成最小宽度 。</li>
  <li>setMinWidth(int minWidth): 设置该列的最小宽度 。</li>
  <li>setPreferredWidth(int preferredWidth): 设置该列的最佳宽度 。</li>
  <li>setResizable(boolean isResizable): 设置是否可以调整该列的 宽度 。</li>
  <li>sizeWidthToFit(): 调整该列的宽度，以适合其标题单元格的 宽度 。</li>
</ol>

<p><strong>JTable调整选择模式：</strong></p>

<ol>
  <li>选则行：JTable默认的选择方式就是选择行，也可以调用setRowSelectionAllowed(boolean rowSelectionAllowed)来修改；</li>
  <li>选择列：调用 setColumnSelectionAllowed(boolean columnSelectionAllowed)方法，修改当前JTable的选择模式为列；</li>
  <li>选择单元格：setCellSelectionEnabled(boolean cellSelectionEnabled) ，修改当前JTable的选择模式为单元格；</li>
</ol>

<p><strong>JTable调整表格选择状态：</strong></p>

<p>与 JList 、 JTree 类似的是， JTable 使用了 一个 ListSelectionModel 表示该表格的选择状态，程序可以 通过 ListSelectionModel 来控制 JTable 的选择模式 。 JTable 的选择模式有如下三种：</p>

<ol>
  <li>
    <p>ListSelectionMode.MULTIPLE_INTERVAL_SELECTION:没有任何限制，可以选择表格中任何表格单元，这是默认的选择模式 。 通过 Shi负和 Ctrl 辅助键的帮助可以选择多个表格单元 。</p>
  </li>
  <li>
    <p>ListSelectionMode.SINGLE_INTERVAL_SELECTION:选择单个连续区域，该选项可以选择多个表格单元，但多个表格单元之间必须是连续的 。 通过 Shift 辅助键的帮助来选择连续区域。</p>
  </li>
  <li>
    <p>ListSelectionMode.SINGLE_SELECTION:只能选择单个表格单元 。</p>
  </li>
</ol>

<p><strong>案例：</strong></p>

<p>​	通过JTable实现的宽度调整，选择模式调整，选择状态调整，实现下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/adjust1.png" alt="" /></p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/adjust2.png" alt="" /></p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/adjust3.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableColumn</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdjustingWidth</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"调整表格宽度"</span><span class="o">);</span>

    <span class="nc">JMenuBar</span> <span class="n">menuBar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuBar</span><span class="o">();</span>

    <span class="nc">JMenu</span> <span class="n">adjustModeMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"调整方式"</span><span class="o">);</span>
    <span class="nc">JMenu</span> <span class="n">selectUnitMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"选择单元"</span><span class="o">);</span>
    <span class="nc">JMenu</span> <span class="n">selectModeMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"选择方式"</span><span class="o">);</span>

    <span class="c1">//定义5个单选框按钮，用以控制表格的宽度调整方式</span>
    <span class="nc">JRadioButtonMenuItem</span><span class="o">[]</span> <span class="n">adjustModeItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">[</span><span class="mi">5</span><span class="o">];</span>

    <span class="c1">//定义3个单选框按钮，用以控制表格的选择方式</span>
    <span class="nc">JRadioButtonMenuItem</span><span class="o">[]</span> <span class="n">selectModeItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">[</span><span class="mi">3</span><span class="o">];</span>

    <span class="c1">//定义复选菜单项，控制选择单元</span>
    <span class="nc">JCheckBoxMenuItem</span> <span class="n">rowsItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBoxMenuItem</span><span class="o">(</span><span class="s">"选择行"</span><span class="o">);</span>
    <span class="nc">JCheckBoxMenuItem</span> <span class="n">columnItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBoxMenuItem</span><span class="o">(</span><span class="s">"选择列"</span><span class="o">);</span>
    <span class="nc">JCheckBoxMenuItem</span> <span class="n">cellItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JCheckBoxMenuItem</span><span class="o">(</span><span class="s">"选择单元格"</span><span class="o">);</span>

    <span class="c1">//定义按钮组，实现单选</span>
    <span class="nc">ButtonGroup</span> <span class="n">adjustBg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ButtonGroup</span><span class="o">();</span>
    <span class="nc">ButtonGroup</span> <span class="n">selectBg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ButtonGroup</span><span class="o">();</span>

    <span class="c1">//定义一个int类型的数组，用于保存表格所有的宽度调整方式</span>

    <span class="kt">int</span><span class="o">[]</span> <span class="n">adjustModes</span> <span class="o">=</span> <span class="o">{</span>
            <span class="nc">JTable</span><span class="o">.</span><span class="na">AUTO_RESIZE_OFF</span><span class="o">,</span>
            <span class="nc">JTable</span><span class="o">.</span><span class="na">AUTO_RESIZE_NEXT_COLUMN</span><span class="o">,</span>
            <span class="nc">JTable</span><span class="o">.</span><span class="na">AUTO_RESIZE_SUBSEQUENT_COLUMNS</span><span class="o">,</span>
            <span class="nc">JTable</span><span class="o">.</span><span class="na">AUTO_RESIZE_LAST_COLUMN</span><span class="o">,</span>
            <span class="nc">JTable</span><span class="o">.</span><span class="na">AUTO_RESIZE_ALL_COLUMNS</span>
    <span class="o">};</span>


    <span class="c1">//定义一个int乐行数组，用于保存表格所有的选择方式</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">selectModes</span> <span class="o">=</span> <span class="o">{</span>
            <span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">MULTIPLE_INTERVAL_SELECTION</span><span class="o">,</span>
            <span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">SINGLE_INTERVAL_SELECTION</span><span class="o">,</span>
            <span class="nc">ListSelectionModel</span><span class="o">.</span><span class="na">SINGLE_SELECTION</span>
    <span class="o">};</span>

    <span class="c1">//声明JTable</span>
    <span class="nc">JTable</span> <span class="n">table</span><span class="o">;</span>

    <span class="c1">//定义一个二维数组，作为表格行数据</span>
    <span class="nc">Object</span><span class="o">[][]</span> <span class="n">tableData</span> <span class="o">=</span> <span class="o">{</span>

            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李清照"</span><span class="o">,</span><span class="mi">29</span><span class="o">,</span><span class="s">"女"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"苏格拉底"</span><span class="o">,</span><span class="mi">56</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李白"</span><span class="o">,</span><span class="mi">35</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"弄玉"</span><span class="o">,</span><span class="mi">18</span><span class="o">,</span><span class="s">"女"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"虎头"</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>

    <span class="o">};</span>

    <span class="c1">//定义一个一维数组，作为列标题</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">columnTitle</span> <span class="o">=</span> <span class="o">{</span><span class="s">"姓名"</span><span class="o">,</span><span class="s">"年龄"</span><span class="o">,</span><span class="s">"性别"</span><span class="o">};</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//创建JTable对象</span>
        <span class="n">table</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">tableData</span><span class="o">,</span><span class="n">columnTitle</span><span class="o">);</span>


        <span class="c1">//-----------------为窗口安装设置表格调整方式的菜单--------------------</span>
        <span class="n">adjustModeItem</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"只调整表格"</span><span class="o">);</span>
        <span class="n">adjustModeItem</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"只调整下一列"</span><span class="o">);</span>
        <span class="n">adjustModeItem</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"平均调整余下列"</span><span class="o">);</span>
        <span class="n">adjustModeItem</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"只调整最后一列"</span><span class="o">);</span>
        <span class="n">adjustModeItem</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"平均调整所有列"</span><span class="o">);</span>

        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">adjustModeMenu</span><span class="o">);</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">adjustModeItem</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="c1">//默认选中第三个菜单项，即对应表格默认的宽度调整方式</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">==</span><span class="mi">2</span><span class="o">){</span>
                <span class="n">adjustModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">setSelected</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">adjustBg</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">adjustModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="n">adjustModeMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">adjustModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>

            <span class="c1">//为菜单项设置事件监听器</span>
            <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="n">adjustModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">adjustModeItem</span><span class="o">[</span><span class="n">index</span><span class="o">].</span><span class="na">isSelected</span><span class="o">()){</span>
                    <span class="n">table</span><span class="o">.</span><span class="na">setAutoResizeMode</span><span class="o">(</span><span class="n">adjustModes</span><span class="o">[</span><span class="n">index</span><span class="o">]);</span>
                <span class="o">}</span>
            <span class="o">});</span>
        <span class="o">}</span>

        <span class="c1">//---------------为窗口安装设置表格选择方式的菜单-------------------</span>
        <span class="n">selectModeItem</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"无限制"</span><span class="o">);</span>
        <span class="n">selectModeItem</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"单独的连续区"</span><span class="o">);</span>
        <span class="n">selectModeItem</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JRadioButtonMenuItem</span><span class="o">(</span><span class="s">"单选"</span><span class="o">);</span>

        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">selectModeMenu</span><span class="o">);</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">selectModeItem</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>

            <span class="c1">//默认选中第一个菜单项，即表格的默认选择方式</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="o">){</span>
                <span class="n">selectModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">setSelected</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="n">selectBg</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">selectModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="n">selectModeMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">selectModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>


            <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>

            <span class="n">selectModeItem</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">selectModeItem</span><span class="o">[</span><span class="n">index</span><span class="o">].</span><span class="na">isSelected</span><span class="o">()){</span>
                    <span class="n">table</span><span class="o">.</span><span class="na">getSelectionModel</span><span class="o">().</span><span class="na">setSelectionMode</span><span class="o">(</span><span class="n">selectModes</span><span class="o">[</span><span class="n">index</span><span class="o">]);</span>
                <span class="o">}</span>

            <span class="o">});</span>

        <span class="o">}</span>

        <span class="c1">//---------------为窗口添加选择单元菜单----------------------</span>
        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">selectUnitMenu</span><span class="o">);</span>
        <span class="n">rowsItem</span><span class="o">.</span><span class="na">setSelected</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getRowSelectionAllowed</span><span class="o">());</span>
        <span class="n">columnItem</span><span class="o">.</span><span class="na">setSelected</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getColumnSelectionAllowed</span><span class="o">());</span>
        <span class="n">cellItem</span><span class="o">.</span><span class="na">setSelected</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getCellSelectionEnabled</span><span class="o">());</span>

        <span class="n">rowsItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//清除表格的选中状态</span>
            <span class="n">table</span><span class="o">.</span><span class="na">clearSelection</span><span class="o">();</span>
            <span class="c1">//如果该菜单项处于选中状态，设置表格的选择单元是行</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setRowSelectionAllowed</span><span class="o">(</span><span class="n">rowsItem</span><span class="o">.</span><span class="na">isSelected</span><span class="o">());</span>
            <span class="c1">//如果选择行、选择列同时被选中，其实质是选择单元格</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setCellSelectionEnabled</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getCellSelectionEnabled</span><span class="o">());</span>

        <span class="o">});</span>

        <span class="n">selectUnitMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">rowsItem</span><span class="o">);</span>

        <span class="n">columnItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//清除表格的选中状态</span>
            <span class="n">table</span><span class="o">.</span><span class="na">clearSelection</span><span class="o">();</span>

            <span class="c1">//如果该菜单项处于选中状态，设置表格的选择单元是列</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setColumnSelectionAllowed</span><span class="o">(</span><span class="n">columnItem</span><span class="o">.</span><span class="na">isSelected</span><span class="o">());</span>
            <span class="c1">///如果选择行、选择列同时被选中，其实质是选择单元格</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setCellSelectionEnabled</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getCellSelectionEnabled</span><span class="o">());</span>
        <span class="o">});</span>

        <span class="n">selectUnitMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">columnItem</span><span class="o">);</span>

        <span class="n">cellItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//清除表格的选中状态</span>
            <span class="n">table</span><span class="o">.</span><span class="na">clearSelection</span><span class="o">();</span>

            <span class="c1">//如果该菜单项处于选中状态，设置表格的选择单元是单元格</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setCellSelectionEnabled</span><span class="o">(</span><span class="n">cellItem</span><span class="o">.</span><span class="na">isSelected</span><span class="o">());</span>
            <span class="c1">///该选项的改变会同时影响选择行、选择列两个菜单</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setRowSelectionAllowed</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getRowSelectionAllowed</span><span class="o">());</span>
            <span class="n">table</span><span class="o">.</span><span class="na">setColumnSelectionAllowed</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getColumnSelectionAllowed</span><span class="o">());</span>

        <span class="o">});</span>

        <span class="n">selectUnitMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cellItem</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">setJMenuBar</span><span class="o">(</span><span class="n">menuBar</span><span class="o">);</span>

        <span class="c1">//分别获取表格的三个表格列，并设置三列的最小宽、最佳宽度和最大宽度</span>
        <span class="nc">TableColumn</span> <span class="n">nameColumn</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumn</span><span class="o">(</span><span class="n">columnTitle</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="n">nameColumn</span><span class="o">.</span><span class="na">setMinWidth</span><span class="o">(</span><span class="mi">40</span><span class="o">);</span>
        <span class="nc">TableColumn</span> <span class="n">ageColumn</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumn</span><span class="o">(</span><span class="n">columnTitle</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
        <span class="n">ageColumn</span><span class="o">.</span><span class="na">setPreferredWidth</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
        <span class="nc">TableColumn</span> <span class="n">genderColumn</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumn</span><span class="o">(</span><span class="n">columnTitle</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>
        <span class="n">genderColumn</span><span class="o">.</span><span class="na">setMaxWidth</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">AdjustingWidth</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="372-tablemodel和监听器">3.7.2 TableModel和监听器</h3>

<p>与 JList、 JTree 类似的是 ， JTable 采用了 TableModel 来保存表格中的所有状态数据 : 与 ListModel类似的是， TableModel 也不强制保存该表格显示的数据 。 虽然在前面程序中看到的是直接利用 一个二维数组来创建 JTable 对象，但也可以通过 TableModel 对象来创建表格。</p>

<p><strong>使用TableModel步骤：</strong></p>

<ol>
  <li>自定义类，继承AbstractTableModel抽象类，重写下面几个方法：</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">getColumnCount</span><span class="o">():</span><span class="n">返回表格列的数量</span>
<span class="kt">int</span> <span class="nf">getRowCount</span><span class="o">()</span><span class="err">：</span><span class="n">返回表格行的数量</span>
<span class="nc">Object</span> <span class="nf">getValueAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span><span class="err">：</span><span class="n">返回rowIndex行</span><span class="err">，</span><span class="n">column列的单元格的值</span>
<span class="nc">String</span> <span class="nf">getColumnName</span><span class="o">(</span><span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span><span class="err">：</span><span class="n">返回columnIndex列的列名称</span>
<span class="kt">boolean</span> <span class="nf">isCellEditable</span><span class="o">(</span><span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span><span class="err">：</span><span class="n">设置rowIndex行</span><span class="err">，</span><span class="n">columnIndex列单元格是否可编辑</span>
<span class="n">setValueAt</span><span class="o">(</span><span class="nc">Object</span> <span class="n">aValue</span><span class="o">,</span> <span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span><span class="err">：</span><span class="n">设置rowIndex行</span><span class="err">，</span><span class="n">columnIndex列单元格的值</span>
</code></pre></div></div>

<ol>
  <li>创建自定义类对象，根据该对象，创建JTable对象</li>
</ol>

<p><strong>案例：</strong></p>

<p>​</p>

<ol>
  <li>连接数据库，把库中所有的表名称显示到下拉列表中</li>
  <li>点击下拉列表中某个表名时，查询数据库该表的数据，并把结果封装到TableModel中，使用JTable展示</li>
  <li>点击表格中某个单元格，修改数据，能实时修改数据库中的数据</li>
  <li>每修改一次数据，把修改的信息打印到下方的文本域中</li>
</ol>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/TableModel.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.TableModelEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.event.TableModelListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.AbstractTableModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.WindowAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.WindowEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TableModelTest</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"数据表管理工具"</span><span class="o">);</span>

    <span class="nc">JScrollPane</span> <span class="n">scrollPane</span><span class="o">;</span>
    <span class="nc">ResultSetTableModel</span> <span class="n">model</span><span class="o">;</span>

    <span class="c1">//用于装载数据表的JComboBox</span>
    <span class="nc">JComboBox</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">tableNames</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JComboBox</span><span class="o">&lt;&gt;();</span>
    <span class="nc">JTextArea</span> <span class="n">changeMsg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTextArea</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">80</span><span class="o">);</span>

    <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">;</span>

    <span class="nc">Connection</span> <span class="n">conn</span><span class="o">;</span>
    <span class="nc">Statement</span> <span class="n">stmt</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//为JComboBox添加监听事件，当用户选择某个数据表时，触发该方法</span>
        <span class="n">tableNames</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//如果装载JTable的JScrollPane不为空</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">scrollPane</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c1">//从主窗口中删除表格</span>
                    <span class="n">jf</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">scrollPane</span><span class="o">);</span>
                <span class="o">}</span>

                <span class="c1">//从JComboBox中取出用户视图管理的数据表的表名</span>
                <span class="nc">String</span> <span class="n">tableName</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">tableNames</span><span class="o">.</span><span class="na">getSelectedItem</span><span class="o">();</span>

                <span class="c1">//如果结果集不为空，则关闭结果集</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">rs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="o">}</span>

                <span class="nc">String</span> <span class="n">query</span> <span class="o">=</span> <span class="s">"select * from "</span> <span class="o">+</span> <span class="n">tableName</span><span class="o">;</span>
                <span class="c1">//查询用户选择的数据表</span>
                <span class="n">rs</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">query</span><span class="o">);</span>
                <span class="c1">//使用查询到的ResultSet创建TableModel对象</span>
                <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ResultSetTableModel</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>

                <span class="c1">//为TableModel添加监听器，监听用户的修改</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addTableModelListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">TableModelListener</span><span class="o">()</span> <span class="o">{</span>
                    <span class="nd">@Override</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">tableChanged</span><span class="o">(</span><span class="nc">TableModelEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                        <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getFirstRow</span><span class="o">();</span>
                        <span class="kt">int</span> <span class="n">column</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getColumn</span><span class="o">();</span>
                        <span class="n">changeMsg</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"修改的列："</span> <span class="o">+</span> <span class="n">column</span> <span class="o">+</span> <span class="s">",修改的行："</span> <span class="o">+</span> <span class="n">row</span> <span class="o">+</span> <span class="s">",修改后的值："</span> <span class="o">+</span> <span class="n">model</span><span class="o">.</span><span class="na">getValueAt</span><span class="o">(</span><span class="n">row</span><span class="o">,</span> <span class="n">column</span><span class="o">)+</span><span class="s">".\n"</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">});</span>

                <span class="c1">//使用TableModel创建JTable</span>
                <span class="nc">JTable</span> <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">model</span><span class="o">);</span>

                <span class="n">scrollPane</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">);</span>
                <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">scrollPane</span><span class="o">);</span>
                <span class="n">jf</span><span class="o">.</span><span class="na">validate</span><span class="o">();</span>

            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e1</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>

        <span class="o">});</span>

        <span class="nc">JPanel</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
        <span class="n">p</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tableNames</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">changeMsg</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>


        <span class="c1">//--------------数据库相关操作--------------------</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//获取数据库连接</span>
            <span class="n">conn</span> <span class="o">=</span> <span class="n">getConn</span><span class="o">();</span>
            <span class="c1">//获取数据库的metaData对象</span>
            <span class="nc">DatabaseMetaData</span> <span class="n">metaData</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">getMetaData</span><span class="o">();</span>


            <span class="c1">//游标可以上下移动，可以使用结果集更新数据库中的表</span>
            <span class="n">stmt</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">createStatement</span><span class="o">(</span><span class="nc">ResultSet</span><span class="o">.</span><span class="na">TYPE_SCROLL_INSENSITIVE</span><span class="o">,</span><span class="nc">ResultSet</span><span class="o">.</span><span class="na">CONCUR_UPDATABLE</span><span class="o">);</span>


            <span class="c1">//查询数据库中的全部表</span>
            <span class="nc">ResultSet</span> <span class="n">tables</span> <span class="o">=</span> <span class="n">metaData</span><span class="o">.</span><span class="na">getTables</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"TABLE"</span><span class="o">});</span>

            <span class="c1">//将全部表添加到JCombox中</span>
            <span class="k">while</span><span class="o">(</span><span class="n">tables</span><span class="o">.</span><span class="na">next</span><span class="o">()){</span>
                <span class="n">tableNames</span><span class="o">.</span><span class="na">addItem</span><span class="o">(</span><span class="n">tables</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
            <span class="o">}</span>
            <span class="n">tables</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="c1">//为JFrame添加窗口事件</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">addWindowListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">WindowAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">windowClosing</span><span class="o">(</span><span class="nc">WindowEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">conn</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                    <span class="k">try</span> <span class="o">{</span>
                        <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e1</span><span class="o">)</span> <span class="o">{</span>

                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">TableModelTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="nc">Connection</span> <span class="nf">getConn</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">ClassNotFoundException</span><span class="o">,</span> <span class="nc">SQLException</span> <span class="o">{</span>
        <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">);</span>

        <span class="k">return</span> <span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://localhost:3306/test"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="kd">class</span> <span class="nc">ResultSetTableModel</span> <span class="kd">extends</span> <span class="nc">AbstractTableModel</span> <span class="o">{</span>


        <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">ResultSetMetaData</span> <span class="n">rsmd</span><span class="o">;</span>

        <span class="c1">//构造方法，初始化rs和rsmd两个属性</span>
        <span class="kd">public</span> <span class="nf">ResultSetTableModel</span><span class="o">(</span><span class="nc">ResultSet</span> <span class="n">aResultSet</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">rs</span> <span class="o">=</span> <span class="n">aResultSet</span><span class="o">;</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">rsmd</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getMetaData</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">//重写getColumnName方法，为表格设置列名</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getColumnName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//column是表格列的标号，从0开始，而rsmd获取列时，标号从1开始，所以要column+1</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">rsmd</span><span class="o">.</span><span class="na">getColumnName</span><span class="o">(</span><span class="n">column</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="k">return</span> <span class="s">""</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">//重写getValueAt()方法，用于设置该表格指定单元格的值</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">getValueAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//把游标移动到指定行,swing表格中行号从0开始，但是游标中行号从1开始，所以要修正</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">absolute</span><span class="o">(</span><span class="n">rowIndex</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">rs</span><span class="o">.</span><span class="na">getObject</span><span class="o">(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>

        <span class="o">}</span>

        <span class="c1">//重写getRowCount()方法，用于设置该TableModel的行数</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getRowCount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">last</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">rs</span><span class="o">.</span><span class="na">getRow</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
            <span class="o">}</span>

        <span class="o">}</span>

        <span class="c1">//重写getColumnCount()方法，用于设置表格的列数</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getColumnCount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">rsmd</span><span class="o">.</span><span class="na">getColumnCount</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">//重写isEditable()方法，让每个单元格可编辑</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isCellEditable</span><span class="o">(</span><span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//重写setValueAt()方法，当用户编辑单元格时，会触发该方法</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValueAt</span><span class="o">(</span><span class="nc">Object</span> <span class="n">aValue</span><span class="o">,</span> <span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//把游标定位到对应的行数</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">absolute</span><span class="o">(</span><span class="n">rowIndex</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
                <span class="c1">//修改对应单元格的值</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">updateObject</span><span class="o">(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">aValue</span><span class="o">);</span>
                <span class="c1">//提交修改</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">updateRow</span><span class="o">();</span>
                <span class="c1">//触发单元格的修改事件</span>
                <span class="n">fireTableCellUpdated</span><span class="o">(</span><span class="n">rowIndex</span><span class="o">,</span> <span class="n">columnIndex</span><span class="o">);</span>

            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>

        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p>​	不仅用户可以扩展 AbstractTableModel 抽象类， Swing 本身也为 AbstractTableModel 提供了 一个DefaultTableModel 实现类，程序可以通过使用 DefaultTableModel 实现类来创建 JTable 对象 。 通过DefaultTableModel 对象创建 JTable 对象后，就可以调用它提供的方法来添加数据行、插入数据行 、删除数据行和移动数据行 。 DefaultTableModel 提供了如下几个方法来控制数据行操作:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>addColumn(Object columnName)/addColumn(Object columnName, Object[] columnData):添加一列
addRow(Object[] rowData)：添加一行
insertRow(int row, Object[] rowData)：指定位置处插入一行
removeRow(int row)：删除一行
moveRow(int start, int end, int to)：移动指定范围内的数据行
</code></pre></div></div>

<h3 id="373-tablecolumnmodel和监听器">3.7.3 TableColumnModel和监听器</h3>

<p>JTable 使用 TableColumnModel 来保存该表格所有数据列的状态数据，如果程序需要访问 JTable 的所有列状态信息，则可以通过获取该 JTable 的 TableColumnModel 来实现 。 TableColumnModel 提供了如下几个方法来增加、删除和移动数据列 ：</p>

<ol>
  <li>addColumn(TableColumn aColumn): 该方法用于为 TableModel 添加一列 。 该方法主要用于将原来隐藏的数据列显示出来 。</li>
  <li>moveColumn(int columnIndex, int newIndex): 该方法用于将指定列移动到其他位置 。</li>
  <li>removeColumn(TableColumn column): 该方法用于从 TableModel 中删 除指定列。实际上，该方法并未真正删除指定列，只是将该列在TableColumnModel 中隐藏起来，使之不可见 。</li>
</ol>

<p>JTable中也提供了类似的方法完成列的操作，只是其底层依然是通过TableColumnModel来完成的。</p>

<p><strong>案例：</strong></p>

<p>​	使用DefaultTableModel和TableColumnModel完成下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/DefaultTableModel.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.DefaultTableModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableColumn</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableColumnModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultTableModelTest</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">mainWin</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"管理数据行、数据列"</span><span class="o">);</span>

    <span class="kd">final</span> <span class="kt">int</span> <span class="no">COLUMN_COUNT</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>

    <span class="nc">DefaultTableModel</span> <span class="n">model</span><span class="o">;</span>

    <span class="nc">JTable</span> <span class="n">table</span><span class="o">;</span>
    <span class="c1">//用于保存被隐藏列的List集合</span>
    <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">TableColumn</span><span class="o">&gt;</span> <span class="n">hiddenColumns</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>

        <span class="c1">//创建DefaultTableModel，5行5列</span>
        <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DefaultTableModel</span><span class="o">(</span><span class="no">COLUMN_COUNT</span><span class="o">,</span><span class="no">COLUMN_COUNT</span><span class="o">);</span>

        <span class="c1">//给每个单元格设置内容</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="no">COLUMN_COUNT</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="no">COLUMN_COUNT</span><span class="o">;</span> <span class="n">j</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setValueAt</span><span class="o">(</span><span class="s">"老单元格值"</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">" "</span><span class="o">+</span><span class="n">j</span><span class="o">,</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">);</span>

            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">//创建表格</span>
        <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">model</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">),</span> <span class="nc">BorderLayout</span><span class="o">.</span><span class="na">CENTER</span><span class="o">);</span>

        <span class="c1">//为窗口安装菜单</span>
        <span class="nc">JMenuBar</span> <span class="n">menuBar</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuBar</span><span class="o">();</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setJMenuBar</span><span class="o">(</span><span class="n">menuBar</span><span class="o">);</span>
        <span class="nc">JMenu</span> <span class="n">tableMenu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenu</span><span class="o">(</span><span class="s">"管理"</span><span class="o">);</span>
        <span class="n">menuBar</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tableMenu</span><span class="o">);</span>

        <span class="nc">JMenuItem</span> <span class="n">hideColumnsItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"隐藏选中列"</span><span class="o">);</span>
        <span class="n">hideColumnsItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//获取所有选中列的索引</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">selectedColumns</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getSelectedColumns</span><span class="o">();</span>
            <span class="nc">TableColumnModel</span> <span class="n">columnModel</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumnModel</span><span class="o">();</span>
            <span class="c1">//依次把每个选中的列隐藏起来，并使用hideColumns集合把隐藏的列保存起来</span>

            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">selectedColumns</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="c1">//获取列对象TableColumn</span>
                <span class="nc">TableColumn</span> <span class="n">column</span> <span class="o">=</span> <span class="n">columnModel</span><span class="o">.</span><span class="na">getColumn</span><span class="o">(</span><span class="n">selectedColumns</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="c1">//隐藏指定列</span>
                <span class="n">table</span><span class="o">.</span><span class="na">removeColumn</span><span class="o">(</span><span class="n">column</span><span class="o">);</span>

                <span class="c1">//把隐藏的列保存起来，确保以后可以显示出来</span>
                <span class="n">hiddenColumns</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">column</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">tableMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">hideColumnsItem</span><span class="o">);</span>

        <span class="nc">JMenuItem</span> <span class="n">showColumsItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"显示隐藏列"</span><span class="o">);</span>
        <span class="n">showColumsItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>

            <span class="k">for</span> <span class="o">(</span><span class="nc">TableColumn</span> <span class="n">column</span> <span class="o">:</span> <span class="n">hiddenColumns</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addColumn</span><span class="o">(</span><span class="n">column</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">//清空隐藏列集合</span>
            <span class="n">hiddenColumns</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>

        <span class="o">});</span>

        <span class="n">tableMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">showColumsItem</span><span class="o">);</span>

        <span class="nc">JMenuItem</span> <span class="n">addColumnItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"插入选中列"</span><span class="o">);</span>
        <span class="n">addColumnItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//获取所有选中列的索引</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">selectedColumns</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getSelectedColumns</span><span class="o">();</span>
            <span class="nc">TableColumnModel</span> <span class="n">columnModel</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumnModel</span><span class="o">();</span>
            <span class="c1">//依次插入选中列</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">selectedColumns</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">--)</span> <span class="o">{</span>
                <span class="nc">TableColumn</span> <span class="n">column</span> <span class="o">=</span> <span class="n">columnModel</span><span class="o">.</span><span class="na">getColumn</span><span class="o">(</span><span class="n">selectedColumns</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addColumn</span><span class="o">(</span><span class="n">column</span><span class="o">);</span>

            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">tableMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addColumnItem</span><span class="o">);</span>


        <span class="nc">JMenuItem</span> <span class="n">addRowItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"增加行"</span><span class="o">);</span>
        <span class="n">addRowItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//创建一个String数组，作为新增行的内容</span>
            <span class="nc">String</span><span class="o">[]</span> <span class="n">newCells</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[</span><span class="no">COLUMN_COUNT</span><span class="o">];</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">newCells</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">newCells</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="s">"新单元格的值"</span><span class="o">+</span><span class="n">model</span><span class="o">.</span><span class="na">getRowCount</span><span class="o">()+</span><span class="s">" "</span><span class="o">+</span><span class="n">i</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//向table中新增一行</span>
            <span class="n">model</span><span class="o">.</span><span class="na">addRow</span><span class="o">(</span><span class="n">newCells</span><span class="o">);</span>
        <span class="o">});</span>

        <span class="n">tableMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addRowItem</span><span class="o">);</span>

        <span class="nc">JMenuItem</span> <span class="n">removeRowsItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JMenuItem</span><span class="o">(</span><span class="s">"删除选中行"</span><span class="o">);</span>

        <span class="n">removeRowsItem</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="c1">//获取被选中的行</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">selectedRows</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getSelectedRows</span><span class="o">();</span>

            <span class="c1">//依次删除每一行</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">selectedRows</span><span class="o">.</span><span class="na">length</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="o">;</span> <span class="n">i</span><span class="o">--)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">removeRow</span><span class="o">(</span><span class="n">selectedRows</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>

        <span class="o">});</span>

        <span class="n">tableMenu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">removeRowsItem</span><span class="o">);</span>

        <span class="n">mainWin</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">mainWin</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">DefaultTableModelTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>如果程序需要监昕 JTable 里列状态的改变，例如监听列的增加、删除 、 移动等改变， 则必须使用该 JTable 所对应的 TableColumnModel 对象，该对象提供了 一个 addColumnModelListener()方法来添加监听器， 该监听器接口里包含如下几个方法 ：</p>

<ol>
  <li>columnAdded(TableColumnModelEvent e) : 当向 TableColumnModel 里添加数据列时将会触发该方法。</li>
  <li>columnMarginChanged(ChangeEvent e) : 当由于页面距 ( Margin ) 的改变引起列状态改变时将会触发该方法 。</li>
  <li>columnMoved(TableColumnModelEvent e): 当移动 TableColumnModel 里的数据列时将会触发该方法 。</li>
  <li>columnRemoved(TableColumnModelEvent e): 当删除 TableColumnModel 里的数据列时将会触发该方法 。</li>
  <li>columnSelectionChanged(ListSelectionEvent e): 当改变表格的选择模式时将会触发该方法。</li>
</ol>

<p>但表格的数据列通常需要程序来控制增加、 删除 ，用户操作通常无法直接为表格增加 、删除数据列，所以使用监听器来监听 TableColumnModel 改变的情况比较少见。</p>

<h3 id="374-实现列排序">3.7.4 实现列排序</h3>

<p>使用 JTable 实现的表格并没有实现根据指定列排序的功能 ， 但开发者可以利用 AbstractTableModel 类来实现该功能。由于 TableModel 不强制要求保存表格里的数据，只要 TableModel 实现了 getValueAt()、getColumnCount()和 getRowCount()三个方法， JTable 就可以根据该 TableModel 生成表格 。 因此可以创建个 SortableTableModel 实现类 ， 它可以将原 TableModel 包装起来，并实现根据指定列排序的功能 。</p>

<p>程序创建的 SortableTableModel 实现类会对原 TableModel 进行包装，但它实际上并不保存任何数据，它会把所有的方法实现委托给原 TableModel 完成。 SortableTableModel 仅保存原 TableModel 里每行的行索引， 当程序对 SortableTableModel 的指定列排序时， 实际上仅仅对SortableTableModel 里的行索引进排序一一这样造成的结果是 : SortableTableModel 里的数据行的行索引与原 TableModel 里数据行的行索引不一致，所以对于 TableModel 的那些涉及行索引的方法都需要进行相应的转换。下面程序实现了SortableTableModel 类，并使用该类来实现对表格根据指定列排序的功能 。</p>

<p><strong>案例：</strong></p>

<p>​	实现下图功能：</p>

<p>​		双击列的头部，按照该列从小到大的顺序进行排序</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/sorttable.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.AbstractTableModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.MouseEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SortTable</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"可按照列排序的表格"</span><span class="o">);</span>

    <span class="c1">//定义二维数组作为表格数据</span>

    <span class="nc">Object</span><span class="o">[][]</span> <span class="n">tableData</span> <span class="o">=</span> <span class="o">{</span>

            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李清照"</span><span class="o">,</span><span class="mi">29</span><span class="o">,</span><span class="s">"女"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"苏格拉底"</span><span class="o">,</span><span class="mi">56</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李白"</span><span class="o">,</span><span class="mi">35</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"弄玉"</span><span class="o">,</span><span class="mi">18</span><span class="o">,</span><span class="s">"女"</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"虎头"</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="s">"男"</span><span class="o">},</span>

    <span class="o">};</span>

    <span class="c1">//定义一个一维数组，作为列标题</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">columnTitle</span> <span class="o">=</span> <span class="o">{</span><span class="s">"姓名"</span><span class="o">,</span><span class="s">"年龄"</span><span class="o">,</span><span class="s">"性别"</span><span class="o">};</span>

    <span class="nc">JTable</span> <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">tableData</span><span class="o">,</span><span class="n">columnTitle</span><span class="o">);</span>

    <span class="c1">//将原表格里面的TableModel封装成SortTableModel对象</span>
    <span class="nc">SortTableModel</span> <span class="n">sorterModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SortTableModel</span><span class="o">(</span><span class="n">table</span><span class="o">.</span><span class="na">getModel</span><span class="o">());</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//使用包装后的SortTableModel对象作为JTable的model对象</span>
        <span class="n">table</span><span class="o">.</span><span class="na">setModel</span><span class="o">(</span><span class="n">sorterModel</span><span class="o">);</span>

        <span class="c1">//为每一列的列头增加鼠标监听器</span>
        <span class="n">table</span><span class="o">.</span><span class="na">getTableHeader</span><span class="o">().</span><span class="na">addMouseListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">MouseAdapter</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">mouseClicked</span><span class="o">(</span><span class="nc">MouseEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">//如果单击次数小于2，则返回，不是双击</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getClickCount</span><span class="o">()&lt;</span><span class="mi">2</span><span class="o">){</span>
                    <span class="k">return</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="c1">//找出鼠标双击事件所在列的索引</span>
                <span class="kt">int</span> <span class="n">tableColumn</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">columnAtPoint</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getPoint</span><span class="o">());</span>

                <span class="c1">//将JTable中的列索引，转换成对应的TableModel中的列索引</span>
                <span class="kt">int</span> <span class="n">modelColumn</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">convertColumnIndexToModel</span><span class="o">(</span><span class="n">tableColumn</span><span class="o">);</span>

                <span class="c1">//根据指定列进行排序</span>
                <span class="n">sorterModel</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">modelColumn</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">SortTable</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="c1">//自定义SortTableModel，增强原有的TableModel</span>

    <span class="kd">class</span> <span class="nc">SortTableModel</span> <span class="kd">extends</span> <span class="nc">AbstractTableModel</span><span class="o">{</span>

        <span class="kd">private</span> <span class="nc">TableModel</span> <span class="n">model</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">sortColumn</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">Row</span><span class="o">[]</span> <span class="n">rows</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">SortTableModel</span><span class="o">(</span><span class="nc">TableModel</span> <span class="n">model</span><span class="o">){</span>
            <span class="k">this</span><span class="o">.</span><span class="na">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">;</span>
            <span class="n">rows</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Row</span><span class="o">[</span><span class="n">model</span><span class="o">.</span><span class="na">getRowCount</span><span class="o">()];</span>
            <span class="c1">//将原TableModel中的每行记录的索引用Row数组保存起来</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">rows</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Row</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span>

        <span class="c1">//实现根据指定列进行排序</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="kt">int</span> <span class="n">c</span><span class="o">){</span>
            <span class="n">sortColumn</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
            <span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
            <span class="c1">//触发数据改变的事件</span>
            <span class="n">fireTableDataChanged</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="c1">//下面3个方法需要访问model中的数据，所以涉及本model中数据和被封装model数据中的索引转换，程序使用rows完成这种转换</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">getValueAt</span><span class="o">(</span><span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="na">getValueAt</span><span class="o">(</span><span class="n">rows</span><span class="o">[</span><span class="n">rowIndex</span><span class="o">].</span><span class="na">index</span><span class="o">,</span><span class="n">columnIndex</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isCellEditable</span><span class="o">(</span><span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nf">isCellEditable</span><span class="o">(</span><span class="n">rows</span><span class="o">[</span><span class="n">rowIndex</span><span class="o">].</span><span class="na">index</span><span class="o">,</span><span class="n">columnIndex</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValueAt</span><span class="o">(</span><span class="nc">Object</span> <span class="n">aValue</span><span class="o">,</span> <span class="kt">int</span> <span class="n">rowIndex</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">model</span><span class="o">.</span><span class="na">setValueAt</span><span class="o">(</span><span class="n">aValue</span><span class="o">,</span><span class="n">rows</span><span class="o">[</span><span class="n">rowIndex</span><span class="o">].</span><span class="na">index</span><span class="o">,</span><span class="n">columnIndex</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//下面方法的实现把该model的方法委托给原封装的model来实现</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getRowCount</span><span class="o">()</span> <span class="o">{</span>

            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="na">getRowCount</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getColumnCount</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="na">getColumnCount</span><span class="o">();</span>
        <span class="o">}</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getColumnName</span><span class="o">(</span><span class="kt">int</span> <span class="n">column</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="na">getColumnName</span><span class="o">(</span><span class="n">column</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getColumnClass</span><span class="o">(</span><span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="na">getColumnClass</span><span class="o">(</span><span class="n">columnIndex</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Row</span> <span class="kd">implements</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">Row</span><span class="o">&gt;{</span>
            <span class="c1">//该index保存着被封装Model里每行记录的索引</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="n">index</span><span class="o">;</span>

            <span class="kd">public</span> <span class="nf">Row</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">index</span> <span class="o">=</span> <span class="n">index</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">//实现两行之间大小的比较</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Row</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Object</span> <span class="n">a</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">getValueAt</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">sortColumn</span><span class="o">);</span>
                <span class="nc">Object</span> <span class="n">b</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">getValueAt</span><span class="o">(</span><span class="n">o</span><span class="o">.</span><span class="na">index</span><span class="o">,</span> <span class="n">sortColumn</span><span class="o">);</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="k">instanceof</span> <span class="nc">Comparable</span><span class="o">){</span>
                    <span class="k">return</span> <span class="o">((</span><span class="nc">Comparable</span><span class="o">)</span> <span class="n">a</span><span class="o">).</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="375-绘制单元格内容">3.7.5 绘制单元格内容</h3>

<p>前面看到的所有表格的单元格内容都是宇符串，实际上表格的单元格内容也可以是更复杂的内容。JTable 使用 TableCellRenderer 绘制单元格， Swing 为该接口提供了 一 个实现类 : DefaultTableCellRenderer,该单元格绘制器可以绘制如下三种类型的单元格值(根据其 TableModel 的 getColurnnClass()方法来决定该单元格值的类型) :</p>

<ol>
  <li>Icon: 默认的单元格绘制器会把该类型的单元格值绘制成该Icon对象所代表的图标 。</li>
  <li>Boolean: 默认的单元格绘制器会把该类型的单元格值绘制成复选按钮。</li>
  <li>Object: 默认的单元格绘制器在单元格内绘制出该对象的 toString()方法返回的字符串 。</li>
</ol>

<p>在默认情况下，如果程序直接使用 二维数组或 Vector 来创建 JTable ， 程序将会使用 JTable 的匿名内部类或 DefaultTableModel 充当该表格的 model 对象，这两个 TableModel 的 getColumnClass()方法的返回值都是 Object 。 这意味着，即使该二维数组里值的类型是 Icon ， 但由于两个默认的 TableModel 实现类的 getColumnClass()方法总是返回 Object，这将导致默认的单元格绘制器把 Icon 值当成 Object 值处
理一一只是绘制出其 toString()方法返回的字符串。</p>

<p>​	为了让默认的单元格绘制器可以将 Icon 类型 的值绘制成图标，把 Boolean 类型的值绘制成复边框 ，创建 JTable 时所使用的 TableModel 绝不能采用默认的 TableModel ，必须采用扩展后的 TableModel 类，如下所示 :</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//定义一个DefaultTableModel的子类</span>
<span class="kd">class</span> <span class="nc">ExtendedTableModel</span> <span class="kd">extends</span> <span class="nc">DefaultTableModel</span><span class="o">{</span>
    <span class="o">...</span>
    <span class="c1">//重写getColumnClass方法，根据每列的第一个值，来返回每列的真实数据类型</span>
        <span class="kd">public</span> <span class="kd">class</span> <span class="nf">getColumnClass</span><span class="o">(</span><span class="kt">int</span> <span class="n">c</span><span class="o">){</span>
            <span class="k">return</span> <span class="nf">getValueAt</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">c</span><span class="o">).</span><span class="na">getClass</span><span class="o">();</span>
        <span class="o">}</span>
        
    <span class="o">...</span>
    
<span class="o">}</span>
</code></pre></div></div>

<p>​	提供了上面的 ExtendedTableModel 类之后 ， 程序应该先创建 ExtendedTableModel 对象，再利用该对象来创建 JTable，这样就可以保证 JTable 的 model 对象的 getColumnClass()方法会返回每列真实的数据类型，默认的单元格绘制器就会将 Icon 类型的单元格值绘制成图标 ， 将 Boolean 类型 的单元格值绘制成复选框。</p>

<p>​	如果希望程序采用自己定制的单元格绘制器，则必须实现自己的单元格绘制器，单元格绘制器必须实现 TableCellRenderer 接口。与前面的TreeCellRenderer 接口完全相似， 该接口里也只包含一 个getTableCellRendererComponent()方法，该该方法返回的 Component 将会作为指定单元格绘制的组件。</p>

<p>​	一旦实现了自己的单元格绘制器之后，还必须将该单元格绘制器安装到指定的 JTable 对象上，为指定的 JTable 对象安装单元格绘制器有如下两种方式 ：</p>

<ol>
  <li>局部方式 ( 列级 ) : 调用 TableColumn的setCellRenderer()方法为指定列安装指定的单元格绘制器。</li>
  <li>全局方式 (表级) :调用 JTable 的setDefaultRendererO方法为指定的 JTable 对象安装单元格绘制器, setDefaultRendererO方法需要传入两个参数,即列类型和单元格绘制器 ， 表明指定类型的数据列才会使用该单元格绘制器 。</li>
</ol>

<p><strong>案例：</strong></p>

<p>​	使用TableCellRenderer和TableModel实现下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/TableCellRenderer.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.DefaultTableModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableCellRenderer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableColumn</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TableCellRendererTest</span> <span class="o">{</span>

    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"使用单元格绘制器"</span><span class="o">);</span>

    <span class="nc">JTable</span> <span class="n">table</span><span class="o">;</span>

    <span class="c1">//定义二维数组作为表格数据</span>

    <span class="nc">Object</span><span class="o">[][]</span> <span class="n">tableData</span> <span class="o">=</span> <span class="o">{</span>

            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李清照"</span><span class="o">,</span><span class="mi">29</span><span class="o">,</span><span class="s">"女"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\3.gif"</span><span class="o">)),</span><span class="kc">true</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"苏格拉底"</span><span class="o">,</span><span class="mi">56</span><span class="o">,</span><span class="s">"男"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\1.gif"</span><span class="o">)),</span><span class="kc">false</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李白"</span><span class="o">,</span><span class="mi">35</span><span class="o">,</span><span class="s">"男"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\4.gif"</span><span class="o">)),</span><span class="kc">true</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"弄玉"</span><span class="o">,</span><span class="mi">18</span><span class="o">,</span><span class="s">"女"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\2.gif"</span><span class="o">)),</span><span class="kc">true</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"虎头"</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="s">"男"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\5.gif"</span><span class="o">)),</span><span class="kc">false</span><span class="o">},</span>

    <span class="o">};</span>

    <span class="c1">//定义一个一维数组，作为列标题</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">columnTitle</span> <span class="o">=</span> <span class="o">{</span><span class="s">"姓名"</span><span class="o">,</span><span class="s">"年龄"</span><span class="o">,</span><span class="s">"性别"</span><span class="o">,</span><span class="s">"主头像"</span><span class="o">,</span><span class="s">"是否中国人"</span><span class="o">};</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="c1">//以二维数组和一维数组来创建一个ExtendedTableModel对象</span>
        <span class="nc">ExtendedTableModel</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ExtendedTableModel</span><span class="o">(</span><span class="n">columnTitle</span><span class="o">,</span><span class="n">tableData</span><span class="o">);</span>

        <span class="c1">//创建JTable</span>
        <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">model</span><span class="o">);</span>

        <span class="n">table</span><span class="o">.</span><span class="na">setRowSelectionAllowed</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="n">table</span><span class="o">.</span><span class="na">setRowHeight</span><span class="o">(</span><span class="mi">40</span><span class="o">);</span>

        <span class="c1">//获取第三列</span>
        <span class="nc">TableColumn</span> <span class="n">column</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumnModel</span><span class="o">().</span><span class="na">getColumn</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
        <span class="c1">//对第三列采用自定义的单元格绘制器</span>
        <span class="n">column</span><span class="o">.</span><span class="na">setCellRenderer</span><span class="o">(</span><span class="k">new</span> <span class="nc">GenderTableCellRenderer</span><span class="o">());</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">TableCellRendererTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="c1">//自定义ExtendedTableModel对象</span>
    <span class="kd">class</span> <span class="nc">ExtendedTableModel</span> <span class="kd">extends</span> <span class="nc">DefaultTableModel</span><span class="o">{</span>

        <span class="c1">//重新提供一个构造器，该构造器的实现委托给DefaultTableModel父类</span>
        <span class="kd">public</span>  <span class="nf">ExtendedTableModel</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">columnNames</span><span class="o">,</span><span class="nc">Object</span><span class="o">[][]</span> <span class="n">cells</span><span class="o">){</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">cells</span><span class="o">,</span><span class="n">columnNames</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//重写getColumnClass方法，根据每列第一个值，返回其真实的数据类型</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getColumnClass</span><span class="o">(</span><span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nf">getValueAt</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">columnIndex</span><span class="o">).</span><span class="na">getClass</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">//自定义的单元格绘制器</span>
    <span class="kd">class</span> <span class="nc">GenderTableCellRenderer</span> <span class="kd">extends</span> <span class="nc">JPanel</span> <span class="kd">implements</span> <span class="nc">TableCellRenderer</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">cellValue</span><span class="o">;</span>
        <span class="c1">//定义图标的宽度和高度</span>
        <span class="kd">final</span> <span class="kt">int</span> <span class="no">ICON_WIDTH</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span>
        <span class="kd">final</span> <span class="kt">int</span> <span class="no">ICON_HEIGHT</span> <span class="o">=</span> <span class="mi">21</span><span class="o">;</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Component</span> <span class="nf">getTableCellRendererComponent</span><span class="o">(</span><span class="nc">JTable</span> <span class="n">table</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isSelected</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">hasFocus</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row</span><span class="o">,</span> <span class="kt">int</span> <span class="n">column</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">cellValue</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">value</span><span class="o">;</span>

            <span class="c1">//设置选中状态的绘制边框</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hasFocus</span><span class="o">){</span>
                <span class="n">setBorder</span><span class="o">(</span><span class="nc">UIManager</span><span class="o">.</span><span class="na">getBorder</span><span class="o">(</span><span class="s">"Table.focusCellHighlightBorder"</span><span class="o">));</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="n">setBorder</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//重写paint方法，负责绘制单元格的内容</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">paint</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//如果表格的内容为男或male,则绘制一个男性图标</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">cellValue</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"男"</span><span class="o">)</span> <span class="o">||</span> <span class="n">cellValue</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"male"</span><span class="o">)){</span>
                <span class="n">drawImage</span><span class="o">(</span><span class="n">g</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\male.gif"</span><span class="o">)).</span><span class="na">getImage</span><span class="o">());</span>
            <span class="o">}</span>

            <span class="c1">//如果表格的内容为nv或female，则绘制一个女性图标</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">cellValue</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"女"</span><span class="o">)</span> <span class="o">||</span> <span class="n">cellValue</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"female"</span><span class="o">)){</span>
                <span class="n">drawImage</span><span class="o">(</span><span class="n">g</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\female.gif"</span><span class="o">)).</span><span class="na">getImage</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kt">void</span> <span class="nf">drawImage</span><span class="o">(</span><span class="nc">Graphics</span> <span class="n">g</span><span class="o">,</span><span class="nc">Image</span> <span class="n">image</span><span class="o">){</span>
            <span class="n">g</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">image</span><span class="o">,(</span><span class="n">getWidth</span><span class="o">()-</span><span class="no">ICON_WIDTH</span><span class="o">)/</span><span class="mi">2</span><span class="o">,(</span><span class="n">getHeight</span><span class="o">()-</span><span class="no">ICON_HEIGHT</span><span class="o">)/</span><span class="mi">2</span><span class="o">,</span><span class="kc">null</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="376-编辑单元格内容">3.7.6 编辑单元格内容</h3>

<p>如果用户双击 JTable 表格的指定单元格，系统将会开始编辑该单元格的内容。在默认情况下，系统会使用文本框来编辑该单元格的内容，与此类似的是 ，如果用户双击 JTree 的节 点，默认也会采用文本框来编辑节点 的内容 。</p>

<p>但如果单元格内容不是文字内容，用户当然不希望使用文本编辑器来编辑该单元格的内容，因为这种编辑方式非常不直观，用户体验相当差 。 为了避免这种情况，可以实现自己的单元格编辑器，从而可以给用户提供更好的操作界面。</p>

<p>实现 JTable 的单元格编辑器应该实现 TableCellEditor 接口 ，Swing 为 TableCellEditor提供了 DefaultCellEditor 实现类，efaultCellEditor 类有三
个构造器， 它们分别使用文本框、复选框和JComboBox 作 为单元格编辑器，其中使用文本框编辑器是最常见的情形，如果单元格的值是 Boolean
类型 ，则系统默认使用复选框编辑器。如果想指定某列使用 JComboBox 作为单元格编辑器，则需要显式创建 JComboBox 实例 ，然后以此实例来创建 DefaultCellEditor 编辑器 。</p>

<p><strong>使用DefaultCellEditor步骤：</strong></p>

<ol>
  <li>自定义类，继承DefaultCellEditor，重写getTableCellEditorComponent()方法；</li>
  <li>创建自定义类对象</li>
  <li>为JTable安装单元格编辑器</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">局部安装</span><span class="err">：</span><span class="n">通过TableColumn的setEditor</span><span class="err">（）</span><span class="n">方法完成安装</span><span class="err">，</span><span class="n">只是为某一列安装</span><span class="err">。</span>
<span class="n">全局安装</span><span class="err">：</span><span class="n">调用</span> <span class="nc">JTable</span> <span class="n">的</span> <span class="n">setDefaultEditor</span><span class="err">（）</span><span class="n">方法为该表格安装默认的单元格编辑器</span><span class="err">。</span><span class="n">该方法需要两个参数</span><span class="err">，</span><span class="n">即列类型和单元格编辑器</span><span class="err">，</span><span class="n">这两个参数表明对于指定类型的数据列使用该单元格编辑器</span> <span class="err">。</span>

</code></pre></div></div>

<p><strong>案例：</strong></p>

<p>​	使用TableCellEditor和TableModel完成下图效果：</p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/TableCellEditor1.png" alt="" /></p>

<p>​	<img src="G:/%E7%A0%94%E5%8F%91/GUI/%E6%96%87%E6%A1%A3/images/TableCellEditor2.png" alt="" /></p>

<p><strong>演示代码：</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cn.itcast.swing.util.ImagePathUtil</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.filechooser.FileFilter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.DefaultTableModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.table.TableColumn</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TableCellEditorTest</span> <span class="o">{</span>
    <span class="nc">JFrame</span> <span class="n">jf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFrame</span><span class="o">(</span><span class="s">"使用单元格编辑器"</span><span class="o">);</span>

    <span class="nc">JTable</span> <span class="n">table</span><span class="o">;</span>

    <span class="c1">//定义二维数组作为表格数据</span>

    <span class="nc">Object</span><span class="o">[][]</span> <span class="n">tableData</span> <span class="o">=</span> <span class="o">{</span>

            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李清照"</span><span class="o">,</span><span class="mi">29</span><span class="o">,</span><span class="s">"女"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\3.gif"</span><span class="o">)),</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\3.gif"</span><span class="o">)),</span><span class="kc">true</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"苏格拉底"</span><span class="o">,</span><span class="mi">56</span><span class="o">,</span><span class="s">"男"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\1.gif"</span><span class="o">)),</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\1.gif"</span><span class="o">)),</span><span class="kc">false</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"李白"</span><span class="o">,</span><span class="mi">35</span><span class="o">,</span><span class="s">"男"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\4.gif"</span><span class="o">)),</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\4.gif"</span><span class="o">)),</span><span class="kc">true</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"弄玉"</span><span class="o">,</span><span class="mi">18</span><span class="o">,</span><span class="s">"女"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\2.gif"</span><span class="o">)),</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\2.gif"</span><span class="o">)),</span><span class="kc">true</span><span class="o">},</span>
            <span class="k">new</span> <span class="nc">Object</span><span class="o">[]{</span><span class="s">"虎头"</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="s">"男"</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\5.gif"</span><span class="o">)),</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\5.gif"</span><span class="o">)),</span><span class="kc">false</span><span class="o">},</span>

    <span class="o">};</span>

    <span class="c1">//定义一个一维数组，作为列标题</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">columnTitle</span> <span class="o">=</span> <span class="o">{</span><span class="s">"姓名"</span><span class="o">,</span><span class="s">"年龄"</span><span class="o">,</span><span class="s">"性别"</span><span class="o">,</span><span class="s">"主头像"</span><span class="o">,</span><span class="s">"次头像"</span><span class="o">,</span><span class="s">"是否中国人"</span><span class="o">};</span>


    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(){</span>
        <span class="nc">ExtendedTableModel</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ExtendedTableModel</span><span class="o">(</span><span class="n">columnTitle</span><span class="o">,</span><span class="n">tableData</span><span class="o">);</span>

        <span class="n">table</span>  <span class="o">=</span>  <span class="k">new</span> <span class="nc">JTable</span><span class="o">(</span><span class="n">model</span><span class="o">);</span>

        <span class="n">table</span><span class="o">.</span><span class="na">setRowSelectionAllowed</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="n">table</span><span class="o">.</span><span class="na">setRowHeight</span><span class="o">(</span><span class="mi">40</span><span class="o">);</span>

        <span class="c1">//为表格指定默认的编辑器</span>
        <span class="n">table</span><span class="o">.</span><span class="na">setDefaultEditor</span><span class="o">(</span><span class="nc">ImageIcon</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="k">new</span> <span class="nc">ImageCellEditor</span><span class="o">());</span>

        <span class="c1">//获取第5列</span>
        <span class="nc">TableColumn</span> <span class="n">column</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="na">getColumnModel</span><span class="o">().</span><span class="na">getColumn</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
        <span class="c1">//创建JComboBox对象，并添加多个图标列表项</span>
        <span class="nc">JComboBox</span><span class="o">&lt;</span><span class="nc">ImageIcon</span><span class="o">&gt;</span> <span class="n">editCombo</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JComboBox</span><span class="o">&lt;&gt;();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">editCombo</span><span class="o">.</span><span class="na">addItem</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageIcon</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\"</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">".gif"</span><span class="o">)));</span>
        <span class="o">}</span>

        <span class="c1">//设置第5列使用基于JComboBox的DefaultCellEditor</span>
        <span class="n">column</span><span class="o">.</span><span class="na">setCellEditor</span><span class="o">(</span><span class="k">new</span> <span class="nc">DefaultCellEditor</span><span class="o">(</span><span class="n">editCombo</span><span class="o">));</span>

        <span class="n">jf</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">JScrollPane</span><span class="o">(</span><span class="n">table</span><span class="o">));</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">pack</span><span class="o">();</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setDefaultCloseOperation</span><span class="o">(</span><span class="nc">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
        <span class="n">jf</span><span class="o">.</span><span class="na">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">new</span> <span class="nf">TableCellEditorTest</span><span class="o">().</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>


    <span class="c1">//自定义ExtendedTableModel对象</span>
    <span class="kd">class</span> <span class="nc">ExtendedTableModel</span> <span class="kd">extends</span> <span class="nc">DefaultTableModel</span> <span class="o">{</span>

        <span class="c1">//重新提供一个构造器，该构造器的实现委托给DefaultTableModel父类</span>
        <span class="kd">public</span>  <span class="nf">ExtendedTableModel</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">columnNames</span><span class="o">,</span><span class="nc">Object</span><span class="o">[][]</span> <span class="n">cells</span><span class="o">){</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">cells</span><span class="o">,</span><span class="n">columnNames</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//重写getColumnClass方法，根据每列第一个值，返回其真实的数据类型</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">getColumnClass</span><span class="o">(</span><span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nf">getValueAt</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="n">columnIndex</span><span class="o">).</span><span class="na">getClass</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">//扩展DefaultCellEditor来实现TableCellEditor</span>
    <span class="kd">class</span> <span class="nc">ImageCellEditor</span> <span class="kd">extends</span> <span class="nc">DefaultCellEditor</span><span class="o">{</span>

        <span class="c1">//定义文件选择器</span>
        <span class="kd">private</span> <span class="nc">JFileChooser</span> <span class="n">fDialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JFileChooser</span><span class="o">();</span>
        <span class="c1">//定义文本域</span>
        <span class="kd">private</span> <span class="nc">JTextField</span> <span class="n">field</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPasswordField</span><span class="o">(</span><span class="mi">15</span><span class="o">);</span>
        <span class="c1">//定义按钮</span>
        <span class="kd">private</span> <span class="nc">JButton</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JButton</span><span class="o">(</span><span class="s">"..."</span><span class="o">);</span>


        <span class="kd">public</span> <span class="nf">ImageCellEditor</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//因为DefaultCellEditor没有无参构造器</span>
            <span class="c1">//所以这里显示调用父类有参数的构造器</span>
            <span class="kd">super</span><span class="o">(</span><span class="k">new</span> <span class="nc">JTextField</span><span class="o">());</span>
            <span class="n">initEditor</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initEditor</span><span class="o">()</span> <span class="o">{</span>
            <span class="c1">//禁止编辑</span>
            <span class="n">field</span><span class="o">.</span><span class="na">setEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
            <span class="c1">//为按钮添加监听器，当用户单击按钮时，</span>
            <span class="c1">//系统将出现一个文件选择器让用户选择图标文件</span>
            <span class="n">button</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="n">e</span><span class="o">-&gt;{</span>
                <span class="n">fDialog</span><span class="o">.</span><span class="na">setCurrentDirectory</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11"</span><span class="o">)));</span>
                <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">fDialog</span><span class="o">.</span><span class="na">showOpenDialog</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">result</span><span class="o">==</span><span class="nc">JFileChooser</span><span class="o">.</span><span class="na">CANCEL_OPTION</span><span class="o">){</span>
                    <span class="c1">//用户点击了取消</span>
                    <span class="kd">super</span><span class="o">.</span><span class="na">cancelCellEditing</span><span class="o">();</span>
                    <span class="k">return</span><span class="o">;</span>
                <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                    <span class="c1">//用户点击了确定按钮</span>
                    <span class="n">field</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="nc">ImagePathUtil</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"11\\"</span><span class="o">+</span><span class="n">fDialog</span><span class="o">.</span><span class="na">getSelectedFile</span><span class="o">().</span><span class="na">getName</span><span class="o">()));</span>
                    <span class="n">button</span><span class="o">.</span><span class="na">getParent</span><span class="o">().</span><span class="na">transferFocus</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">});</span>

            <span class="c1">//为文件选择器安装文件过滤器</span>
            <span class="n">fDialog</span><span class="o">.</span><span class="na">addChoosableFileFilter</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileFilter</span><span class="o">()</span> <span class="o">{</span>
                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">File</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">()){</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="o">}</span>

                    <span class="nc">String</span> <span class="n">extension</span> <span class="o">=</span> <span class="nc">Utils</span><span class="o">.</span><span class="na">getExtension</span><span class="o">(</span><span class="n">f</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">extension</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">extension</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Utils</span><span class="o">.</span><span class="na">tiff</span><span class="o">)</span>
                            <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Utils</span><span class="o">.</span><span class="na">tif</span><span class="o">)</span>
                            <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Utils</span><span class="o">.</span><span class="na">gif</span><span class="o">)</span>
                            <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Utils</span><span class="o">.</span><span class="na">jpeg</span><span class="o">)</span>
                            <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Utils</span><span class="o">.</span><span class="na">jpg</span><span class="o">)</span>
                            <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="nc">Utils</span><span class="o">.</span><span class="na">png</span><span class="o">)</span>

                        <span class="o">){</span>
                            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
                            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                        <span class="o">}</span>
                    <span class="o">}</span>

                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="nd">@Override</span>
                <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getDescription</span><span class="o">()</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="s">"有效的图片文件"</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">});</span>

            <span class="n">fDialog</span><span class="o">.</span><span class="na">setAcceptAllFileFilterUsed</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">//重写getTableCellEditorComponent方法，绘制单元格组件</span>


        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Component</span> <span class="nf">getTableCellEditorComponent</span><span class="o">(</span><span class="nc">JTable</span> <span class="n">table</span><span class="o">,</span> <span class="nc">Object</span> <span class="n">value</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isSelected</span><span class="o">,</span> <span class="kt">int</span> <span class="n">row</span><span class="o">,</span> <span class="kt">int</span> <span class="n">column</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">button</span><span class="o">.</span><span class="na">setPreferredSize</span><span class="o">(</span><span class="k">new</span> <span class="nc">Dimension</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span><span class="mi">20</span><span class="o">));</span>
            <span class="nc">JPanel</span> <span class="n">panel</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPanel</span><span class="o">();</span>
            <span class="n">panel</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="nc">BorderLayout</span><span class="o">());</span>
            <span class="n">field</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">field</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">CENTER</span><span class="o">);</span>
            <span class="n">panel</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">button</span><span class="o">,</span><span class="nc">BorderLayout</span><span class="o">.</span><span class="na">EAST</span><span class="o">);</span>

            <span class="k">return</span> <span class="n">panel</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//重写getCellEditorValue方法，填充单元格的内容</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">getCellEditorValue</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ImageIcon</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
        <span class="o">}</span>


    <span class="o">}</span>

<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Utils</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">jpeg</span> <span class="o">=</span> <span class="s">"jpeg"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">jpg</span> <span class="o">=</span> <span class="s">"jpg"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">gif</span> <span class="o">=</span> <span class="s">"gif"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">tiff</span> <span class="o">=</span> <span class="s">"tiff"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">tif</span> <span class="o">=</span> <span class="s">"tif"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">png</span> <span class="o">=</span> <span class="s">"png"</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getExtension</span><span class="o">(</span><span class="nc">File</span> <span class="n">f</span><span class="o">){</span>
        <span class="nc">String</span> <span class="n">ext</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="sc">'.'</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()-</span><span class="mi">1</span><span class="o">){</span>
            <span class="n">ext</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ext</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="四-综合案例">四. 综合案例</h1>

<h2 id="41-项目概述">4.1 项目概述</h2>

<h2 id="42-环境搭建">4.2 环境搭建</h2>

<h2 id="43-项目开发">4.3 项目开发</h2>

<h2 id="44-项目打包">4.4 项目打包</h2>

